<page>
    <shortlink>ondevice assets policy</shortlink>
    <topic>On-device Asset Polices</topic>
    <description>The On-device Asset Policy specifies whether or not assets can be downloaded or deleted, when they are updated, and optional confirmation messages to show the user. In addition, you can also white-list images, lock down access to web services, and customize the search and filter behaviors in the TransForm app.</description>
    <discussion>
        <p>Files, such as images, videos, PDFs, and SQLite databases can be downloaded into the TransForm app for your account to provide dynamic lookups or additional reference information in a form. The files to download are defined by the On-device Assets Manifest, found in *[ui:Developer Options]* &gt; *[ui:Define on device assets]* section of the Home tab in TransForm Central.</p>
        <p>On-device assets are tied to you TransForm account and are available for use in all form types. However, on-device assets will not be downloaded to the TransForm app unless you define an *[On-device Assets Policy]*.</p>
        <p>The On-device Assets Policy is a JSON string that defines whether or not on-device assets for your account should be downloaded to the TransForm app. The policy also defines if or when assets associated with your TransForm account should be deleted from the mobile device. By default, on-device assets will not be downloaded if no policy is defined.</p>
        <p>In addition to specifying how assets are downloaded and when they are deleted, you can also white-list images, lock down access to web services, and customize the search and filter functionality in the TransForm app for your account.</p>
        <p>To add a policy to your TransForm account, enter the On-device Asset Policy in the text box below the On-device Assets Manifest and click the *[ui:Save]* button.</p>
    </discussion>
    <groups>
        <group>
            <sections>
                <section>
                    <figure>
                        <title>The On-device Assets Policy is defined below the On-device Assets Manifest in *[ui:Define on devices assets]*.</title>
                        <link>/images/onDeviceAssetsPolicy.png</link>
                    </figure>
                </section>
            </sections>
        </group>
        <group>
            <title>Downloading &amp; Deleting On-device Assets</title>
            <sections>
                <section>
                    <description>
                        <p>SQLite databases and media files can be downloaded to the TransForm app and referenced in your applications. The On-device Assets Manifest defines what resources to download and where to store them. The Policy for On-device Assets specifies when the assets should be downloaded, how they are updated, and when they should be removed from the user's device.</p>
                    </description>
                </section>
                <section>
                    <title nested="2">Downloading Assets</title>
                    <description>
                        <p>Assets can be downloaded on demand and/or on login. Assets downloaded on demand are done so using the "Other Actions" &gt; "Update On-device Data" menu option in the TransForm app.</p>
                    </description>
                    <figure>
                        <link>/images/updateDeviceData1.png</link>
                    </figure>
                </section>
                <section>
                    <description>
                        <p>If assets are configured to download on login, all files and resources defined in the On-device Assets Manifest will be automatically downloaded to the TransForm app when the user logs in or when the user re-confirms login.</p>
                        <p>Assets will only be downloaded if you explicitly define a download policy. By default, assets are never downloaded. The default policy is shown below:</p>
                        <p><example><![CDATA["download": { "onDemand" : false, "onLogin" : false }]]></example></p>
                        <p>Three messages can be shown to the user when downloading assets:</p>
                        <p>
                            <list>
                                <item>
                                    <name>Check Prompt</name>
                                    <description>This message prompts the user to confirm checking to see if there are new assets to download</description>
                                </item>
                                <item>
                                    <name>Confirmation Prompt</name>
                                    <description>If new assets are available for download, this message will ask the user if they would like to download the assets</description>
                                </item>
                                <item>
                                    <name>Success Prompt</name>
                                    <description>This message notifies the user that new assets were downloaded successfully</description>
                                </item>
                            </list>
                        </p>
                        <p>
                            <example><![CDATA["onDemand" : {"checkprompt": false, "confirmprompt": false, "successprompt": true }]]></example>
                        </p>
                        <p>You must specify whether or not each of these messages should be shown for your chosen download methods.</p>
                        <p>
                            <example><![CDATA["onLogin" : {"checkprompt": false, "confirmprompt": false, "successprompt": true }]]></example>
                        </p>
                    </description>
                </section>
                <section>
                    <cases>
                        <case>
                            <title nested="3">download Settings Reference</title>
                            <list>
                                <item>
                                    <name>*[js:onDemand]*</name>
                                    <description>Defines the on demand download policy. Either an object with three prompt properties (described in [Prompt Properties]) or the value *[js:false]*. If *[js:false]*, on-device assets cannot be downloaded on demand using the "Update On-device Data" menu action in the TransForm app.</description>
                                </item>
                                <item>
                                    <name>*[js:onLogin]*</name>
                                    <description>Defines the on login download policy. Either an object with three prompt properties (described in [Prompt Properties]) or the value *[js:false]*. If *[js:false]*, on-device assets will not be downloaded when the user logs into the TransForm account in the TransForm app.</description>
                                </item>
                            </list>
                        </case>
                        <case>
                            <title nested="3">Prompt Properties</title>
                            <description>
                                <p>The prompt properties define what messages to show to the user when on-device assets are downloaded.</p>
                            </description>
                            <list>
                                <item>
                                    <name>*[js:checkprompt]*</name>
                                    <description>A *[js:true]* or *[js:false]* value. If *[js:true]*, the user will be asked if they would like to check to see if new assets are available for download.</description>
                                </item>
                                <item>
                                    <name>*[js:confirmationprompt]*</name>
                                    <description>A *[js:true]* or *[js:false]* value. If *[js:true]*, the user will be asked if they would like to download new assets.</description>
                                </item>
                                <item>
                                    <name>*[js:successprompt]*</name>
                                    <description>A *[js:true]* or *[js:false]* value. If *[js:true]*, the user will be shown a "success" message after assets have been downloaded to the device.</description>
                                </item>
                            </list>
                        </case>
                    </cases>
                </section>
                <section>
                    <title nested="2">Removing Assets</title>
                    <description>
                        <p>In addition to specifying when assets are downloaded, you can also control when they should be deleted from the device. Assets can be removed on demand, on logout, or when the user logs out of your TransForm account and logs into another account. If delete on demand is enabled, users can use the "Other Actions" &gt; "Delete On-device Assets" menu option in the TransForm app to delete all assets associated with the TransForm account from the device.</p>
                    </description>
                    <figure>
                        <link>/images/deleteDeviceData1.png</link>
                    </figure>
                </section>
                <section>
                    <description>
                        <p>It is recommended that you allow deleting assets on demand as well as when the user logs into another TransForm account on the device. </p>
                        <p>
                            <example><![CDATA["delete": { "onDemand" : true, "onLogout" : false, "onNewAccount" : true }]]></example>
                        </p>
                    </description>
                </section>
                <section>
                    <cases>
                        <case>
                            <title nested="3">delete Settings Reference</title>
                            <list>
                                <item>
                                    <name>*[js:onDemand]*</name>
                                    <description>A *[js:true]* or *[js:false]* value. If *[js:true]*, the user can use the" Delete On-device Assets" menu action to delete assets from the TransForm app.</description>
                                </item>
                                <item>
                                    <name>*[js:onLogout]*</name>
                                    <description>A *[js:true]* or *[js:false]* value. If *[js:true]*, all on-device assets will be deleted from the device when the user logs out of the TransForm app.</description>
                                </item>
                                <item>
                                    <name>*[js:onNewAccount]*</name>
                                    <description>A *[js:true]* or *[js:false]* value. If *[js:true]*, on-device assets will be deleted if the user logs out of the current TransForm account and logs into a different TransForm account. The TransForm account is the account to which the assets belong, not the user's login username. </description>
                                </item>
                            </list>
                        </case>
                    </cases>
                </section>
            </sections>
        </group>
        <group>
            <title>Images, Data Encodings, and Web Services</title>
            <sections>
                <section>
                    <description>
                        <p>If you want to embed images served from a third-party website or use web services with the TransForm Programming Language (TPL), you must define a white-list of allowed sites or encodings using path, data, or ajax prefixes. Prefixes can be used with HTML commands or TPL functions to embed images or fetch data from a web service. All prefixes are defined in the policy as a set of name-value pairs.</p>
                        <p><example><![CDATA["prefixName" : "fullPathPrefix"]]></example></p>
                    </description>
                </section>
                <section>
                    <title nested="2">White-listing Images</title>
                    <description>
                        <p>By default, no images can be displayed from other sites in a TransForm form. The HTML command disallows displaying images from other sites unless the image's domain has been white-listed. </p>
                        <p>In order to white-list images, you must add a path prefix for the image's location to the on-device assets policy. Path prefixes can be added for domains or on-device assets. The full path to the image must be specified in the path prefix in one of the following formats:</p>
                        <p>
                            <list>
                                <item>
                                    <name>*[js:"http://.../"]*</name>
                                    <description>
                                        <p>A URL that begins with "http://" and ends with "/". </p>
                                        <p><example><![CDATA["http://www.myapp.com/images/"]]></example></p>
                                    </description>
                                </item>
                                <item>
                                    <name>*[js:"https://..../"]*</name>
                                    <description>
                                        <p>A URL that begins with "https://" and ends with "/". </p>
                                        <p><example><![CDATA["https://www.allapps.org/"]]></example></p>
                                    </description>
                                </item>
                                <item>
                                    <name>*[js:"#fileSystemFolder/"]*</name>
                                    <description>
                                        <p>A local file system folder as specified in the On-device Assets Manifest that begins with "#" followed by the folder name and ending with a "/". </p>
                                        <p><example><![CDATA["#images/" ]]></example></p>
                                    </description>
                                </item>
                            </list>
                        </p>
                        <p>For example:</p>
                        <p><example><![CDATA["pathprefixes" : {
    "mysite" : "https://www.mysite.com/images/",
    "images" : "#products/"
}
]]></example></p>
                        <p>In the definition above, two path prefixes have been specified: "mysite" and "images". The "mysite" prefix specifies a URL and "images" specifies a local directory, products, from the On-device Assets Manifest where files have been downloaded.</p>
                        <p>Path prefixes are used in the src attribute for an &lt;img&gt; tags in the HTML command as follows:</p>
                        <p><example><![CDATA[Image from a website: <img src="mysite.logo.png" /><br/>
Image from On-device Assets: <img src="images.4529.jpg" />
]]></example></p>
                        <p>The HTML command does not permit "/" characters in the src property. This means that the path prefix must specify the full path to the image's location. For example, let's assume we defined "mysite" as follows:</p>
                        <p><example><![CDATA["pathprefixes" {
    "mysite" : "https://www.mysite.com/"
}
]]></example></p>
                        <p>If you wanted to display the "logo.png" image located inside the sub-directory at www.mysite.com, you may be tempted try this:</p>
                        <p><example><![CDATA[Image from a website: <img src="mysite.images/logo.png" /><br/>]]></example></p>
                        <p>This will not work because the "/" character is not permitted in the src property for the &lt;img&gt; tag in the HTML command. Therefore, the full path to the image must be defined in the path prefixes.</p>
                    </description>
                </section>
                <section>
                    <title nested="2">Data URLs</title>
                    <description>
                        <p>Data URLs in HTML allow you to embed content directly into a web page, rather than referencing an image file. Data URLs are frequently used to embed image content directly into a web page. Data URLs can be used with the HTML command to embed images into your TransForm apps, however you must first white-list them by adding a data prefix for each data URL type you wish to use.</p>
                        <p>For example, in a traditional web page, you would embed a base64 encoded PNG image as follows:</p>
                        <p><example><![CDATA[<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==" />]]></example></p>
                        <p>This produces an image of a red dot:</p>
                    </description>
                </section>
                <section>
                    <content><![CDATA[<center><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==" /></center>]]></content>
                </section>
                <section>
                    <description>
                        <p>To embed this image in your form type, you must first declare a data prefix for the encoding:</p>
                        <p><example><![CDATA["dataprefixes" : {
    "datapng":"data:image/png;base64,"
}
]]></example></p>
                        <p>The data prefix can then be used in an HTML command to embed the image. The data prefix is specified before the base64 encoded data as "*[em:prefixName]*.":</p>
                        <p><example><![CDATA[<img src="datapng.iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==" />]]></example></p>
                    </description>
                </section>
                <section>
                    <title nested="2">Web Services</title>
                    <description>
                        <p>The TransForm Programming Language (TPL) can be used to integrate web services into any form using the *[js:ajaxGET()]* or *[js:ajaxSendRequest()]* TPL methods. By default, TPL permits full access to any URL. If you wanted to ensure that Form Designers could only build out forms that connected to specific sites, you need to define ajax prefixes for your TransForm account.</p>
                        <p>An ajax prefix specifies the URLs that can be accessed by your TransForm forms. By default, all URLs are white-listed:</p>
                        <p><example><![CDATA["ajaxprefixes" : {
    "*":"*"
}
]]></example></p>
                        <p>You can lock down your applications by explicitly specifying the URLs that can be accessed. For example:</p>
                        <p><example><![CDATA["ajaxprefixes" : {
    "mySite" : "https://www.mysite.com/",
    "staticMap" : "https://maps.googleapis.com/maps/api/staticmap?key=YOUR_API_KEY&",
    "currentWeather" : "https://api.openweathermap.org/data/2.5/weather?appid=YOUR_API_KEY&"
}
]]></example></p>
                        <p>The above definition defines three ajax prefixes: "mySite", "staticMap", and "weatherAPI". "mySite" permits access to anything under the www.mysite.com domain. "staticMap" and "currentWeather", however, only allow access to the Google Static Maps API and OpenWeatherMap's current weather data API.</p>
                        <p>The ajax prefix is used in lieu of the website URL. For example:</p>
                        <p><example><![CDATA[*ON button_getWeather
    lat_lon = "lat=" & #latitude & "&lon=" & #longitude
    weather = ajaxGET("currentWeather." & lat_lon)
ENDON
]]></example></p>
                        <p>Note that the *[js:"*":"*"]* was not specified in the ajax prefixes definition. *[js:"*":"*"]* allows access to any URL. If you wanted to continue to allow access in TPL to any URL, you must include *[js:"*":"*"]* in the ajax prefixes definition.</p>
                        <p>Ajax prefixes are useful not only to lock down your account, but to also simplify URLs. For example, if no prefix was defined for OpenWeatherMap's current weather API, TPL programmers would have to manually type in the URL every time they wanted to use the API. This can increase the risk of errors introduced through accidental typos. It also allows you to define API keys in one place, making it easy to update them later.</p>
                    </description>
                </section>
            </sections>
        </group>
        <group>
            <title>Searching and Filtering Forms and Form Types</title>
            <sections>
                <section>
                    <description>
                        <p>Searching and filtering forms in the TransForm app can be customized for each TransForm account.</p>
                    </description>
                </section>
                <section>
                    <title nested="2">Customizing Search</title>
                    <description>
                        <p>By default, search in the TransForm app only searches the form name for the keyword. You can customize search for your TransForm account to include additional fields, including system fields (form status, has errors, date) and specific fields in a Form Type. </p>
                        <p>The default search specification is shown below.</p>
                        <p><example><![CDATA["searchspec" : [
  { "field" : "*formname" }
]
]]></example></p>
                        <p>The search specification is an array of fields and Form Types to search. The above search definition defines a field search on *[js:*formname]*, a system filed that contains the form's name as defined in the Form Type definition. An optional *[js:formid]* property can be specified that defines the Form Types to search. For example:</p>
                        <p><example><![CDATA["searchspec" : [
  { "field" : "#address", "formid" : "eqInspection,solarInstall,medical" }
]
]]></example></p>
                        <p>Using the above *[js:searchspec]* definition, the TransForm app will search the address field in the forms with a form id of "eqInspection", "solarInstall", or "medical". Forms with any other id will not be included in the search, even if they contain an address field. </p>
                        <p>You can use * to specify the search applies to all form ids that start with a specific string of characters. For example:</p>
                        <p><example><![CDATA["searchspec" : [
  { "field" : "#azimuth", "formid" : "solar*" }
]
]]></example></p>
                        <p>The above search specification will search the azimuth field in all forms with a form id that begins with "solar".</p>
                    </description>
                </section>
                <section>
                    <title nested="2">Filters for Forms and Form Types</title>
                    <description>
                        <p>In addition to searching forms, you can also filter forms in the Forms list. When filtering forms, a form only matches if it meets all of the specified criteria.</p>
                        <p>The form filter options are defined by the filter specification. For each filter, you must define a filter id, a title shown in the filter options list that describes the filter, the user roles that have permission to use the filter, the filter type, whether or not the filter should be enabled by default, the operation as well as any filter choices that are required. The settings for defining a filter specification are described in the [filterspec and filterdefspec Settings Reference].</p>
                        <p>If no *[js:filterspec]* is defined, a default set of filter options will be created for you that allow you to filter on forms that are unsaved, forms that contain errors, forms that have required fields that are missing (blank), and the form type. The default *[js:filterspec]* is shown below.</p>
                        <p><example><![CDATA["filterspec" : [
  {
    "id" : "unsavedonly",
    "title" : "Unsaved forms",
    "roles" : "user",
    "type" : "hasValue",
    "field" : "*unsaved",
    "enabled" : false
  },
  {
    "id" : "haserrors",
    "title" : "Has errors",
    "roles" : "user",
    "type" : "hasValue",
    "field" : "haserrors",
    "enabled" : false
  },
  {
    "id" : "missingrequired",
    "title" : "Required fields are missing",
    "roles" : "user",
    "type" : "hasValue",
    "field" : "missingrequired",
    "enabled" : false
  },
  {
    "id" : "formname",
    "title" : "Form Type (current forms only)",
    "roles" : "user",
    "type" : "currentValues",
    "field" : "*formname",
    "enabled" : false,
    "op" : "matchText"
  }
]
]]></example></p>
                        <p>Filtering can also be done on Form Types list by defining a *[js:filterdefspec]*. The default form type filter definition, shown below, lets you filter the form types list by form type name. The properties for defining a *[js:filterdefspec]* are the same as the *[js:filterspec]*. </p>
                        <p><example><![CDATA["filterdefsspec" : [
  {
    "id" : "formid",
    "title" : "Form Type ID",
    "roles" : "user",
    "type" : "valueList",
    "field" : "formid",
    "enabled" : false,
    "op" : "matchText",
    "list" : [
      {"value": "d*", "text": "Form ID starts with 'd'"},
      {"value": "eqInspection", "text": "Equipment Inspection"}
    ]
  }
]
]]></example></p>
                    </description>
                </section>
                <section>
                    <cases>
                        <case>
                            <title nested="3">filterdef and filterdefspec Settings Reference</title>
                            <list>
                                <item>
                                    <name>*[js:id]*</name>
                                    <description>
                                        <p>A unique identifier for the filter definition.</p>
                                    </description>
                                </item>
                                <item>
                                    <name>*[js:title]*</name>
                                    <description>
                                        <p>The label for the checkbox for the filter in the filter screen.</p>
                                    </description>
                                </item>
                                <item>
                                    <name>*[js:roles]*</name>
                                    <description>
                                        <p>The user role ids that are allowed to access the filter. Can be any user role defined in the Permissions settings for your TransForm Account (the Role ID property). Multiple roles are defined as a comma-delimited list. For example,</p>
                                        <p>
                                        <example><![CDATA[ "roles":"user,FormDesigner,AccountAdmin"]]></example>
                                        </p>
                                    </description>
                                </item>
                                <item>
                                    <name>*[js:type]*</name>
                                    <description>
                                        <p>Defines how the filter is applied. Can be one of the following values:</p>
                                    </description>
                                    <list>
                                        <item>
                                            <name>*[js:hasValue]*</name>
                                            <description>
                                            <p>The field contains a non-null (i.e. non-blank) value.</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:hasNoValue]*</name>
                                            <description>
                                            <p>The field contains no value (i.e. blank).</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:valueList]*</name>
                                            <description>
                                            <p>The filter is based on a set of defined values. Filter values used are specified in the list setting.</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:currentValue]*</name>
                                            <description>
                                            <p>The filter is based on current values in the field. The user will be presented with a list of choices in the filter dialog.</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:date]*</name>
                                            <description>
                                            <p>The field's value is compared to a date. The date compared to the value is specified in *[js:op]*.</p>
                                            </description>
                                        </item>
                                    </list>
                                </item>
                                <item>
                                    <name>*[js:field]*</name>
                                    <description>
                                        <p>The field the filter is applied to. The field can be a field in the form or a system field:</p>
                                    </description>
                                    <list>
                                        <item>
                                            <name>*[js:*unsaved]*</name>
                                            <description>
                                            <p>The form's saved state. Contains a value if the form contains unsaved edits (changes that have not been uploaded to TransForm Central).</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:missingrequired]*</name>
                                            <description>
                                            <p>Contains a value if the form contains any fields that require a value and are blank.</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:*formname]*</name>
                                            <description>
                                            <p>The form name.</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:formid]*</name>
                                            <description>
                                            <p>The form type id.</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:user1]*, *[js:user2]*, *[js:user3]*, *[js:user4]*, *[js:user5]*</name>
                                            <description>
                                            <p>User defined fields.</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:userlabel1]*, *[js:userlabel2]*, *[js:userlabel3]*, *[js:userlabel4]*, *[js:userlabel5]*</name>
                                            <description>
                                            <p>Fields that contain the label (i.e. field title) for the corresponding *[js:user1]* through *[js:user5]* fields.</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:duedate]*</name>
                                            <description>
                                            <p>The form's due date in the format YYYY-MM-DD.</p>
                                            </description>
                                        </item>
                                        <item>
                                            <name>*[js:#fieldname]*</name>
                                            <description>
                                            <p>The name of a field in the form. Replace *[em:fieldname]* with the Field's name as defined in the form type definition.</p>
                                            </description>
                                        </item>
                                    </list>
                                </item>
                                <item>
                                    <name>*[js:enabled]*</name>
                                    <description>
                                        <p>A *[js:true]* or *[js:false]* value. Sets the initial state of the filter option. If *[js:true]*, the filter option will be enabled by default. If *[js:false]*, it will be disabled.</p>
                                    </description>
                                </item>
                                <item>
                                    <name>*[js:op]*</name>
                                    <description>
                                        <p>If the type is set to *[js:currentText]*, *[js:op]* defines how to compare the value to the field. Can be one of the following:</p>
                                        <p>
                                        <list>
                                            <item>
                                                <name>*[js:matchText]*</name>
                                                <description>
                                                <p>The filter value matches the text in the field exactly.</p>
                                                </description>
                                            </item>
                                            <item>
                                                <name>*[js:containsText]*</name>
                                                <description>
                                                <p>The filter value is contained in the field.</p>
                                                </description>
                                            </item>
                                        </list>
                                        </p>
                                        <p>In addition to the options listed above, the following options are available for doing date comparisons. Date comparisons are supported for the *[js:duedate]* field and any form field that stores the date using the format YYYY-MM-DD.</p>
                                        <p>
                                        <list>
                                            <item>
                                                <name>*[js:pastDue]*</name>
                                                <description>
                                                <p>The value in the date field occurs before the current date.</p>
                                                </description>
                                            </item>
                                            <item>
                                                <name>*[js:due]*</name>
                                                <description>
                                                <p>The value in the date field occurs before the current date or is the current date.</p>
                                                </description>
                                            </item>
                                            <item>
                                                <name>*[js:today]*</name>
                                                <description>
                                                <p>The value in the date field is the current date.</p>
                                                </description>
                                            </item>
                                            <item>
                                                <name>*[js:nowOn]*</name>
                                                <description>
                                                <p>The value in the date field is the current date or is after the current date.</p>
                                                </description>
                                            </item>
                                            <item>
                                                <name>*[js:future]*</name>
                                                <description>
                                                <p>The value in the date field occurs after the current date.</p>
                                                </description>
                                            </item>
                                            <item>
                                                <name>*[js:last7]*</name>
                                                <description>
                                                <p>The value in the date field is within the last seven days, including the current date.</p>
                                                </description>
                                            </item>
                                            <item>
                                                <name>*[js:next7]*</name>
                                                <description>
                                                <p>The value in the date field is within the next seven days, including the current date. </p>
                                                </description>
                                            </item>
                                        </list>
                                        </p>
                                    </description>
                                </item>
                                <item>
                                    <name>*[js:list]*</name>
                                    <description>
                                        <p>One or more values used to compare the field's value if the filter type is set to valueList. Each entry in list contains the value to filter on (i.e. *[js:value]*) and a description of the filter's action (i.e. *[js:text]*) that is shown in the TransForm app. For example:</p>
                                        <p><example><![CDATA["list" : [
  {"value": "d*", "text": "Form ID starts with 'd'"},
  {"value": "eqInspection", "text": "Equipment Inspection"}
]
]]></example></p>
                                        <p>If the value ends with an asterisk *[js:*]*, the filter will do a "starts with" comparison (instead of an "equals" comparison) when comparing the value in the field to the value defined in the *[js:list]*. </p>
                                        <p>If *[js:op]* is set to *[js:containsText]*, the *[js:*]* is treated as part of the search value.</p>
                                    </description>
                                </item>
                            </list>
                        </case>
                    </cases>
                </section>
            </sections>
        </group>
        <group>
            <title>Queues</title>
            <sections>
                <section>
                    <description>
                        <p>When a new form is added in the TransForm app, the form is automatically assigned to the user who created it. If a form is created using the Managment Console or TransForm API, however, the form can be assigned to a queue.</p>
                        <p>Forms assigned to a queue are listed in the *[ui:Claim Forms]* section of the TransForm App.</p>
                    </description>
                    <figure>
                        <title>Claim Forms screen in the TransForm Mobile App</title>
                        <link>/images/claimForms_Default.png</link>
                    </figure>
                </section>
                <section>
                    <description>
                        <p>Users can claim forms from a queue by tapping on the form, which assigns the form to the user.</p>
                    </description>
                    <important>
                        <p>Users must be logged in and online to claim forms.</p>
                    </important>
                </section>
                <section>
                    <description>
                        <p>Every TransForm account is configured with a basic "Unassigned Forms" queue. The default queue specification is shown below:</p>
                        <p>
                            <example><![CDATA["queues" : { 
    "listOfQueues" : [
        {
            "queueID":"default",
            "name":"Unassigned Forms",
            "roles":"*",
            "template":"",
            "color":"#070"
        }
    ]
}]]></example>
                        </p>
                        <p>The queue specification is an array of queues. Each queue has an id, name, the button color for the queue, a list of user roles that are allowed to access the queue, and optional form heading template. The default queue specification shown above defines one queue named "Unassigned Forms" with an id of "default", a button color of "#070" (green), and allows anyone to access to the queue (*[js:"roles":"*"]*).</p>
                        <p>Access to a queue can be restricted by explicitly listing the user roles allowed to access the queue. For example:</p>
                        <p>
                            <example><![CDATA["queues" : { 
    "listOfQueues" : [
        {
            "queueID":"default",
            "name":"Unassigned Forms",
            *[highlighter:"roles":"supervisor,AccountAdmin",]*
            "template":"",
            "color":"#070"
        }
    ]
}]]></example>
                        </p>
                        <p>You can also define a form heading template. The template, if defined, overrides the default heading template for a form.</p>
                    </description>
                    <note>
                        <p>The *[js:queue]* settings are defined in the On-device Assets Policy at the root level. In other words, *[js:queue]* is a sibiling to the *[js:policy]* settings:</p>
                        <p>
                            <example><![CDATA[{
    "policy" : { /* policy settings */ },
    "queue" : { /* queue settings */}
}]]></example>
                        </p>
                    </note>
                </section>
                <section>
                    <title>listOfQueues Settings Reference</title>
                    <list>
                        <item>
                            <name>*[js:queueID]*</name>
                            <description>
                                <p>A unique string that identifies the queue. For example, "default" or "queue1".</p>
                            </description>
                        </item>
                        <item>
                            <name>*[js:name]*</name>
                            <description>
                                <p>The queue name. The name is the name shown in Claim Forms in the TransForm app.</p>
                            </description>
                        </item>
                        <item>
                            <name>*[js:roles]*</name>
                            <description>
                                <p>A comma-delimited list of user role ids that have permission to access the queue. A value of *[js:*]* means all users have access. Role ids are listed on the Permissions tab in TransForm Central.</p>
                            </description>
                        </item>
                        <item>
                            <name>*[js:template]*</name>
                            <description>
                                <p>An optional template used in the form listing. *[js:template]* overrides the heading template defined for a form. See [TPL Templating] for more information on how to define a template.</p>
                            </description>
                        </item>
                        <item>
                            <name>*[js:color]*</name>
                            <description>
                                <p>The background color shown for the queue on the *[ui:Claim Forms]* screen.</p>
                            </description>
                        </item>
                    </list>
                    <note>
                        <p>If you change the queue specification for your TransForm account, users may need to log out of the TransForm App to update the queues listed in *[ui:Claim Forms]*.</p>
                    </note>
                </section>
            </sections>
        </group>
        <group>
            <title>Appendix</title>
            <sections>
                <section>
                    <title nested="2">Sample Policy</title>
                    <description>
                        <p><example><![CDATA[{
    "policy" : {
        "download" : {
            "onDemand": {"checkprompt":false,"confirmprompt":false,"successprompt":true},
            "onLogin" : {"checkprompt":false,"confirmprompt":false,"successprompt":true}
        },
        "delete" : {
            "onDemand" : true,
            "onLogout" : false,
            "onNewAccount" : true
        },
        "pathprefixes" : {
            "media" : "http://alphamediacapture.s3.amazonaws.com/transform/",
            "images" : "#images/"
        },
        "dataprefixes" : {
            "datapng" : "data:image/png;base64,",
            "datajpg" : "data:image/jpg;base64,"
        },
        "ajaxprefixes" : {
            "*" : "*"
        },
        "searchspec" : [
            { 
                "field" : "*formname"
            }
        ],
        "filterspec" : [
            {
                "id" : "unsavedonly",
                "title" : "Unsaved forms",
                "roles" : "user",
                "type" : "hasValue",
                "field" : "*unsaved",
                "enabled" : false
            },
            {
                "id" : "haserrors",
                "title" : "Has errors",
                "roles" : "user",
                "type" : "hasValue",
                "field" : "haserrors",
                "enabled" : false
            },
            {
                "id" : "missingrequired",
                "title" : "Required fields are missing",
                "roles" : "user",
                "type" : "hasValue",
                "field" : "missingrequired",
                "enabled" : false
            },
            {
                "id" : "formname",
                "title" : "Form Type (current forms only)",
                "roles" : "user",
                "type" : "currentValues",
                "field" : "*formname",
                "enabled" : false,
                "op" : "matchText"
            }
        ],
        "filterdefsspec" : [
            {
                "id" : "formname",
                "title" : "Form Types",
                "roles" : "user",
                "type" : "currentValues",
                "field" : "*formname",
                "enabled" : false,
                "op" : "matchText"
            }
        ]
    },
    "queues" : { 
        "listOfQueues" : [
            {
                "queueID":"default",
                "name":"Unassigned Forms",
                "roles":"*",
                "template":"",
                "color":"#070"
            }
        ]
    }
}]]></example></p>
                    </description>
                </section>
            </sections>
        </group>
    </groups>
    <links>
        <link href="#section3_Prompt%20Properties">Prompt Properties</link>
        <link href="#section3_filterdef%20and%20filterdefspec%20Settings%20Reference">filterspec and filterdefspec Settings Reference</link>
        <link link="transform%20designer%20tpltemplating">TPL Templating</link>
    </links>
</page>