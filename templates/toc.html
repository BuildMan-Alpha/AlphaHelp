<html>
<body onload="tocLoaded()" >
<style>
ul {
font: 10pt tahoma, arial;
list-style-type: none;
margin: 0px;
padding: 0px;
cursor: default;
-moz-user-select: none;
-webkit-user-select: none;
-ms-user-select: none;
}
ul ul{
padding-left: 24px;
}
li div {
margin-left: 24px;
padding: 4px;
position: relative;
}
li div:hover:before {
content: "";
display: block;
position: absolute;
top: 0px;
left: 0px;
right: 0px;
bottom: 0px;
background:Highlight;
border: 1px solid rgba(0,0,0,.25);
border-radius: 2px;
opacity: .2;
}
li[branch] {
position: relative;
}
li[branch].opened:before {
content: "";
display: block;
position: absolute;
top: 10px;
left: 7px;
border: 5px ThreeDShadow solid;
border-left-color: transparent;
border-right-color: transparent;
border-bottom: none;
}
li[branch].closed:before {
content: "";
display: block;
position: absolute;
top: 8px;
left: 9px;
border: 5px ThreeDShadow solid;
border-top-color: transparent;
border-bottom-color: transparent;
border-right: none;
}

.selected {
color:HighlightText;
background:Highlight;
border: 1px solid rgba(0,0,0,.25);
padding: 3px;
border-radius: 2px;
}
</style>
<div id="TOC">
__content__
</div>
<script>
var tocEle = document.getElementById("TOC");
var lastSelection = null;

//Finds y value of given object
var findPos = function(obj) {
    var curtop = 0;
    if (obj.offsetParent) {
        do {
            curtop += obj.offsetTop;
        } while (obj = obj.offsetParent);
    return curtop;
    }
}

tocEle.addEventListener("click", function(e) {
	if(e.target ) {
		if( e.target.id == "TOC" ) {
			return false;
		} else if( e.target.nodeName == "DIV" ) {
			if( e.target.id ) {
				window.parent.checkNavigation(e.target.id,'toc');
				//window.top.document.location.replace("/help"+e.target.id+"?view=main");
			}
			if( lastSelection != null )
				lastSelection.className = "";
			lastSelection =  e.target;
			e.target.className = "selected";
		} else if( e.target.nodeName == "LI" && e.target.getAttribute("branch") == "true" ) {
		    var eleB = e.target.lastElementChild;
		    if( eleB.style.display == "none" ) {
		    	eleB.style.display = "";
		    	e.target.className = "opened";
		    } else {
		    	eleB.style.display = "none";
		    	e.target.className = "closed";
		    }
		}
	}
});

function setSelectedPage(navToId) {	
	var navTo = document.getElementById(navToId);
	if( !navTo ) {
		navToId = decodeURI(navToId);
		navTo = document.getElementById(navToId);
	}
	if( navTo && lastSelection != navTo ) {
		if( lastSelection != null )
			lastSelection.className = "";
		navTo.className = "selected";
		var dad = navTo.parentNode;
		while( dad  ) {
			if( dad.style && dad.style.display == "none" ) {
				dad.style.display = "";
				dad = dad.parentNode;
				dad.className = "opened";
			}
			dad = dad.parentNode;
		}
		lastSelection =  navTo;
		navTo.scrollIntoView();
		//var pos = findPos(navTo);
		//pos -= document.body.clientHeight / 2;
		//if( pos > 0 )
		//	pos = 0;
		//window.scrollTo(0,pos);
	}
}

function tocLoaded() {	
	if(window.location.hash) {
		setSelectedPage( window.location.hash.substr(1) );
	}
}
</script>
</body>
</html>