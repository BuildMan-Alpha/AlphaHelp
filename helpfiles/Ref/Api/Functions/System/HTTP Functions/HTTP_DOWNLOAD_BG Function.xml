<page api="xb">
    <shortlink>api http download bg function</shortlink>
    <topic>HTTP_DOWNLOAD_BG Function</topic>
    <description>Creates a background thread which uses the HTTP protocol to download from source_url and save the data to target_file.</description>
    <prototype>Result as P = http_download_bg(source_url as C, target_file as C)</prototype>
    <arguments>
        <argument>
            <name>source_url</name>
            <type>C</type>
            <description>The location of the file to download.</description>
        </argument>
        <argument>
            <name>target_file</name>
            <type>C</type>
            <description>The name of the file to write locally.</description>
        </argument>
    </arguments>
    <returns>
        <return>
            <name>Result</name>
            <type>P</type>
            <description>A dot variable containing the server's response.</description>
            <properties>
                <property readonly="true">
                    <name>error_text</name>
                    <type>C</type>
                    <description>The error message, if any. If no error occurs, error_text will be empty.</description>
                </property>
                <property readonly="true">
                    <name>error_code</name>
                    <type>N</type>
                    <description>The error number, if any. If no error occurs, error_code will be 0.</description>
                </property>
                <property readonly="true">
                    <name>headers</name>
                    <type>C</type>
                    <description>Response headers. If error_code is 0, the result will contain a dot variable, parsed_headers, with a property representing each response header.</description>
                </property>
                <property readonly="true">
                    <name>body</name>
                    <type>C</type>
                    <description>Response body.</description>
                </property>
                <property readonly="true">
                    <name>parsed_headers</name>
                    <type>P</type>
                    <description>Contains all the headers in the response split out into individual properties. If an error occurred when trying to communicate with the server, parsed_headers will be empty. parsed_headers will always contain the following properties in addition to the headers in the response:</description>
                    <properties>
                        <property readonly="true">
                            <name>http_version</name>
                            <type>C</type>
                            <description>The HTTP version used.</description>
                        </property>
                        <property readonly="true">
                            <name>reason_phrase</name>
                            <type>C</type>
                            <description>A description of the status code.</description>
                        </property>
                        <property readonly="true">
                            <name>status_code</name>
                            <type>N</type>
                            <description>The response status code. See [Status Codes] for a list of status codes.</description>
                        </property>
                    </properties>
                </property>
            </properties>
        </return>
    </returns>
    <discussion>The HTTP_DOWNLOAD_BG() function creates a background thread which uses the HTTP protocol to download from Source_URL and save the data to Target_File.</discussion>
    <sections>
        <section>
            <note>When the server responds with a 30* code, HTTP_DOWNLOAD_BG() does not automatically use the new URL. The developer needs to examine result.parsed_headers.status_code, then if appropriate, try the URL provided in result.parsed_headers.location. Refer to [HTTP_GET()] for an example.</note>
        </section>
        <section>
            <title>Example</title>
            <description>Download the Alphasports Explained PDF from the Learning center and save to a predetermined location.</description>
            <example code="xb"><![CDATA[http_download_bg("http://downloads.alphasoftware.com/Books/AlphaSports.pdf", "c:\alphasports.pdf")]]></example>
        </section>
    </sections>
    <links>
        <link link="HTTP_GET Function">HTTP_GET()</link>
    </links>
    <see>
        <ref link="How to pick an HTTP Function">How to pick an HTTP Function</ref>
        <ref link="status codes">HTTP Status Codes</ref>
    </see>
    <terms>http,arguments,box,button,buttons,center,defaults,display,error,file,function,https,label,location,number,pdf,pointer,save,set,text,users,window</terms>
</page>