<page generated="true" api="xb" build="4142">
	<topic>extension::JSON JSONShred Method</topic>
	<prototype static="true">.JSONShred as c (JSON as C, JSONFieldtemplate  as C [, topName as C])</prototype>
	<arguments>
		<argument>
			<name>JSON</name>
			<type>C</type>
			<description>JSON to 'shred'</description>
		</argument>
		<argument>
			<name>JSONFieldtemplate</name>
			<type>C</type>
			<description>Shape of the JSON we want to 'shred'</description>
		</argument>
		<argument>
			<name>topName</name>
			<type>C</type>
			<description>Optional 'topname' (if ommitted __top) is used. This is the name of the parent array in the result.</description>
		</argument>
	</arguments>
	<description>Takes a complex JSON structure with nested arrays and turns it into a flat list of arrays with no nested arrays. 
	The way in which the JSON should be 'shredded' is described by a template (which can contain definitions for 'key' fields to be added to the child arrays in the result).</description>
	
    <sections> 
        <section>
            <title>Example Shred Parent/Child/Grandchild JSON</title>
            <description>
                In this example, each levels already has all the keys required. Therfore, we we just need to describe the 'shape' of JSON data we want to shred. (The template does not need to define any 'key' fields.)
            </description>
    <example>
<![CDATA[    
dim schema as c 
schema = <<%str%
[
    {
        "orders" : [
            {
                "OrderItems" : [
                  { 
                  }
                ]
            }
        ]
    }
]
%str%

dim JSON as c = <<%str%
[
        {
            "CustomerID": "ALFKI",
            "CompanyName": "Alfreds Futterkistes",
            "orders": [
                {
                    "OrderID": "10643",
                    "CustomerID": "ALFKI",
                    "OrderDate": "08/25/1997 12:00:00 000 am",
                    "orderItems": [
                        {
                            "OrderID": "10643",
                            "ProductID": "28",
                            "Quantity": "15",
                            "UnitPrice": "2"
                        },
                        {
                            "OrderID": "10643",
                            "ProductID": "39",
                            "Quantity": "21",
                            "UnitPrice": "18"
                        }
                    ]
                },
                {
                    "OrderID": "10702",
                    "CustomerID": "ALFKI",
                    "OrderDate": "10/13/1997 12:00:00 000 am",
                    "orderItems": [
                        {
                            "OrderID": "10702",
                            "ProductID": "3",
                            "Quantity": "6",
                            "UnitPrice": "10"
                        },
                        {
                            "OrderID": "10702",
                            "ProductID": "76",
                            "Quantity": "15",
                            "UnitPrice": "18"
                        }
                    ]
                }
            ]
        },
        {
            "CustomerID": "ANATR",
            "CompanyName": "Ana Trujillo Emparedados y helados",
            "orders": [
                {
                    "OrderID": "10308",
                    "CustomerID": "ANATR",
                    "OrderDate": "09/18/1996 12:00:00 000 am",
                    "orderItems": [
                        {
                            "OrderID": "10308",
                            "ProductID": "69",
                            "Quantity": "1",
                            "UnitPrice": "3"
                        },
                        {
                            "OrderID": "10308",
                            "ProductID": "70",
                            "Quantity": "5",
                            "UnitPrice": "12"
                        }
                    ]
                }
            ]
        }
]
%str%

dim out as c = extension::JSON::JSONShred(JSON,schema)	
]]></example>            
        </section>
        <section>
        <description>
           The output produced by the shredding operation is an object where the nested data is collected into arrays under a single top level object (called '__top' in this example because the optional topName parameter was not supplied).
        </description>
    <example>
<![CDATA[
{
    "__top": [
        {
            "CustomerID": "ALFKI",
            "CompanyName": "Alfreds Futterkistes"
        },
        {
            "CustomerID": "ANATR",
            "CompanyName": "Ana Trujillo Emparedados y helados"
        }
    ],
    "orders": [
        {
            "OrderID": "10643",
            "CustomerID": "ALFKI",
            "OrderDate": "08/25/1997 12:00:00 000 am"
        },
        {
            "OrderID": "10702",
            "CustomerID": "ALFKI",
            "OrderDate": "10/13/1997 12:00:00 000 am"
        },
        {
            "OrderID": "10308",
            "CustomerID": "ANATR",
            "OrderDate": "09/18/1996 12:00:00 000 am"
        }
    ],
    "OrderItems": [
        {
            "OrderID": "10643",
            "ProductID": "28",
            "Quantity": "15",
            "UnitPrice": "2"
        },
        {
            "OrderID": "10643",
            "ProductID": "39",
            "Quantity": "21",
            "UnitPrice": "18"
        },
        {
            "OrderID": "10702",
            "ProductID": "3",
            "Quantity": "6",
            "UnitPrice": "10"
        },
        {
            "OrderID": "10702",
            "ProductID": "76",
            "Quantity": "15",
            "UnitPrice": "18"
        },
        {
            "OrderID": "10308",
            "ProductID": "69",
            "Quantity": "1",
            "UnitPrice": "3"
        },
        {
            "OrderID": "10308",
            "ProductID": "70",
            "Quantity": "5",
            "UnitPrice": "12"
        }
    ]
}
]]></example>        
        </section>
    </sections>



</page>
