<page>
    <shortlink>File Upload Amazon S3 Storage or Alpha Anywhere Server</shortlink>
   <topic>File Upload - Amazon S3 Storage or Alpha Anywhere Server</topic>
   <description>Upload one or more files to Amazon S3 or to the Alpha Anywhere server.</description>
   
   <sections>
           <section>
            <description>Used with the UX component.</description>
       </section>
       
       <section>
            <title>Target Server Properties</title>
            <list>
                <item>
                    <name>Upload target</name>
                    <description>Specify the target server to which files should be uploaded. You can upload to Amazon S3, or the Alpha Anywhere server. Choices include *[ui:S3]*, *[ui:AlphaAnywhere]*.</description>
                </item>
                <item>
                    <name>Xbasic function</name>
                    <description>Specify the name of the Xbasic function to call once each file has been uploaded.</description>
                </item>
                <item>
                    <name>Additional info to submit - Javascript</name>
                    <description>Specify the Javascript to execute to collect any information from the client-side that you want to make availalbe to the Xbasic function. Your code should return a string (which could be the stringified version of a Javascript object). The data returned by this function will be available in the Xbasic function in a property called 'e.__additionalInfo'.</description>
                </item>
            </list>
        </section>
        <section>
            <title>File Selection Properties</title>
            <list>
                <item>
                    <name>Method for selecting files</name>
                    <description>Specify if the user can select the file(s) to be uploaded, or if the data for the file to be uploaded will be supplied (in the form of a base64 encoded string  -- that is formatted as a 'data URI' e.g. data:image/jpeg;base64,/sjsakjjs....). Choices include *[ui:User selects file(s)]*, *[ui:Base64Data]*.</description>
                </item>
                <item>
                    <name>Javascript function to get base64 encoded data</name>
                    <description>Specify the name of the Javascript function that will return the base64 encoded data to be uploaded. Returned base64 data is expected to be in data URI format. e.g. data:image/jpeg;base64,/skaakjfhaksdfh......</description>
                </item>
            </list>
        </section>
        <section>
            <title>Amazon S3 File Upload Properties Properties</title>
            <list>
                <item>
                    <name>Method for specifying Amazon S3 credentials and bucket</name>
                    <description>Should the Amazon S3 credentials and bucket be read from a named storage connection string, or do you want to specify explict values for the access key, secret and bucket. Choices include *[ui:Named Storage Connection String]*, *[ui:Explicit]*.</description>
                </item>
                <item>
                    <name>Storage connection string</name>
                    <description>Specify the named storage connection string. IMPORTANT: The storage connection string MUST NOT BE ENCRYPTED. TIP: To define a storage connection string, go to the Tools menu in the Web Projects Control Panel.</description>
                </item>
                <item>
                    <name>Access key</name>
                    <description>Specify the access key.</description>
                </item>
                <item>
                    <name>Secret</name>
                    <description>Specify the secret.</description>
                </item>
                <item>
                    <name>Bucket</name>
                    <description>Specify the bucket.</description>
                </item>
                <item>
                    <name>Authenticated read</name>
                    <description>Specify if authentication is required to read the object once it has been uploaded to S3</description>
                </item>
            </list>
        </section>
        <section>
            <title>Validation Properties</title>
            <list>
                <item>
                    <name>Allow mutiple files</name>
                    <description>Specify if the user can upload multiple files at once, or just a single file.</description>
                </item>
                <item>
                    <name>Maximum file size</name>
                    <description>Specify the maximum size file that the user can select. Set to -1 for no maximum.</description>
                </item>
                <item>
                    <name>Max file size exceeded error message</name>
                    <description>Specify message to show if user selects a file that is too big. You can use language or text dictionary tags. Your message can include these placeholders: [filename], [filesize], [maxfilesize]. Leave blank if you have defined a custom Javascript onValidate event handler.</description>
                </item>
                <item>
                    <name>Max total file size</name>
                    <description>Specify the maximum total size of all selected files. Set to -1 for no maximum.</description>
                </item>
                <item>
                    <name>Max total file size exceeded error message</name>
                    <description>Specify message to show if all files selected exceed the max allowed. You can use language or text dictionary tags. Your message can include these placeholders: [filecount], [totalfilesize] and [maxtotalfilesize]. Leave blank if you have defined a custom Javascript onValidate event handler.</description>
                </item>
                <item>
                    <name>Allowed file types</name>
                    <description>Enter a comma delimited list of allowed file extensions. Leave blank to allow all file extentions.</description>
                </item>
                <item>
                    <name>Invalid file type error message</name>
                    <description>Specify message to show if all files selected exceed the max allowed. You can use language or text dictionary tags. Your message can include these placeholders: [filename], [filetype]. Leave blank if you have defined a custom Javascript onValidate event handler.</description>
                </item>
                <item>
                    <name>Display progress during file upload</name>
                    <description>Specify if progress should be shown while file(s) are being uploaded.</description>
                </item>
                <item>
                    <name>Allow cancel</name>
                    <description>Specify if the user can cancel an upload while the file is being uploaded.</description>
                </item>
                <item>
                    <name>Progress indicator type</name>
                    <description>Specify the progress indicator style. 'Text' - display the percentage as text, 'Bar' - display a progress bar. Choices include *[ui:Text]*, *[ui:Bar]*.</description>
                </item>
                <item>
                    <name>Progress bar color</name>
                    <description>Specify the progress bar color.</description>
                </item>
                <item>
                    <name>Progress bar width</name>
                    <description>Specify the progress bar width. Use CSS units.</description>
                </item>
                <item>
                    <name>Placeholder for progress indicator</name>
                    <description>Specify the name of a Placeholder control where the progress indicator should be shown.</description>
                </item>
            </list>
        </section>
        <section>
            <title>Javascript Properties</title>
            <list>
                <item>
                    <name>Target object name on Amazon S3</name>
                    <description>You can define a function that returns the name of the object in Amazon S3. By default, the filename of the file on the client will be used. Your code can reference e.name, e.size and e.type (the client-side name, size and mime-type of the selected file). Your function must return the name to use. The name can include a folder. For example: return 'myfolder1/' + e.name. This will use the same name as the client-side file but the object will be stored in a folder called 'myfolder1'. NOTE: The target name on Amazon will be available to other Javascript functions in the e.targetName property.</description>
                </item>
                <item>
                    <name>Before file select</name>
                    <description>Fires before the user selects file(s). If the Javascript contains 'return false;', the file upload is aborted.</description>
                </item>
                <item>
                    <name>After file select</name>
                    <description>Fires after file(s) have been selected, but before any files have been uploaded. If your code includes 'return false' the upload is aborted. You code can reference 'e' - an array of objects with information about each file selected. Each item in the array contains these properties: name, size, type.</description>
                </item>
                <item>
                    <name>On Progress</name>
                    <description>Fires when another 'chunk' of the file being uploaded has been sent. This event allows you to write custom progress displays. Your code can reference these variables: e.percent - percentage complete, e.message - message describing the current state of the upload operation, e.name - name of the file being uploaded, e.number - if more than one file was selected, the number of file, e.size - the file size and e.type - the mime-type of the file,  e.targetName - the name to use on Amazon to store the file (usually the same as e.name unless your 'Target name on Amazon S3' function returned a different name or specified a folder)</description>
                </item>
                <item>
                    <name>On Error</name>
                    <description>Fires if there is any type of error. Your Javascript can reference e.errorText,  e.errorCode - the XHR error code and e.fileObject - an object with properties (such as name, size, type) for the file on which the error occured.</description>
                </item>
                <item>
                    <name>On Upload Complete - Individual File</name>
                    <description>Fires after a file upload has been completed. This event will fire for each individual file this is uploaded and the 'On Upload Complete - All Files' event will fire after all files have been uploaded. Your code can reference this variables: e.name - name of the file just uploaded, e.type - mime-type, e.aborted - true if the user cancelled, e.size - file size, e.number - if more than one file was uploaded, the number of the file and and e.targetName - the name to use on Amazon to store the file (usually the same as e.name unless your 'Target name on Amazon S3' function returned a different name or specified a folder).</description>
                </item>
                <item>
                    <name>On Upload Complete - All Files</name>
                    <description>Fires after all selected files have been uploaded. You code can reference e.fileArray - an array of objects containing information about each file that was uploaded. Each item in the array has these properties, name, size, type,aborted, targetName (name used on Amazon - same as name unless you specified a different name).</description>
                </item>
                <item>
                    <name>On Upload Complete</name>
                    <description>Fires after the selected file has been uploaded. Your code can reference this variables: e.name - name of the file just uploaded,e.aborted - did the user abort the upload, e.type - mime-type, e.size - file size, e.targetName - name used on Amazon.</description>
                </item>
                <item>
                    <name>On validate error</name>
                    <description>Fires if any of the selected files violate a validation rule. Your Javascript can refer to e.violationType ( can be 'size', 'totalSize' or 'type'), e.name, e.size and e.type.</description>
                </item>
            </list>
        </section>
       
   </sections>
   
    <see>
   
       <ref link="action javascript for the ux">Action Javascript for the UX</ref>

   </see>
   
   
</page>