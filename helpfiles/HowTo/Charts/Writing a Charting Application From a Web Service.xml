<page>
    <shortlink>How to write a charting application from a Web service</shortlink>
    <topic>How to Write a Charting Application For a Web Service</topic>
    <description>Charts can be created based on data from a Web Service. Using Xbasic callbacks, data from a web service such as Yahoo! Finance can be retrieved and used to populate a data series in a Chart control.</description>
    <discussion>
        <p>When defining the data series for a Chart control in a UX Component, an Xbasic function can be called to populate the data series. The Xbasic function can make an HTTP request to retrieve data from a third-part web service using the [http_get_page2() method]. This data can be used to populate a Chart control with a little bit of work to transform the data into a format the Chart control expects.</p>
        <p>For example, supposed you wanted to display stock information retrieved from Yahoo! Finance to populate a high-low-close chart. In order to populate the chart with stock data from Yahoo!, the data received from the web service needs to be formatted so the Chart control can read the data series:</p>
    </discussion>
    <sections>
        <section>
            <example><![CDATA[dim url as c = "http://ichart.finance.yahoo.com/table.csv?a="+month+"&b="+dayNumber+"&c="+year+"&s="+ticker 
dim data as c = http_get_page2(url)
Â 
'data returned by yahoo is chr(10) delimited, not crlf delimited!
'data is returned with newest data on top. we want oldest data on top, so sort the data.
data = word(data,2,chr(10),999999)
data = strtran(data,",","|")
data = sortsubstr(data,chr(10),"A") ]]></example>
        </section>
        <section>
            <description>With the data in the correct format, the Chart control can render the stock information:</description>
            <figure><link>images/gm_stock_chart.png</link></figure>
        </section>
        <section>
            <description>
                <p>For detailed information about how the stock chart was created and populated dynamically with data from Yahoo! Finance, watch the videos below:</p>
            </description>
            <videos>
                <video>
                    <name>Calling a Simple Web Service to Get Chart Data - Stock Price Example Part 1</name>
                    <link>http://www.viddler.com/v/9cc56719</link>
                </video>
                <video>
                    <name>Calling a Simple Web Service to Get Chart Data - Stock Price Example Part 2</name>
                    <link>http://www.viddler.com/v/cc1c9281</link>
                </video>
            </videos>
        </section>
        <section>
            <description>[Click here to download the component] used in the videos above.</description>
        </section>
    </sections>
    <links>
        <link href="http://www.ajaxvideotutorials.com/V11Videos/StockPrice.a5wcmp">Click here to download the component</link>
        <link link="http_get_page2 function">http_get_page2() method</link>
    </links>
</page>