	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			
<p class=A3Topic>Uploading Files to the Web Application Server</p>




<p>To upload a file, your &ltform> tag must use the POST method and set the enctype to multipart/form-data as follows:</p>



<p class=Code><span class=HTML1>&ltform method="POST" action="upload.a5w" enctype="multipart/form-data" ></span></p>



<p>This enables the user's browser to correctly encode the data in your file so it can be sent across the Internet.</p>



<p>Next you need a form field to specify the file to be uploaded.  This is done with a File input type, as in:</p>



<p class=Code><span class=HTML1>&ltinput type="file" name="FileToUpload" value=""></span></p>


<p>This creates what appears to be a textbox with a Browse button directly next to it.</p>



<p>When the form is then submitted, the browser will encode the specified file and upload it as part of the HTTP request being sent to the server.  The server decodes the file and then makes an object available to your A5W environment.  In the example here, that object will be named <b>FileToUpload</b> because that was the name that was specified in the file input field.</p>



<p><b>FileToUpload</b> will have two properties - filename and data.</p>



<p><b>FileToUpload.filename</b> is a character string and it contains the name of the file as it had existed on the user's system.  This will be just the bare filename with no path information.</p>



<p><b>FileToUpload.data</b> contains the contents of the uploaded file.  The type of <b>FileToUpload.data</b> is blob, even if the file that has been uploaded is plain ASCII.</p>



<p>To enforce a restriction on what is uploaded, you must first allow the user to upload the file, then you can use Xbasic to see if it meets your criteria.  This is a limitation of HTML and not of the Application server.  For example, to enforce a maximum file upload size, you would look at FileToUpload.data.size().</p>



<p>If the file meets your criteria, you can then save <b>FileToUpload.data</b> to a file, put it into a field in your table, etc.  If it does not meet your criteria, simply don't do anything with the uploaded data and it will be deleted from memory when the page finishes loading. Tip: To save the data in blob variable to a file, use File.From_blob()</p>



<br><br>

<p>The following example shows how to implement file uploading to the <span
 class=Screen>Web Application Server</span>. Place this code into a page named
 <font style="font-family: Verdana;"
		face=Verdana>"fileupload.a5w". The uploaded file will
 be placed in the document root&nbsp;as&nbsp;defined on the <a href="../References/Web/Web Publishing/Putting Your Website On-Line/Configuring and Running the Server.html#General_Tab" title="Configuring and Running the Server" class="wiki">&lt;span  class=Screen&gt;General&lt;/span&gt; tab of the &lt;span class=Screen&gt;Web Application  Server Control Panel&lt;/span&gt;</a>. </font></p>




<table class="htmlTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code><span class=HTML1>&lthtml></span></p>


<p class=Code>&lt%a5</p>


<p class=Code>dim msg&nbsp;as&nbsp;c = ""</p>


<p class=Code>if eval_valid("cmd")</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;file.from_blob(ServerSetting.Document_Root
 + "\\" + FileToUpload.filename, FileToUpload.data)</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;msg
 = "&lta href=\"/" + FileToUpload.filename + "\"
 target=\"_blank\">" + FileToUpload.filename + "&lt/a>
 was uploaded&ltbr />&ltbr />"</p>


<p class=Code>end if</p>


<p class=Code>%></p>


<p class=Code><span class=HTML1>&lthead></span></p>


<p class=Code><span class=HTML1>&lttitle>File Upload example&lt/title></span></p>


<p class=Code><span class=HTML1>&lt/head></span></p>


<p class=Code><span class=HTML1>&ltbody bgcolor="#ffffff"></span></p>


<p class=Code>&lt%a5 ? msg %></p>


<p class=Code><span class=HTML1>&ltform action="</span> &lt%a5 ?
 request.script_name %> <span class=HTML1>" method="POST"
 enctype="multipart/form-data"></span></p>


<p class=Code><span class=HTML1>&ltinput type="file" name="FileToUpload"
 value="">&ltbr /></span></p>


<p class=Code><span class=HTML1>&ltinput type="submit" name="cmd"
 value="Upload File"></span></p>


<p class=Code><span class=HTML1>&lt/form></span></p>


<p class=Code><span class=HTML1>&lt/body></span></p>


<p class=Code><span class=HTML1>&lt/html></span></td></tr>
</table>







<p class=A5>See Also</p>



<p><a href="../References/Web/A5W Page HTML FORM Syntax.html" title="A5W Page HTML FORM Syntax" class="wiki">A5W Page HTML FORM Syntax</a></p>




<p class=A5>Limitations</p>



<p>Web publishing applications only.</p>
	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Uploading+Files+to+the+Web+Application+Server">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA: {"group":"/Guides"} --->
</body></html>