	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			

<p class=A3Topic>Using a Session Variable in a Component</p>



<p>A session variable will not evaluate directly in a component. However, 
 you can add code on a A5W page that uses the component to use a session 
 variable. If you look at the <span class=Screen>Xbasic</span> tab when 
 editing the page in the <span class=Screen>Web Component Builder</span>, 
 you will see a line like this if you have set a filter in the component.</p>




<table class="htmlTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>tmpl.DBF.filter = "Customer_Id=\"\""</td></tr>
</table>

<p>In this case, the filter was to find all records with a blank <span 
 class=Code1>customer_id</span> using the Alpha Sports <span class=Code1>Invoice_header</span> 
 table.</p>



<p>Now build a page and insert the component. Assuming the component is 
 named <span class=Code1>TestInvoice</span>, you will see this.</p>




<table class="htmlTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>'============== compute the HTML for the Component==========</p>


<p class=Code>delete x_TestInvoice</p>


<p class=Code>dim x_TestInvoice&nbsp;as&nbsp;P</p>


<p class=Code>tmpl_TestInvoice.request = request</p>


<p class=Code>tmpl_TestInvoice.session = session</p>


<p class=Code>tmpl_TestInvoice.response = response</p>


<p class=Code>tmpl_TestInvoice.serversetting = serversetting</p>


<p class=Code>' ... more code</td></tr>
</table>

<p>Add this after that section to override the filter set in the component.</p>




<table class="htmlTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>'============== Add Filter =================================</p>


<p class=Code>session.user_id = "00000005"</p>


<p class=Code>tmpl.DBF.filter = "Customer_Id=\"\"" 
 ' optional to set filter to a default</p>


<p class=Code>if eval_valid("session.user_id") ' session.user_id 
 exists</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;if (session.user_id <> "") 
 ' value exists</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmpl.DBF.filter 
 = "Customer_Id=\""+session.user_id+"\""</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;end if</p>


<p class=Code>end if</td></tr>
</table>

<p>When evaluated in the <span class=Screen>Interactive Window</span>, 
 the above code would be:</p>




<table class="htmlTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>session.user_id = "00000005"</p>


<p class=Code>tmpl.DBF.filter = "Customer_Id=\""+session.user_id+"\""</p>


<p class=Code>? tmpl.dbf.filter</p>


<p class=Code>= Customer_Id="00000005"</td></tr>
</table>

<p>In this example, the page code set the session variable, but it may 
 have been set elsewhere. That is the reason to test for both the existence 
 of the variable and test if it has a value.</p>



<p class=A5>See Also</p>



<p><a href="Sessions.html#Session_Variables" title="Sessions" class="wiki">Session Variables</a></p>



<p class=A5>Thanks To</p>



<p>Jerry Brightbill</p>



<p class=A5>Limitations</p>



<p>Web publishing applications only.</p>
	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Using+a+Session+Variable+in+a+Component">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA: {"group":"/Guide/Server/Design/Sessions","status":"pending","tags":"web","keywords":"server,guide,xbasic,component"} --->
</body></html>