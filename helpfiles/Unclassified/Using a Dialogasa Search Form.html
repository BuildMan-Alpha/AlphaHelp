	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			<p class=A3Topic>Using a Dialog&nbsp;as&nbsp;a Search Form</p>



<p>Assume you have a grid that shows all the records of a table, such&nbsp;as&nbsp; 
 the following. </p>



<p class=Pix><img src="images/WPT_Dialog_as_Search_Form_1.gif"
          x-maintain-ratio=TRUE
          style="width: 471px;
              height: 380px;
              margin-left: 3px;
              margin-right: 3px;
              margin-top: 3px;
              margin-bottom: 3px;
              border-left-style: None;
              border-right-style: None;
              border-top-style: None;
              border-bottom-style: None;
              float: none;
              border-style: none;
              border-style: none;"
          width=471
          height=380
          border=0></p>



<p>If you wanted to search for all of the customers in a specified city 
 and state, you could add a search part to the grid. The following search 
 part has two drop down list boxes that display the unique field values 
 from the state and city fields. </p>



<p class=Pix><img src="images/WPT_Dialog_as_Search_Form_2.gif"
          x-maintain-ratio=TRUE
          style="border: none;
              width: 335px;
              height: 429px;
              float: none;
              border-style: none;
              border-style: none;"
          width=335
          height=429
          border=0></p>



<p>Unfortunately, there is no way for the search part to display only valid 
 city entries for the specified state. A solution is to use a dialog component 
 on a different page&nbsp;as&nbsp;a search form. </p>



<p class=Pix><img src="images/WPT_Dialog_as_Search_Form_3.gif"
          x-maintain-ratio=TRUE
          style="border: none;
              width: 370px;
              height: 330px;
              float: none;
              border-style: none;
              border-style: none;"
          width=370
          height=330
          border=0></p>



<p class=A5>Putting it Together</p>



<ol>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Add an advanced button 
 to the page containing the grid. This button will <a href="Opening a Page with an Advanced Button.html" title="Opening a Page with an Advanced Button" class="wiki">open   the page</a> that contains the dialog search form. </p>

</li>
</ol>

<p class=Pix><img src="images/WPT_Dialog_as_Search_Form_4.gif"
          x-maintain-ratio=TRUE
          style="border: none;
              width: 325px;
              height: 208px;
              float: none;
              border-style: none;
              border-style: none;"
          width=325
          height=208
          border=0></p>



<ol start=2
  style="list-style: decimal;"
  type=1>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>The page that contains 
 the dialog search form is named <span class=Code1>customer_filter.a5w</span>. 
 The form is named <span class=Code1>filt</span>. The modifications to 
 the form and button code is&nbsp;as&nbsp;follows.</p>

</li>
</ol>


<table class="htmlTable" style="x-cell-content-align: top;
        border-left-style: None;
        border-right-style: None;
        border-top-style: None;
        border-bottom-style: None;
        width: 100%;
        border-spacing: 0px;
        border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
      width: 100%;
      padding-right: 10px;
      padding-left: 10px;" valign="top" width="100%">
<p class=Code><span class=HTML1>&ltform method=post</span> <span class=Code1>name="filt"</span> 
 <span class=HTML1>&nbsp;</span><span class=Code1>action="customer_filter.a5w"</span> 
 <span class=HTML1>>&ltbutton id=button_adv1 name=button_adv1</span> 
 <span class=Code1>on<x>click="document.forms<a class="wiki"  href="'filt'" rel="">'filt'</a>.submit()"</span> 
 <span class=HTML1>>&ltstrong>&ltfont</span></p>


<p class=Code><span class=HTML1>face=Verdana color=#008000>Search&lt/font>&lt/strong>&lt/button>&lt/form></span></td></tr>
</table>

<ol start=3
  style="list-style: decimal;"
  type=1>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>The dialog component 
 that is placed on <span class=Code1>customer_filter.a5w</span> has two 
 drop down list boxes. The <span class=Code1>state</span> control is based 
 on the <span class=Code1>bill_state_region</span> field of the <span class=Code1>customer</span> 
 table. Its properties are&nbsp;as&nbsp;follows:</p>

</li>
</ol>


<div align=center>
<table style="x-cell-content-align: top;
        border-left-style: none;
        border-right-style: none;
        border-top-style: none;
        border-bottom-style: none;
        float: aligncenter;
        border-spacing: 0px;
        border-spacing: 0px;" cellspacing="0">
<col>
<col>

<tr style="x-cell-content-align: top;" valign="top">
<td class="tableHeader" style="x-cell-content-align: top;" valign="top">
<p class=TableHead>Property</td>
<td class="tableHeader" style="x-cell-content-align: top;" valign="top">
<p class=TableHead>Value</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Control Settings > Control Type</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DropDownBox</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Define Choices > List Type</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Dynamic</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DropDownBox Properties > Choices > Data Source 
 > Data source type</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DBF-Table</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DropDownBox Properties > Choices > Data Source 
 > Table name</td>
<td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>customer</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DropDownBox Properties > Choices > Data Source 
 > Display value field</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>bill_state_region</td></tr>
</table>
</div>
<ol start=4
  style="list-style: decimal;"
  type=1>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>The <span class=Code1>city</span> 
 control is based on the <span class=Code1>bill_city</span> field of the 
 <span class=Code1>customer</span> table. Its properties are&nbsp;as&nbsp;follows:</p>

</li>
</ol>


<div align=center>
<table style="x-cell-content-align: top;
        border-left-style: none;
        border-right-style: none;
        border-top-style: none;
        border-bottom-style: none;
        float: aligncenter;
        border-spacing: 0px;
        border-spacing: 0px;" cellspacing="0">
<col>
<col>

<tr style="x-cell-content-align: top;" valign="top">
<td class="tableHeader" style="x-cell-content-align: top;" valign="top">
<p class=TableHead>Property</td>
<td class="tableHeader" style="x-cell-content-align: top;" valign="top">
<p class=TableHead>Value</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Control Settings > Control Type</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DropDownBox</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Define Choices > List Type</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Dynamic</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DropDownBox Properties > Choices > Data Source 
 > Data source type</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DBF-Table</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DropDownBox Properties > Choices > Data Source 
 > Table name</td>
<td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>customer</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DropDownBox Properties > Choices > Data Source 
 > Display value field</td>
<td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>bill_city</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>DropDownBox Properties > Choices > Data Source 
 > Filter</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>bill_state_region&nbsp;=&nbsp;?</td></tr>
</table>
</div>
<ol start=5
  style="list-style: decimal;"
  type=1>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Define the parameter 
 mapping for <span class=Code1>bill_state_region</span> on the <span class=Screen>Parameter 
 Mapping</span> tab of the <span class=Screen>Filter Expression</span> 
 dialog:</p>

</li>
</ol>


<div align=center>
<table style="x-cell-content-align: top;
        border-left-style: none;
        border-right-style: none;
        border-top-style: none;
        border-bottom-style: none;
        float: aligncenter;
        border-spacing: 0px;
        border-spacing: 0px;" cellspacing="0">
<col>
<col>

<tr style="x-cell-content-align: top;" valign="top">
<td class="tableHeader" style="x-cell-content-align: top;" valign="top">
<p class=TableHead>Property</td>
<td class="tableHeader" style="x-cell-content-align: top;" valign="top">
<p class=TableHead>Value</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Parameter maps to a</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Variable</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Variable name</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>State</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>Parameter type</td>
<td class="TableCell" style="x-cell-content-align: top;" valign="top">
<p class=TableLeft>character</td></tr>
</table>
</div>
<ol start=6
  style="list-style: decimal;"
  type=1>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Select the <span 
 class=Screen>Form > Properties</span> page of the menus.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>In the <span class=Button>Server 
 Events > AfterValidate</span> field click <img src="images/Web_Properties_button.gif"
                          x-maintain-ratio=TRUE
                          style="border: none;
                              float: none;
                              width: 17px;
                              height: 18px;
                              border-style: none;
                              border-style: none;"
                          width=17
                          height=18
                          border=0> to display 
 the <span class=Screen>Form Events</span> dialog. Enter the following 
 code and click <span class=Button>OK</span>. In this case the name of 
 the grid component on the <span class=Code1>customers.a5w</span> page 
 is <span class=Code1>cust</span>.</p>

</li>
</ol>

<p class=Note><span class=Note><img src="images/icon_warning.gif"
                  x-maintain-ratio=TRUE
                  style="border: none;
                      width: 37px;
                      height: 33px;
                      float: none;
                      border-style: none;
                      border-style: none;"
                  width=37
                  height=33
                  border=0>Note</span> : The expression 
 placed into the <span class=Code1>filter</span> variable has to be a valid 
 expression for the database you are using.</p>



<p>Code for an Alpha Five table.</p>




<table class="codeTable" style="x-cell-content-align: top;
        border-left-style: None;
        border-right-style: None;
        border-top-style: None;
        border-bottom-style: None;
        width: 100%;
        border-spacing: 0px;
        border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
      width: 100%;
      padding-right: 10px;
      padding-left: 10px;" valign="top" width="100%">
<p class=Code>dim filter&nbsp;as&nbsp;C</p>


<p class=Code>filter = "bill_state_region = " + quote(state) 
 + " .and. bill_city = " + quote(city)</p>


<p class=Code>filter = urlencode(filter)</p>


<p class=Code>currentform.redirecttarget = "customers.a5w?cust_filter=" 
 + filter</td></tr>
</table>

<p>Equivalent code for a SQL database.</p>




<table class="codeTable" style="x-cell-content-align: top;
        border-left-style: None;
        border-right-style: None;
        border-top-style: None;
        border-bottom-style: None;
        width: 100%;
        border-spacing: 0px;
        border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
      width: 100%;
      padding-right: 10px;
      padding-left: 10px;" valign="top" width="100%">
<p class=Code>dim filter&nbsp;as&nbsp;C</p>


<p class=Code>filter = "customer.bill_state_region = '" + state 
 + "' and customer.bill_city = '" + city + "'"</p>


<p class=Code>filter = urlencode(filter)</p>


<p class=Code>currentform.redirecttarget = "customers.a5w?cust_filter=" 
 + filter</td></tr>
</table>

<ol start=8
  style="list-style: decimal;"
  type=1>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Finally, you need 
 a second button to clear any search filter that you have imposed on the 
 customers.a5w page. Create a second advanced button (as described in steps 
 1 and 2), name it <span class=Code1>clear</span>, and modify its <span 
 class=HTML1>&ltform></span> and <span class=HTML1>&ltbutton></span> 
 code&nbsp;as&nbsp;follows. The filter expression indicates that all records 
 are to be displayed.</p>

</li>
</ol>


<table class="htmlTable" style="x-cell-content-align: top;
        border-left-style: None;
        border-right-style: None;
        border-top-style: None;
        border-bottom-style: None;
        width: 100%;
        border-spacing: 0px;
        border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
      width: 100%;
      padding-right: 10px;
      padding-left: 10px;" valign="top" width="100%">
<p class=Code><span class=HTML1>&ltform method=post</span> name="clear" 
 action="customers.a5w?cust_filter=.t." <span class=HTML1>>&ltbutton 
 id=button_adv1</span> on<x>click="document.forms<a class="wiki"  href="'clear'" rel="">'clear'</a>.submit()" 
 <span class=HTML1>name=button_adv1>&ltstrong>&ltfont face=Verdana 
 color=#008000>Clear</span></p>


<p class=Code><span class=HTML1>Search&lt/font>&lt/strong>&lt/button>&lt/form></span></td></tr>
</table>

<p class=A5>Running the Pages</p>



<ol>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>The initial view 
 of the <span class=Code1>customers.a5w</span> page is&nbsp;as&nbsp;follows. 
 </p>

</li>
</ol>

<p class=Pix><img src="images/WPT_Dialog_as_Search_Form_5.gif"
          x-maintain-ratio=TRUE
          style="border: none;
              width: 457px;
              height: 410px;
              float: none;
              border-style: none;
              border-style: none;"
          width=457
          height=410
          border=0></p>



<ol start=2
  style="list-style: decimal;"
  type=1>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>After clicking <span 
 class=Button>Search</span> and entering values into the search form, you 
 see the following. </p>

</li>
</ol>

<p class=Pix><img src="images/WPT_Dialog_as_Search_Form_6.gif"
          x-maintain-ratio=TRUE
          style="border: none;
              width: 369px;
              height: 115px;
              float: none;
              border-style: none;
              border-style: none;"
          width=369
          height=115
          border=0></p>



<ol start=3
  style="list-style: decimal;"
  type=1>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>After clicking <span 
 class=Button>Submit</span>, the filtered <span class=Code1>customers.a5w</span> 
 page reappears. </p>

</li>
</ol>

<p class=Pix><img src="images/WPT_Dialog_as_Search_Form_7.gif"
          x-maintain-ratio=TRUE
          style="border: none;
              width: 397px;
              height: 233px;
              float: none;
              border-style: none;
              border-style: none;"
          width=397
          height=233
          border=0></p>



<p class=A5>See Also</p>



<p><a href="../Orphans/Contents - Web Publishing Tutorial.html" title="Contents - Web Publishing Tutorial" class="wiki">Contents</a>, <a href="../Orphans/Filtering a Grid with a Dialog.html" title="Filtering a Grid with a Dialog" class="wiki">Calling   a Filtered Grid Component</a>, <a href="Opening a Page with an Advanced Button.html" title="Opening a Page with an Advanced Button" class="wiki">Opening   a Page with an Advanced Button</a></p>


	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Using+a+Dialogasa+Search+Form">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA: {"group":"/Guides","status":"pending","keywords":"server,guide,form,grid,component,sql","tags":"web,review","notes":"Dialogasa in tree title = Dialog as a "} --->
</body></html>