	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			

<p class=A3Method>INET::SSLSocket Object</p>



<p>The INET::SSLSocket object is a version of <a href="INET Socket Object.html" title="INET Socket Object" class="wiki">INET::Socket</a> 
 that supports reading and writing data between client and server computers. 
 The following code provides an overview of how socket communications are 
 designed.</p>




<table style="x-cell-content-align: Top;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0">
<col style="width: 50%;">
<col style="width: 50%;">

<tr style="x-cell-content-align: top;" valign="top">
<td colspan="1" rowspan="1" class="tableHeader" style="width: 50%; x-cell-content-align: top;" valign="top" width="50%">
<p class=TableHead>Client Computer</td>
<td colspan="1" rowspan="1" class="tableHeader" style="width: 50%; x-cell-content-align: top;" valign="top" width="50%">
<p class=TableHead>Host Computer</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" rowspan="1" colspan="1" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">
<p>&nbsp;</td>
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">

<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;">
<col>

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			padding-right: 10px;
			padding-left: 10px;" valign="top">
<p class=Code>dim ServerSocket as INET::Socket</p>


<p class=Code>dim ClientSocket as INET::Socket</p>


<p class=Code>dim CTX as INET::SSLContext</td></tr>
</table>
<p class=TableLeft>&nbsp;</p>


<p class=TableLeft>Define CTX properties</p>


<p class=TableLeft>&nbsp;</p>



<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;">
<col>

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			padding-right: 10px;
			padding-left: 10px;" valign="top">
<p class=Code>ServerSocket.Listen()</p>


<p class=Code>ServerSocket.Accept(ClientSocket)</td></tr>
</table></td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">

<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>dim LocalSocket as INET::Socket</p>


<p class=Code>&nbsp;</p>


<p class=Code>LocalSocket.Connect()</p>


<p class=Code>LocalSocket.Write()</td></tr>
</table></td>
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">
<p class=TableLeft>&nbsp;</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">
<p class=TableLeft>&nbsp;</td>
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">

<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>ClientSocket.Read()</p>


<p class=Code>ClientSocket.Write()</td></tr>
</table></td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">

<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>LocalSocket.Read()</td></tr>
</table></td>
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">
<p class=TableLeft>&nbsp;</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" rowspan="1" colspan="2" style="width: 100%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="100%">
<p class=TableCenter>There may be more exchanges of data.</td>
<td_null></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">

<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>LocalSocket.Close()</td></tr>
</table></td>
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">
<p class=TableLeft>&nbsp;</td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">
<p class=TableLeft>&nbsp;</td>
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">

<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>ClientSocket.Close()</td></tr>
</table></td></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" rowspan="1" colspan="2" style="width: 100%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="100%">
<p class=TableCenter>More sessions with other client computers.</td>
<td_null></tr>

<tr style="x-cell-content-align: top;" valign="top">
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">
<p class=TableLeft>&nbsp;</td>
<td class="TableCell" style="width: 50%;
			x-cell-content-align: top;
			margin-top: 0;" valign="top" width="50%">

<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>ServerSocket.Close()</td></tr>
</table></td></tr>
</table>

<p>This example code shows how to use the methods of the INET::SSLSocket 
 object.</p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>dim ssl as inet::sslsocket</p>


<p class=Code>dim Result as C</p>


<p class=Code>dim Temp as C</p>


<p class=Code>ssl.context.requirevalidcertificate = .f.</p>


<p class=Code>if ssl.connect("toshiba1000", 443, 2000) then</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;if 
 ssl.write("GET / HTTP/1.0" + crlf() + crlf()) then</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FoundData 
 = ssl.read(temp, 10000, -1)</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while 
 FoundData</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on 
 error resume next</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Result 
 = Result + Temp</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FoundData 
 = .f.</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
 ssl.isopen then</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FoundData 
 = ssl.read(temp, 10000, -1)</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end 
 if</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end 
 while</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a5_show_variable(Result, 
 "Test OpenSSL HTTP Client - Response")</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;else</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ui_msg_box("Request 
 Error", ssl.callresult.text)</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;end 
 if</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;ssl.close()</p>


<p class=Code>else</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;ui_msg_box("Connect 
 Error", ssl.callresult.text)</p>


<p class=Code>end if</td></tr>
</table>

<p>This code illustrates a simple SSL HTTP Server.</p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>dim ResponseHeader as C</p>


<p class=Code>dim ResponseFooter as C</p>


<p class=Code>dim ctx as INET::SSLContext</p>


<p class=Code>dim ssl as inet::sslsocket</p>


<p class=Code>dim doc as inet::httpdocument</p>


<p class=Code>dim Request as C</p>


<p class=Code>dim Temp as C</p>


<p class=Code>ResponseHeader = <<%str%</p>


<p class=Code>HTTP/1.1 200 OK</p>


<p class=Code>Server: SampleAlphaFiveSSL</p>


<p class=Code>Content-Type: text/html</p>


<p class=Code><HTML></p>


<p class=Code><BODY></p>


<p class=Code><H1>Request</H1></p>


<p class=Code>%str%</p>


<p class=Code>ResponseFooter = <<%str%</p>


<p class=Code
<!---HELPMETADATA: {"tags":"common","group":"/References/Namespace/INET"} --->
</body></html>