	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	 




<article id="top" class="wikitext nopagetitle">
			
		
		
		
		
			 

	
			<h1 class="showhide_heading" id="Portable_SQL_Functions_for_Geographies">Portable SQL Functions for Geographies</h1>
	
	<h3> Table of Contents </h3>
	<div class="helpserver_toc">
<ul>
	<li>
		<a href="#GeogAsBinary">GeogAsBinary</a>
	</li>
	<li>
		<a href="#GeogAsText">GeogAsText</a>
	</li>
	<li>
		<a href="#GeogCreateFromBinary">GeogCreateFromBinary</a>
	</li>
	<li>
		<a href="#GeogCreateFromText" >GeogCreateFromText</a>
	</li>
	<li>
		<a href="#GeogCreateLine" >GeogCreateLine</a>
	</li>
	<li>
		<a href="#GeogCreateLocation" >GeogCreateLocation</a>
	</li>
	<li>
		<a href="#GeogCreatePolygon" >GeogCreatePolygon</a>
	</li>
	<li>
		<a href="#GeogDistanceBetween" >GeogDistanceBetween</a>
	</li>
	<li>
		<a href="#GeogLatitude" >GeogLatitude</a>
	</li>
	<li>
		<a href="#GeogLocationIntersectsLine" >GeogLocationIntersectsLine</a>
	</li>
	<li>
		<a href="#GeogLocationIsWithinPolygon">GeogLocationIsWithinPolygon</a>
	</li>
	<li>
		<a href="#GeogLocationIsWithinRadius">GeogLocationIsWithinRadius</a>
	</li>
	<li>
		<a href="#GeogLongitude">GeogLongitude</a>
	</li>
	<li>
		<a href="#GeogSRID">GeogSRID</a>
	</li>
	<li>
		<a href="#GeogType">GeogType</a>
	</li>
	<li>
		<a href="#Important Note" >Important Note</a>
	</li>
</ul>
</div>
	
	
	
	
	
	<p class="showhide_heading">&nbsp;</p>
	<p class="showhide_heading">&nbsp;</p>
	<p class="showhide_heading">&nbsp;</p>
	<p class="showhide_heading">&nbsp;</p>
	<p class="showhide_heading">&nbsp;</p>
These functions are only available from Alpha Anywhere when Portable SQL is used. They are intended to insulate you from the differences between the native SQL geography implementations in the supported databases.<br />
<br />
All of the examples assume that you will be substituting the correct SpatialReferenceID value for the database currently in use for the argument :SRID.<br />
<h2 class="showhide_heading" id="GeogAsBinary">GeogAsBinary</h2>
<a name=""></a><strong>GeogAsBinary </strong>as C(<span style="color:#090; background:">Object </span>as Geography)<br />
Return the object description in the Well Known Binary (WKB) format.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="overflow:auto;" id="codebox" >SELECT GeogAsText(g.Location) FROM GeogTest g</pre></div><br />
<h2 class="showhide_heading" id="GeogAsText">GeogAsText</h2>
<a name="GeogAsText"></a><strong>GeogAsText </strong>as C(<span style="color:#090; background:">Object </span>as Geography)<br />
Return the object description in the Well Known Text (WKT) format.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="white-space:pre-wrap; white-space:-moz-pre-wrap !important; white-space:-pre-wrap; white-space:-o-pre-wrap; word-wrap:break-word;" id="codebox1" >SELECT FIRST 1 GeogAsText(GeogCreatePolygon((70( 42( (70( 32( (60( 32( (60( 42( (70( 42( :SRID)) FROM GeogTest g
&nbsp;
SELECT FIRST 1 GeogAsText(GeogCreatePolygon((70( 42( (70( 32( (60( 32( (60( 42( (70( 42)) FROM GeogTest g</pre></div><br />
<h2 class="showhide_heading" id="GeogCreateFromBinary">GeogCreateFromBinary</h2>
<a name="GeogCreateFromBinary"></a><strong>GeogCreateFromBinary </strong>as Geography(<span style="color:#090; background:">Binary </span>as B [, <span style="color:#090; background:">SpatialReferenceID </span>as N])<br />
Create a geography object from Well Known Binary (WKB) format.<br />
<br />
<div class="plugincode" parse="vbnet"><pre class="codelisting" data-syntax="vbnet" dir="ltr" style="overflow:auto;" id="codebox2" >dim MyBlob as B = base64decode(&#34;AQEAAAAAAAAAAAAkwAAAAAAAAChA&#34;)
args.add(&#34;WKB&#34;, MyBlob)
&nbsp;
Connection.Execute(&#34;select GeogAsText(GeogCreateFromBinary(:WKB))&#34; + \
&#34; from GeogTest g&#34;)</pre></div><br />
<h2 class="showhide_heading" id="GeogCreateFromText">GeogCreateFromText</h2>
<a name="GeogCreateFromText"></a><strong>GeogCreateFromText </strong>as Geography(<span style="color:#090; background:">Text </span>as C [, <span style="color:#090; background:">SpatialReferenceID</span> as N])<br />
Create a geography object from Well Known Text (WKT) format.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="overflow:auto;" id="codebox3" >SELECT FIRST 1 GeogAsText(GeogCreateFromText(&#39;POINT(-10 27)&#39;)) 
    FROM GeogTest g</pre></div><br />
<h2 class="showhide_heading" id="GeogCreateLine">GeogCreateLine</h2>
<a name="GeogCreateLine"></a><strong>GeogCreateLine</strong> as Geography (<span style="color:#090; background:">Longitude </span>as N, <span style="color:#090; background:">Latitude </span>as N ... [,<span style="color:#090; background:">SpatialReferenceID </span>as N])<br />
Constructs a geographic line from two or more longitude/latitude pairs.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="white-space:pre-wrap; white-space:-moz-pre-wrap !important; white-space:-pre-wrap; white-space:-o-pre-wrap; word-wrap:break-word;" id="codebox4" >SELECT FIRST 1 GeogAsText(GeogCreateLine(1(2(3(4(5(6( :SRID)) FROM GeogTest g
&nbsp;
SELECT FIRST 1 GeogAsText(GeogCreateLine(1(2(3(4(5(6)) FROM GeogTest g</pre></div><br />
<h2 class="showhide_heading" id="GeogCreateLocation">GeogCreateLocation</h2>
<a name="GeogCreateLocation"></a><strong>GeogCreateLocation </strong>as Geography (<span style="color:#090; background:">Longitude </span>as N, <span style="color:#090; background:">Latitude </span>as N [,<span style="color:#090; background:">SpatialReferenceID </span>as N])<br />
Constructs a geographic location from a longitude/latitude pair.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="white-space:pre-wrap; white-space:-moz-pre-wrap !important; white-space:-pre-wrap; white-space:-o-pre-wrap; word-wrap:break-word;" id="codebox5" >SELECT FIRST 1 GeogAsText(GeogCreateLocation(1(2( :SRID)) FROM GeogTest g
&nbsp;
SELECT FIRST 1 GeogAsText(GeogCreateLocation(1(2)) FROM GeogTest g
&nbsp;
SELECT FIRST 1 GeogDistanceBetween(GeogCreateLocation(1( 42( :SRID)( GeogCreateLocation(10( 20( :SRID)) FROM GeogTest g</pre></div><br />
<h2 class="showhide_heading" id="GeogCreatePolygon">GeogCreatePolygon</h2>
<a name="GeogCreatePolygon"></a><strong>GeogCreatePolygon </strong>as Geography (<span style="color:#090; background:">Longitude </span>as N, <span style="color:#090; background:">Latitude</span> as N ... [,<span style="color:#090; background:">SpatialReferenceID</span> as N])<br />
Constructs a geographic polygon from three or more longitude/latitude pairs.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="white-space:pre-wrap; white-space:-moz-pre-wrap !important; white-space:-pre-wrap; white-space:-o-pre-wrap; word-wrap:break-word;" id="codebox6" >SELECT FIRST 1 GeogAsText(GeogCreatePolygon((70( 42( (70( 32( (60( 32( (60( 42( (70( 42( :SRID)) 
FROM GeogTest g
&nbsp;
SELECT FIRST 1 GeogAsText(GeogCreatePolygon((70( 42( (70( 32( (60( 32( (60( 42( (70( 42)) 
FROM GeogTest g</pre></div><br />
<div class="rbox note"><img src="images/close.png" alt="Close" width="16" height="16" class="rbox-close" onclick="$(this).parent().fadeOut();" title="Close" /><div class="rbox-title"><img src="images/information.png" alt="note" width="16" height="16" title="note" class="icon" /><span>Note</span></div><div class="rbox-data">The first and last point of the polygon must be the same, and the points must be arranged in counter-clockwise order.</div></div><br />
<h2 class="showhide_heading" id="GeogDistanceBetween">GeogDistanceBetween</h2>
<a name="GeogDistanceBetween"></a><strong>GeogDistanceBetween</strong> as N (<span style="color:#090; background:">Object</span> as Geography, <span style="color:#090; background:">Object </span>as Geography)<br />
Returns the distance between two objects in the default unit, typically meters.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="white-space:pre-wrap; white-space:-moz-pre-wrap !important; white-space:-pre-wrap; white-space:-o-pre-wrap; word-wrap:break-word;" id="codebox7" >SELECT FIRST 200 id( Code( Name( City( County( State( GeogLatitude(Location) AS Lat( GeogLongitude(Location) AS Lon( Elevation( Location FROM US_Airports WHERE GeogLocationIsWithinRadius(Location( GeogCreateLocation( ( 71.0597732( 42.3584308) ( 16093) ORDER BY GeogDistanceBetween(Location( GeogCreateFromText(&#39;POINT ( -71.0597732 42.3584308)&#39;) )</pre></div><br />
<h2 class="showhide_heading" id="GeogLatitude">GeogLatitude</h2>
<a name="GeogLatitude"></a><strong>GeogLatitude </strong>as N (<span style="color:#090; background:">Location </span>as Geography)<br />
Returns the latitude value for a geographic location.<br />
<br />
<strong>Note</strong>: This will be the value of X or Y depending on the database.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="white-space:pre-wrap; white-space:-moz-pre-wrap !important; white-space:-pre-wrap; white-space:-o-pre-wrap; word-wrap:break-word;" id="codebox8" >SELECT GeogLongitude(g-Location)( GeogLatitude(g-Location) FROM GeogTest g 
WHERE GeogType(g-Location) , &#39;LOCATION&#39;</pre></div><br />
<h2 class="showhide_heading" id="GeogLocationIntersectsLine">GeogLocationIntersectsLine</h2>
<a name="GeogLocationIntersectsLine"></a><strong>GeogLocationIntersectsLine </strong>as L (<span style="color:#090; background:">Location </span>as Geography, <span style="color:#090; background:">Line</span> as Geography, <span style="color:#090; background:">Tolerance </span>as N)<br />
Returns true if the location intersects the line or is within the tolerance distance from it.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="overflow:auto;" id="codebox9" >SELECT IF(GeogLocationIntersectsLine(
g-Location( 
GeogCreateLine((60( 42( (70( 42( :SRID)( 3000)( 
&#39;It intersects&#39;( 
&#39;It does not intersect&#39;) FROM GeogTest g</pre></div><br />
<h2 class="showhide_heading" id="GeogLocationIsWithinPolygon">GeogLocationIsWithinPolygon</h2>
<a name="GeogLocationIsWithinPolygon"></a><strong>GeogLocationIsWithinPolygon </strong>as L (<span style="color:#090; background:">Location </span>as Geography, <span style="color:#090; background:">Polygon </span>as Geography, <span style="color:#090; background:">Tolerance </span>as N)<br />
Returns true if the location is contained within the polygon or within the tolerance distance from it.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="overflow:auto;" id="codebox10" >SELECT IF(GeogLocationIsWithinPolygon(
g-Location( 
GeogCreatePolygon((70( 44( (70( 34( (60( 34( (70( 44( :SRID)( 5)( 
&#39;It is within the polygon&#39;( 
&#39;It is not within the polygon&#39;) FROM GeogTest g</pre></div><br />
<h2 class="showhide_heading" id="GeogLocationIsWithinRadius">GeogLocationIsWithinRadius</h2>
<a name="GeogLocationIsWithinRadius"></a><strong>GeogLocationIsWithinRadius </strong>as L (<span style="color:#090; background:">Location </span>as Geography, <span style="color:#090; background:">Point </span>as Geography, <span style="color:#090; background:">Radius </span>as N, <span style="color:#090; background:">Tolerance </span>as N)<br />
Returns true if the location is within the radius defined around the point or within the tolerance defined.<br />
<br />
<a name=""></a><strong>Note</strong>: Each database handles tolerance somewhat differently (as it affects indexing performance).<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="overflow:auto;" id="codebox11" >SELECT IF(GeogLocationIsWithinRadius(
g-Location( 
GeogCreateLocation((70( 41.99999( :SRID)( 50)( 
&#39;It is within the radius&#39;( 
&#39;It is not within the radius&#39;) FROM GeogTest g</pre></div><br />
<h2 class="showhide_heading" id="GeogLongitude">GeogLongitude</h2>
<a name="GeogLongitude"></a><strong>GeogLongitude </strong>as N (<span style="color:#090; background:">Location </span>as Geography)<br />
Returns the longitude value for a geographic location.<br />
<br />
<strong>Note</strong>: This will be the value of X or Y depending on the database.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="white-space:pre-wrap; white-space:-moz-pre-wrap !important; white-space:-pre-wrap; white-space:-o-pre-wrap; word-wrap:break-word;" id="codebox12" >SELECT GeogLongitude(g-Location)( GeogLatitude(g-Location) FROM GeogTest g 
WHERE GeogType(g-Location) , &#39;LOCATION&#39;</pre></div><br />
<h2 class="showhide_heading" id="GeogSRID">GeogSRID</h2>
<a name="GeogSRID"></a><strong>GeogSRID </strong>as N (<span style="color:#090; background:">Object </span>as Geography)<br />
Returns the Spatial Reference Identifier (SRID) assigned to the object.<br />
<br />
CODE(wrap="1" colors="sql")}select first 1 GeogSRID(GeogCreateLocation(50, 44)) from GeogTest g{CODE}<br />
<h2 class="showhide_heading" id="GeogType">GeogType</h2>
<a name="GeogType"></a><strong>GeogType </strong>as C (<span style="color:#090; background:">Object </span>as Geography)<br />
Returns LOCATION, LINE, or POLYGON if the geography object is one of them.<br />
<br />
Values returned for other types are not guaranteed to be consistent across databases.<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="white-space:pre-wrap; white-space:-moz-pre-wrap !important; white-space:-pre-wrap; white-space:-o-pre-wrap; word-wrap:break-word;" id="codebox13" >SELECT GeogLongitude(g-Location)( GeogLatitude(g-Location) FROM GeogTest g 
WHERE GeogType(g-Location) , &#39;LOCATION&#39;</pre></div><br />
<a name="Important Note"></a><h2 class="showhide_heading" id="Important_Note">Important Note</h2>
At least one database <em>requires </em>a table name alias in SQL statements that refer to geography objects.  All of our geography samples use an alias for the table referenced in your FROM clause, and you will want to as well. For example, in the Portable SQL below <strong>g</strong> is an alias for table <strong>GeogTest</strong>:<br />
<br />
<div class="plugincode" parse="sql"><pre class="codelisting" data-syntax="sql" dir="ltr" style="overflow:auto;" id="codebox14" >SELECT GeogAsText(GeogCreateFromBinary(GeogAsBinary(g-Location))) 
FROM GeogTest g 
WHERE KeyValue , &#39;LOCATION&#39;</pre></div><br />
More discussion of the samples can be found on <a href="../../../../Guide/Design/Data/SQL/Common Geography Database Tasks.html" title="Common Geography Database Tasks V11" class="wiki">Common Geography Database Tasks.</a><br />
<h2 class="showhide_heading" id="See_Also">See Also</h2>
<a href="../../../../Guide/Design/Data/SQL/Geographic Databases.html" title="Geographic Databases V11" class="wiki">Geographic Databases </a><br />
<a href="/Api/Namespace/SQL/Changes to SQL Objects for Geometry.html" title="Changes to SQL Objects for Geometry V11" class="wiki">Changes to SQL Objects for Geometry </a><br />
<a href="Portable SQL Functions for Geographies.html" title="Portable SQL Functions for Geographies V11" class="wiki">Portable SQL Functions for Geographies </a><br />
<a href="../../../../Guide/Design/Data/SQL/Common Geography Database Tasks.html" title="Common Geography Database Tasks V11" class="wiki">Common Geography Database Tasks </a><br />
<a href="/Index/Database-specific Geography Tasks.html" title="Database-specific Geography Tasks V11" class="wiki">Database-specific Geography Tasks </a><br />
<a href="../../../../Guide/Design/Data/SQL/DB2-specific Geography Tasks.html" title="DB2-specific Geography Tasks V11" class="wiki">DB2-specific Geography Tasks </a><br />
<a href="../../../../Guide/Design/Data/SQL/MySQL-specific Geography Tasks.html" title="MySQL-specific Geography Tasks V11" class="wiki">MySQL-specific Geography Tasks </a><br />
<a href="../../../../Guide/Design/Data/SQL/Oracle-specific Geography Tasks.html" title="Oracle-specific Geography Tasks V11" class="wiki">Oracle-specific Geography Tasks </a><br />
<a href="../../../../Guide/Design/Data/SQL/PostgreSQL-specific Geography Tasks.html" title="PostgreSQL-specific Geography Tasks V11" class="wiki">PostgreSQL-specific Geography Tasks </a><br />
<a href="../../../../Guide/Design/Data/SQL/SQL Server-specific Geography Tasks.html" title="SQL Server-specific Geography Tasks V11" class="wiki">SQL Server-specific Geography Tasks </a><br />
<a href="../../../../Guide/Design/Data/SQL/SQL Geography Examples.html" title="SQL Geography Examples V11" class="wiki">SQL Geography Examples </a><br />
<br />

	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Portable+SQL+Functions+for+Geographies+V11">-->


	 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA:{"tags":"common","status":"pending","keywords":"ref,sql"}--->
</body></html>