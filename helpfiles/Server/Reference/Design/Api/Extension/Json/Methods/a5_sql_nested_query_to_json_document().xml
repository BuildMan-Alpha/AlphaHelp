<page>
<group>JSON Functions</group>
<topic>a5_sql_nested_query_to_json_document()</topic>
<syntax>
P result = a5_sql_nested_query_to_json_document( P options, SQL::Arguments Args)
</syntax>



<description>
a5_sql_nested_query_to_json_document() Function - Queries one or more SQL databases and returns a JSON document with the query result. This function is inspired by NoSQL databases that return a JSON document with a query result. The JSON document return by such a query often contains nested JSON documents. For example for each customer, show orders for that customer, and for each order, show order details for that order.
</description>
<section>
<description>
	For example, here is a sample JSON document returned by this function showing customers, nested orders, and nested order details:
</description>
<example>
{
    "customer": [
        {
            "customerId": "HUNGO",
            "companyName": "Hungry Owl All-Night Grocers",
            "orders": [
                {
                    "orderid": "10298",
                    "customerid": "HUNGO",
                    "value": "10298",
                    "orderDetails": [
                        {
                            "OrderID": "10298",
                            "ProductID": "2",
                            "UnitPrice": "15.2",
                            "Quantity": "40",
                            "Discount": "0"
                        }
                    ]
                },
                {
                    "orderid": "10309",
                    "customerid": "HUNGO",
                    "value": "10309",
                    "orderDetails": [
                        {
                            "OrderID": "10309",
                            "ProductID": "4",
                            "UnitPrice": "17.6",
                            "Quantity": "20",
                            "Discount": "0"
                        },
                        truncated for brevity....
	
</example>
</section>

<see>
	<ref>a5_merge_json_into_template()</ref>
	<ref>a5_url_from_storagejsonformat()</ref>
	<ref>JSON Data</ref>
</see>
</page>