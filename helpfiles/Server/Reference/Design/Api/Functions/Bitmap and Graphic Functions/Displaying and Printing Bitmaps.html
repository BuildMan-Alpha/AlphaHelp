	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			

<p class=A3Topic>Displaying and Printing Bitmaps </p>



<p>Xbasic offers a large number of functions that will create, draw, display, 
 and print bitmaps.</p>



<p class=A5>The General Process</p>



<p>The general process when working with bitmaps is to:</p>



<ol start=1>
	
	<li class=kadov-p-CListNumber><p class=ListNumber>Optionally, read 
 graphical data into a blob variable.</p>

</li>
	
	<li class=kadov-p-CListNumber><p class=ListNumber>Create a bitmap in 
 memory, either from graphical data or by using various drawing functions.</p>

</li>
	
	<li class=kadov-p-CListNumber><p class=ListNumber>Optionally, modify 
 the bitmap with various drawing functions.</p>

</li>
	
	<li class=kadov-p-CListNumber><p class=ListNumber>Optionally, save 
 the bitmap.</p>

</li>
	
	<li class=kadov-p-CListNumber><p class=ListNumber>Display the bitmap 
 on a form or Xdialog, or</p>

</li>
	
	<li class=kadov-p-CListNumber><p class=ListNumber>Send the bitmap to 
 a printer.</p>

</li>
</ol>

<p class=A5>Reading Graphical Data</p>



<p>As the following example shows, it is easy to read binary data into 
 a blob variable with the <a href="../../Objects/File/FILE.TO_BLOB Method.html" title="FILE.TO_BLOB Method" class="wiki">FILE.TO_BLOB(</a>) 
 method.</p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>dim png_data&nbsp;as&nbsp;B</p>


<p class=Code>png_data = file.to_blob("c:\documents\Xbasic Reference\Images\toucan.png")</td></tr>
</table>

<p class=A5>Creating a Bitmap in Memory</p>



<p>One way to create a bitmap is to use the <a href="UI_BITMAP_LOAD Function.html" title="UI_BITMAP_LOAD Function" class="wiki">UI_BITMAP_LOAD(</a>) 
 function to extract graphical data from a blob variable. This example 
 creates a bitmap in memory named "test1". This bitmap is implicitly 
 sized by its content data.</p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>ui_bitmap_load("test1", png_data)</td></tr>
</table>

<p>Another way to create is bitmap is to use the <a href="UI_BITMAP_CREATE Function.html" title="UI_BITMAP_CREATE Function" class="wiki">UI_BITMAP_CREATE(</a>) 
 function to create a blank "slate" of a particular size. This 
 example creates a bitmap in memory named "test2" that is 4 inches 
 wide and 1 inch high.</p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>ui_bitmap_create("test2", 4, 1)</td></tr>
</table>

<p>Or you might grab a piece of the screen image with the <a href="UI_BITMAP_CREATE_FROM_SCREEN Function.html" title="UI_BITMAP_CREATE_FROM_SCREEN Function" class="wiki">UI_BITMAP_CREATE_FROM_SCREEN(</a>) 
 function. The following example captured a 4 by 2 inch rectangle from 
 the upper left corner of the screen.</p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>ui_bitmap_create_from_screen("test3", 0, 0, 4, 
 2)</td></tr>
</table>

<p class=A5>Modifying and Displaying the Bitmap</p>



<p>The are a large number of <a href="Bitmap and Graphic Functions.html" title="Bitmap and Graphic Functions" class="wiki">Graphic   Functions</a> that you may use to modify the bitmap image. These functions 
 are embedded into the <span class=Argument>Code</span> section of the 
 <a href="UI_BITMAP_DRAW Function.html" title="UI_BITMAP_DRAW Function" class="wiki">UI_BITMAP_DRAW(</a>) function. 
 </p>



<p class=Pix><img src="images/GR_UI_BITMAP_DRAW.gif"
					x-maintain-ratio=TRUE
					style="border: none;
							width: 398px;
							height: 138px;
							float: none;
							border-style: none;
							border-style: none;"
					width=398
					height=138
					border=0></p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>ui_bitmap_create("test", 4, 1)</p>


<p class=Code>ui_bitmap_draw("test",<<%code%</p>


<p class=Code>set_font("Verdana,10,b", "black", "green")</p>


<p class=Code>set_brush("green")</p>


<p class=Code>inner_Rect(0, 0, 1.3, 1)</p>


<p class=Code>set_brush("red")</p>


<p class=Code>inner_Rect(1.3, 0, .1, 1)</p>


<p class=Code>set_brush("Lavendar")</p>


<p class=Code>inner_Rect(1.4, 0, 2.6, 1)</p>


<p class=Code>text("Art by Edward", .65, .5, "center")</p>


<p class=Code>%code%)</p>


<p class=Code>ui_dlg_box("", "{image=test}")</p>


<p class=Code>ui_bitmap_drop("test")</td></tr>
</table>

<p class=A5>Printing the Bitmap</p>



<p>If you were going to print this lovely image, the code would look like 
 this. First, dim the variables and define the bitmap in a variable named 
 <span class=Code1>page_description</span>, which contains the same <span 
 class=Argument>Code</span> section included in the UI_BITMAP_DRAW() function.</p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>dim page_description&nbsp;as&nbsp;C</p>


<p class=Code>dim program_name&nbsp;as&nbsp;C</p>


<p class=Code>dim printer&nbsp;as&nbsp;C</p>


<p class=Code>page_description = <<%code%</p>


<p class=Code>set_font("Verdana,10,b", "black", "green")</p>


<p class=Code>set_brush("green")</p>


<p class=Code>inner_Rect(0, 0, 1.3, 1)</p>


<p class=Code>set_brush("red")</p>


<p class=Code>inner_Rect(1.3, 0, .1, 1)</p>


<p class=Code>set_brush("Lavendar")</p>


<p class=Code>inner_Rect(1.4, 0, 2.6, 1)</p>


<p class=Code>text("Art by Edward", .65, .5, "center")</p>


<p class=Code>%code%</td></tr>
</table>

<p>Now, print the bitmap using the <a href="UI_PRINTER_DRAW Function.html" title="UI_PRINTER_DRAW Function" class="wiki">UI_PRINTER_DRAW(</a>) 
 function: </p>



<p class=Pix><img src="images/GR_UI_PRINTER_DRAW.gif"
					x-maintain-ratio=TRUE
					style="border: none;
							width: 429px;
							height: 245px;
							float: none;
							border-style: none;
							border-style: none;"
					width=429
					height=245
					border=0></p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>printer = "Acrobat Distiller"</p>


<p class=Code>program_name = "C:\Program Files\Adobe\Acrobat 5.0\Distillr\AcroDist.exe"</p>


<p class=Code>ui_printer_draw(printer, "please wait", "c:\distiller.ps", 
 page_description)</p>


<p class=Code>if (file.exists("c:\distiller.pdf")) then</p>


<p class=Code>&nbsp;&nbsp;&nbsp;&nbsp;file.remove("c:\distiller.pdf")</p>


<p class=Code>end if</p>


<p class=Code>cmd = program_name + " c:\distiller.ps"</p>


<p class=Code>sys_shell(cmd)</p>


<p class=Code>wait_until(file.exists("c:\distiller.pdf"), 1, 
 10)</td></tr>
</table>

<p class=A5>Saving a Bitmap</p>



<p>The following example creates and saves this picture to a file.</p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>dim pretty_picture&nbsp;as&nbsp;B</p>


<p class=Code>dim ptr&nbsp;as&nbsp;P</p>


<p class=Code>ui_bitmap_create("test", 4, 1)</p>


<p class=Code>ui_bitmap_draw("test",<<%code%</p>


<p class=Code>set_font("Verdana,10,b", "black", "green")</p>


<p class=Code>set_brush("green")</p>


<p class=Code>inner_Rect(0, 0, 1.3, 1)</p>


<p class=Code>set_brush("red")</p>


<p class=Code>inner_Rect(1.3, 0, .1, 1)</p>


<p class=Code>set_brush("Lavendar")</p>


<p class=Code>inner_Rect(1.4, 0, 2.6, 1)</p>


<p class=Code>text("Art by Edward", .65, .5, "center")</p>


<p class=Code>%code%)</p>


<p class=Code>pretty_picture = ui_bitmap_save("test")</p>


<p class=Code>ptr = file.create("c:\pretty_picture.bmp", FILE_RW_EXCLUSIVE)</p>


<p class=Code>ptr.writeb(pretty_picture)</p>


<p class=Code>ptr.close()</p>


<p class=Code>ui_bitmap_drop("test")</td></tr>
</table>

<p class=A5>Interactive Window</p>



<p>These functions may be tested in the <span class=Screen>Interactive</span> 
 window. For example:</p>




<table class="codeTable" style="x-cell-content-align: top;
				border-left-style: None;
				border-right-style: None;
				border-top-style: None;
				border-bottom-style: None;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;" cellspacing="0" width="100%">
<col style="width: 100%;">

<tr style="x-cell-content-align: top;" valign="top">
<td style="x-cell-content-align: top;
			width: 100%;
			padding-right: 10px;
			padding-left: 10px;" valign="top" width="100%">
<p class=Code>' turn on graphics mode</p>


<p class=Code>mode graphics</p>


<p class=Code>' draw a rectangle</p>


<p class=Code>fill_rect(1, .5, 3, 2)</p>


<p class=Code>' draw a line</p>


<p class=Code>line(1.1, 2, 2, 2.5)</p>


<p class=Code>' turn off graphics mode</p>


<p class=Code>mode text</td></tr>
</table>

<p class=A5>See Also</p>



<p><a href="Bitmap and Graphic Functions.html" title="Bitmap and Graphic Functions" class="wiki">Bitmap and Graphic   Functions</a>, <a href="../../Objects/File/FILE.CREATE Method.html" title="FILE.CREATE Method" class="wiki">FILE.CREATE(</a>), 
 <a href="../../Objects/File/FILE.WRITEB Method.html" title="FILE.WRITEB Method" class="wiki">&lt;FILE&gt;.WRITEB(</a>)</p>
	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Displaying+and+Printing+Bitmaps">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA:{"tags":"common","status":"accept"}--->
</body></html>