<page>
   <topic>hmac_hash Function</topic>
   <syntax>C hmac_hash(C data ,C key [,C algorithm [,L toHex ]])</syntax>
   <arguments>
     <argument>
         <name>data</name>
         <description>Data to sign</description>
     </argument>
     <argument>
         <name>key</name>
         <description>Secret key to use for signature</description>
     </argument>
     <argument>
         <name>algorithm</name>
         <description>(optional, defaults to "HMACSHA1") Algorithm to use for signing</description>
     </argument>
     <argument>
         <name>toHex</name>
         <description>Logical</description>
     </argument>
   </arguments>
   <description>Generates a digital signature of the data using the key and HMACSHA1, HMACSHA256, or any other signing method supported by the .NET Framework</description>
   <discussion>
Generates a Base64 digital signature of the data using the key and HMACSHA1, HMACSHA256, or any other signing method supported by the .NET Framework. This is useful for verifying file uploads and downloads, and for signing e-commerce documents as required by sites such as Amazon.
   </discussion>
 
   <sections>
       <section><title>Example</title>
            <description>Interactive session:</description>
            <example><![CDATA[
?HMAC_HASH("my data", "my key") 'defaults to "HMACSHA1"
= "Wnw05dPAEo44+bw1luJqAWksvhE="
 
?HMAC_HASH("my data", "my key", "my data")
= "Wnw05dPAEo44+bw1luJqAWksvhE="
 
?HMAC_HASH("my data", "my key", "my key")
= "HMACSHA1"
 
?HMAC_HASH("my data", "my key", "Wnw05dPAEo44+bw1luJqAWksvhE=")
= "my data"
 
?HMAC_HASH("my data", "my key", "my key") 'method not case sensitive
ERROR: command: 				HMAC_HASH = hash.SignUsing(data,key,alg)
Exception has been thrown by the target of an invocation.
Specified key is not a valid size for this algorithm.
 
'Note that the above error message is correct.
'The Key parameter for Triple DES must be 16 or 24 bytes in length.
 
?HMAC_HASH("my data", "HMACSHA256", "my key") 
= "kBhEzgLKNjSjjzQw7s240hvoY62kDG/wHDjYXry++nA="
 
?HMAC_HASH("my data", "my data", "my key") 
= "my key"
 
?HMAC_HASH("my data", "my key", "HMACSHA384") 'not case sensitive
= "1819IdbuGcIweTIhYBwIK1mOmNrlpgRKK98gnDlVJyXug36wQoDWuBoGlB/GfMqc"
 
?HMAC_HASH("my data", "my key", path, "my data") 'should fail
ERROR: command: 				HMAC_HASH = hash.SignUsing(data,key,alg)
Exception has been thrown by the target of an invocation.
Object reference not set to an instance of an object.
]]></example>
       </section>
       
       <section>
       <description>
Note: The value returned is in Base64, which is what most e-commerce sites want. If you try to compare Base64 with an online hash calculator that returns hexadecimal, they will not appear to match.
 Also, HMAC hashes are encrypted with a key, unlike simple unencrypted hashes such as SHA-1.</description>
       </section>
   </sections>
   <see>
      <ref>DotNet Example: Digital Hash</ref>
      <ref>.NET System.Security.Cryptography Namespace</ref>
   </see>
   <terms>dotnet,defaults,file,function,logical,namespace</terms>
</page>