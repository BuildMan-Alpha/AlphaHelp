<page>
	<topic>Using Session Variables to Filter a GridLinker</topic>
	<description>Web publishing applications only. By default a gridlinker displays all of the records of the underlying grid components. To filter a grid (typically the primary grid) in a gridlinker, follow this procedure.
Assume you have a gridlinker that links the OrderHeader table (parent) to the OrderItems table (child), and you want to filter the OrderHeader grid so that invoice_number = session.invoice_number.
</description>
<sections>
<section>
	
	<steps>
		<step>
			<description>Open the gridlinker from the Web Projects Control Panel.</description>
		</step>
		<step>
			<description>Select the grid whose filter you want to override (the top grid in this case).</description>
		</step>
		<step>
			<description>Click the Edit button to display the Edit Properties dialog.</description>
		</step>
		<step>
			<description>Click the Override Settings button to display the Override Properties dialog.</description>
		</step>
		<step>
			<description>Since the invoice_number field links the two grids, you want to enter the following code in the dialog:</description>
		<example><![CDATA[if eval_valid("pgrid.session.invoice_number") then
    dbf.filter = "invoice_number = " + quote(pgrid.session.invoice_number) 
end if
 ]]></example>
		<note>In a future version of Alpha Five, the need for the pgrid. prefix in pgrid.session.invoice_number will be eliminated.</note>
		</step>
		<step>
			<description>Click OK > OK to return to the GridLinker Builder.</description>
		</step>
		<step>
			<description>Click Save and Close to return to the Web Projects Control Panel.
</description>
		</step>
		<step>
			<description>Place the gridlinker component on a page (in this example named orders.a5w ).
</description>
		</step>
	</steps>
</section>	
<section>
	<title>Testing the Changes</title>
<steps>
	<step>
		<description>Publish the grid components.
</description>
	</step>
	<step>
		<description>Place the gridlinker component on a page and publish it.
</description>
	</step>
	<step>
		<description>Create a dialog component with a single drop down list control.
</description>
	</step>
	<step>
		<description>Set the DropDownBox Properties > Choices field to display a dynamic list of invoice_number values from the Invoice_Header table.
</description>
	</step>
	<step>
		<description>Display the Form > Properties page.
</description>
	</step>
	<step>
		<description>Click the '...' button in the Server Events > AfterValidate field to display the Form Events dialog.
</description>
	</step>
	<step>
		<description>Enter the following code and click OK.
</description>
<example><![CDATA[session.invoice_number = invoice_number
currentform.redirecttarget = "orders.a5w"
 ]]></example>
	</step>
	<step>
		<description>Place the dialog component on a page and publish the page (in this case named Pick_Invoice_Number.a5w ).
</description>
	</step>
	<step>
		<description>When you select an invoice number and click Submit, the orders.a5w page will appear. 
</description>
	</step>
	
</steps>	
	
	
</section>
<section>
	<title>After selecting an invoice number on the Pick_Invoice_Number.a5w page and clicking Submit...
</title>
	<figure><link>images/WP_Filtered_Gridlinker_1.gif</link></figure>
	
</section>
	<section>
	<title>...the orders.a5w page containing the filtered gridlinker appears.
</title>
	<figure><link>images/WP_Filtered_Gridlinker_2.gif</link></figure>
	
</section>
	
</sections>	
	<see>
		<ref>Using a Session Variable in a Component</ref>
	</see>
</page>