<html>
    <head>
        <link rel="stylesheet"  href="documentation.css"  type="text/css" />
        
        
        
    </head>
<body ><style>
<!--
p, ul, li            { font-family: Tahoma; width: 7in; font-size: 9pt; margin-left: .5in; margin-top:0px; margin-bottom:5px }
.xbasic      { font-family: Courier New; font-size: 10pt; color: #0000FF; margin-left: 1.1in;
               margin-top: 0; margin-bottom: 0 }
.xb      { font-family: Courier New; font-size: 10pt; color: #0000FF;}
               
td           { font-family: Tahoma; font-size: 8pt; VERTICAL-ALIGN: top}
h1           { font-family: Tahoma; font-size: 11pt; color: #ff0000 }
h2           { font-family: Tahoma; font-size: 10pt ; color: #ff0000}
h4 			  {font-family: Tahoma; font-size: 9pt; font-weight: bold; color: #ff0000}
h3           { font-family: Tahoma; font-size: 10pt ; color: #ff0000; margin-left: .5in;}
.note		{ padding: 10px; background-color: #f0f0f0;	border-radius: 3px;}            

BODY {font-family="Arial"}


</style>
    <h1>Interactive Shell</h1>
	<p>You can now executed shell commands directly from the Interactive Window 
	in Alpha Anywhere. </p>
	<p>
	<a href="http://www.ajaxvideotutorials.com/V12Videos/interactive_shell_1.swf">
	Watch Video - Part 1</a><br>
	<a href="http://www.ajaxvideotutorials.com/V12Videos/interactive_shell_2.swf">
	Watch Video - Part 2</a></p>
    <h2>The '$' Command</h2>
    <p>
    Shelling out to the command line, and executing shell commands can now be done from directly the 
	Alpha Anywhere Interactive window by preceding the shell command with a '$' 
	sign.</p>
	<p>
    &nbsp;</p>
	<p>
    &nbsp;</p>
	<p>
    Run the DIR command:</p>
	<pre class="xbasic">
$dir c:\data /b
ApplicationServerConfig.xml
chome.png
data.json
db
font-awesome
invtest.rtf
Northwind.mdb
test.pdf
times.txt
</pre>
	<p>
Show the current date:<br>
&nbsp;</p>
	<pre class="xbasic">
$date /T
Sun 07/27/2014
</pre>
	<p>
Execute a CURL command:</p>
	<p>
Note the use of the --silent and --no-buffer CURL options</p>
	<pre class="xbasic">
&nbsp;</pre>
	<pre class="xbasic">
$curl http://worldcup.kimonolabs.com/api/players --silent --no-buffer
{&quot;error&quot;:&quot;Unauthorized - Invalid API Key&quot;}

    </pre>
	<p>
Auto-complete help is supported for a many shell commands. For example, when you 
type the first - after the $curl command note how the CURL command options are 
shown.</p>
	<p>
&nbsp;</p>
	<p>
<img border="0" src="images/curl_bubbleHelp.jpg"></p>
	<p>
&nbsp;</p>
	<p class="note">
<b>NOTE</b>: The auto-complete help is defined in the
<font color="#0000FF" face="Courier New">interactive_shell.json</font> file in 
the executable folder. You can modify this file to add auto-complete help for 
other shell commands.</p>

    <h2>Interactive Commands</h2>
    <p>
    Interactive shell commands are supported and they run in the Interactive Window until you exit or hit ^Z (which forces a terminate).
    </p>
	<p>
    &nbsp;</p>
	<p>
    Run Node.js from the Interactive Window (this is the standard Node.JS REPL):</p>

    <pre class="xbasic">

$node
> 1+1
2
> "hello world".split()
[ 'hello world' ]
> var fs = require('fs');
undefined
> fs.existsSync("c:/program files (x86)/a5v12/alpha5.exe")
true
> process.exit()
    </pre>

    <p class="note"><b>NOTE</b>:&nbsp; <font color="#0000FF" face="Courier New">
	process.exit() </font>is the Node command for closing Node. We could also 
	have simply typed ^Z in the Interactive Window to end the interactive Node 
	session.</p>
	<p>&nbsp;</p>
	<h2>&nbsp;</h2>
	<h2>Redirecting Output and Input</h2><p>
    The Interactive Shell commands allows redirecting output to an Xbasic 
	variable.</p>
	<p>
    &nbsp;</p>
	<p>
    For example, here we use the DIR command and we redirect the output (using 
	the &gt; directive) to an Xbasic variable called 'files'. We then use the 
	Xbasic function to display the contents of the variable.</p>
	<p>
    &nbsp;</p>
	<pre class="xbasic">
$dir c:\a5v12 &gt; files
showvar(files)</pre>
<p>
    &nbsp;</p>
<p>
    When a shell command is expecting input that you would normally type in, you 
	can redirect input to the shell command using the &lt; directive.</p>
<p>
    For example here we create an Xbasic variable with a long list of colors 
	using the a5.color_enum() function. Notice that we append a ^Z (chr(26)) 
	character to the end of the string, or else the command window will not know 
	that there is no more input to receive. We then call the SORT command and 
	pipe input to the command from the 'colors' variable, and pipe output from 
	the command to the 'sorted' variable. Then we show the contents of the 
	sorted variable using the showvar() function.</p>
	<p>
    &nbsp;</p>
<pre class="xbasic">
dim colors as c 
colors = a5.Color_Enum() + chr(26)
$sort < colors  > sorted 
showvar(sorted)</pre>
	<pre class="xbasic">

</pre>
<p class="note">
    <b>TIP</b>: When using the command window, if the command window appears 
	hung, it is likely that the shell is simply waiting for more input. You can 
	press ^Z as you would in a normal CMD window to end the command. For shell 
	commands that are expecting input, adding a trailing ^Z after the input will 
	let the shell know that the end of the input has been reached.</p>
<p>
    &nbsp;</p>
	
<h2>The Shell Configuration File</h2>
    <p>
    The Shell configuration file is a JSON file (<font color="#0000FF" face="Courier New">interactive_shell.json</font>) that describes the shell commands and settings.
    This file can be in either the application data folder OR the executable path.
    </p>
	<p>
    The predefined system default file is in the EXE folder, but Alpha Anywhere will look in the application data folder first and use that file 
	instead of the system file. If the file in the application data folder has 
	the 'extend' parameter set to 'true' (see below), then the file in the 
	application data folder will extend the system file.</p>
	<p>
    it will use the file in addition to the system commands if "extend" : true parameter is set at the top of the file.
    </p>
	<p class="note">
    <b>NOTE: </b>The location of the application data folder is returned by the 
	A5_GetApplicationDataFolder() function.</p>
    <h2>Configuration File Format</h2>
	<p>The format of the configuration file entries is shown below.</p>

    <pre class="xbasic">
    {
        <b>"extend"</b> : (true/false)
      , <b>"&lt;command&gt;"</b> : {
       &nbsp;&nbsp;&nbsp;&nbsp;<b>"help"</b> : "<help>"
		&nbsp;&nbsp;&nbsp;&nbsp;, <b>"description"</b> : "&lt;description&gt;" 
		&nbsp;&nbsp;&nbsp;&nbsp;, <b>"default-arguments"</b> : "&lt;arguments&gt;"
		&nbsp;&nbsp;&nbsp;&nbsp;, <b>"require-command"</b> : (true/false)
		&nbsp;&nbsp;&nbsp;&nbsp;, <b>"require-console"</b> : (true/false)
		&nbsp;&nbsp;&nbsp;&nbsp;, <b>"options"</b> : {
		&nbsp;&nbsp;&nbsp;&nbsp;   , <b>"&lt;option&gt;"</b> {  
		   		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>"description"</b> : "&lt;description&gt;"
		   		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>"alias"</b> : "&lt;alias&gt;"
		&nbsp;&nbsp;&nbsp;&nbsp;}
		}
      }
      ...
    }
    </pre>
    
    
    <p>
  	<table border="1" cellspacing="1" cellpadding="3" id="table68" style=" margin-left: 0.5in; border-collapse: collapse; " width="1092">

		
      <tr><th style="width:2in;">JSON Attribute</th> : <th>Description</th></tr>
      <tr><th>"extend"</th> : <td>If true, load the defaults in addition to this file (we are adding, not overriding completely)</td></tr>
      <tr><th>"&lt;command&gt;"</th> : <td>Commands are named objects that follow - i.e. <i>"dir"</i></td></tr>
      <tr><th>"help"</th> <td>Optional help to display when the command has been selected</td></tr>
      <tr><th>"description"</th>  <td>Optional description of command</td></tr>
	  <tr><th>"default-arguments"</th>  <td>Optional default arguments to pass to the command when none are specified.</td></tr>
	  <tr><th>"require-command"</th> <td>Optional flag, which when true runs as a shell command, this is required for batch and interpretted commands.</td></tr>
	  <tr><th>"require-console"</th> <td>Optional flag, which when true uses a hidden consult window instead of pipes.  pipes are preferable because they are not lossy, but applications may require this setting.</td></tr>
	  <tr><th>"options"</th>  <td>Optional parameter help for command</td></tr>
	  <tr><th>"&lt;option&gt;"</th> {  <td>A parameter</td></tr>
	  <tr><th>"description"</th> <td>Optional description of parameter</td></tr>
	  <tr><th>"alias"</th> <td>Some parameters have short versions of the same parameter, this is stored in the alias</td></tr>
	 </table>
    </p>
    
    <h2>Example Configuration Entry</h2>
	<p>When you type the initial $ in the Interactive Window, the auto-complete 
	help shows all of the shell commands that have been defined in the <font color="#0000FF" face="Courier New">interactive_shell.json </font>
	file.</p>
	<p>&nbsp;</p>
	<p><img border="0" src="images/interactiveshell_autocomplete3.jpg"></p>
	<p>&nbsp;</p>
    <p>The example below shows the configuration file entry for the DIR shell 
	command. When you type $dir in the Interactive window, auto-complete help is 
	displayed (as shown in the image below).</p>
	<p>
	<img border="0" src="images/interactiveshellbubblehelp1.jpg"></p>
	<p>The help that is displayed is defined by the
	<font color="#0000FF" face="Courier New">help</font> property in the JSON 
	string shown below.</p>
    <p>The <font color="#0000FF" face="Courier New">require-command</font> option 
	is defined as 'true'. This is because the DIR command requires the CMD shell to be running to execute.</p>
<pre class="xbasic">
&nbsp;</pre>
	<pre class="xbasic">
"dir" :
{
	"help" : "dir [drive:][path][filename] [/A[[:]attributes]] [/B] [/C] [/D] [/L] [/N] [/O[[:]sortorder]] [/P] [/Q] [/R] [/S] [/T[[:]timefield]] [/W] [/X] [/4]",
	"require-command" : true ,
	"options" : {
	"/A" : { "description" : "Displays files with specified attributes." } ,
	"/B" : { "description" : "Uses bare format (no heading information or summary)." } ,
	"/C" : { "description" : "Display the thousand separator in file sizes.  This is the default.  Use /-C to disable display of separator." } ,
	"/D" : { "description" : "Same as wide but files are list sorted by column." } ,
	"/L" : { "description" : "Uses lowercase." } ,
	"/N" : { "description" : "New long list format where filenames are on the far right." } ,
	"/O" : { "description" : "List by files in sorted order (N, S , E , D , G , - ) ." } ,
	"/P" : { "description" : "Pauses after each screenful of information." } ,
	"/Q" : { "description" : "Display the owner of the file." } ,
	"/R" : { "description" : "Display alternate data streams of the file." } ,
	"/S" : { "description" : "Displays files in specified directory and all subdirectories." } ,
	"/T" : { "description" : "Controls which time field displayed or used for sorting (C,A,W)" } ,
	"/W" : { "description" : "Uses wide list format." } ,
	"/X" : { "description" : "This displays the short names generated for non-8dot3 file names." } ,
	"/4" : { "description" : "Displays four-digit years" }
	 }

} ,</pre>
	

&nbsp;<p>When you type the / character, options are shown.</p>
	<p>These options are defined by the <font color="#0000FF" face="Courier New">
	options</font> parameter in the <font color="#0000FF" face="Courier New">interactive_shell.json </font>
	file. </p>
	<p>&nbsp;<img border="0" src="images/interactiveshell_bubblehelp2.jpg"></p>

</body>
</html>