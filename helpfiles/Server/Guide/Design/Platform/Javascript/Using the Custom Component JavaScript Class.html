	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">







	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>



	</div>
</div>




<article id="top" class="wikitext clearfix nopagetitle">








			<h1 class="showhide_heading" id="Using_the_Custom_Component_JavaScript_Class">Using the Custom Component JavaScript Class</h1>
<div id='toc'><div id='toctitle'><h3>Table of contents</h3></div><ul class="toc"><li><a href="#Using_the_Custom_Component_JavaScript_Class" class='link'>Using the Custom Component JavaScript Class</a>
<ul><li><a href="#Making_an_Ajax_Callback" class='link'>Making an Ajax Callback</a>
</li><li><a href="#Maintaining_state" class='link'>Maintaining state</a>
</li><li><a href="#See_also" class='link'>See also</a>
</li></ul></li></ul><!--toc--></div><br />
<h2 class="showhide_heading" id="Making_an_Ajax_Callback">Making an Ajax Callback</h2>
{Component.Object}<strong>.ajaxCallback</strong>(<span style="color:#090; background:">part</span>,<span style="color:#090; background:">rowNum</span>,<span style="color:#090; background:">xbasicFunction OR actionName</span>,<span style="color:#090; background:">URL</span>,<span style="color:#090; background:">OtherData</span>)<br />
<br />
The <strong>ajaxCallback </strong>method of the A5.CustomComponentHelper JavaScript class makes it trivial to call a server-side Xbasic function from the client side of an Alpha Five Custom Control.<br />
<br />
The first two parameters are meaningless and should normally be set to empty strings. They have been included for compatibility with the <strong>ajaxCallback </strong>method of the Grid and Dialog2 components. The third parameter contains the name of the Xbasic function to call if the <span style="color:#090; background:">URL</span> parameter is omitted or an empty string, and an action name if the <span style="color:#090; background:">URL</span> parameter is specified.<br />
<br />
For example:<br />
<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox" >
function doCallback() {
  {Component.Object{.ajaxCallback(&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;Navigate&#39;);
}
</pre></div><br />
<br />
The <span style="color:#090; background:">URL</span> parameter is only used when it is necessary to call back to a non-Alpha site. In that case, the non-Alpha site will be unable to take advantage of many of the facilities that make Alpha Five Ajax callbacks so easy to develop and maintain, such as e._state.<br />
<br />
The <span style="color:#090; background:">OtherData</span> parameter takes the form of a JavaScript string of name/value pairs in HTTP query form. It can also be a JavaScript function call that <em>returns</em> a JavaScript string of name/value pairs in HTTP query form, or be a JavaScript expression that <em>evaluates </em>to a JavaScript string of name/value pairs in HTTP query form.<br />
<br />
So, for example, you can have <span style="color:#090; background:">OtherData</span> parameters like these:<br />
<br />
Simple name/value pairs in HTTP query form:<br />
<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox1" >
'_direction=First&_param2=something&_param2=else'
</pre></div><br />
Evaluate a reference:<br />
<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox2" >
'_direction=First&_param2='+$('div1').value
</pre></div><br />
If 'div1' was an input control and it contained a value<br />
  of 'myspecialvalue' then this would evaluate to:<br />
<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox3" >
'_direction=First&_param2=myspecialvalue'
</pre></div><br />
In the xbasic callback handler, the e object that was passed in would have:<br />
<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox4" >
Request.Variables._direction = "Frank"
Request.Variables._param2 = "myspecialvalue"
</pre></div><br />
<br />
If the <span style="color:#090; background:">OtherData</span> parameter were<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox5" >
readDataFromPage()
</pre></div><br />
<br />
and readDataFromPage() returned:<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox6" >
'_param1=foo&_param2=bar'
</pre></div><br />
<br />
then that returned string would be submitted to the server.<br />
<br />
Note that the Ajax callback function (in Xbasic) can return a string that will be executed as JavaScript.<br />
<br />
See <a href="../../View/Grid/User Defined Ajax Callbacks in Grids.html" title="User Defined Ajax Callbacks in Grids V10" class="wiki">User Defined Ajax Callbacks in Grids V10</a> for additional discussion of this method.<br />
<h2 class="showhide_heading" id="Maintaining_state">Maintaining state</h2>
In a web component you often need to maintain state across HTTP calls. In the custom component, assuming that you are using an Alpha Five server, you can do this by creating properties of the <strong>e._state</strong> variable in any event-handling context where the <strong>e</strong> variable has been passed in by the component.<br />
<br />
For example, to create a state property called <span style="color:#090; background:">pageNumber </span>and initialize it to "1", run the following Xbasic code in your <strong>onInitialRender </strong>event function:<br />
<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox7" >
e._state.pageNumber = "1"
</pre></div><br />
<br />
Behind the scenes, the server will generate a JavaScript call to the component's <strong>setStateInfo()</strong> method.<br />
<br />
If you wanted to increment the <span style="color:#090; background:">pageNumber </span>state in a callback function, you could write:<br />
<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox8" >
dim pn as c
dim e._state.pageNumber as c = default ""
pn = e._state.pageNumber
dim newPage as n
newPage = val(pn) + 1
e._state.pageNumber = "" + newPage
</pre></div><br />
<h2 class="showhide_heading" id="See_also">See also</h2>
<a href="../../View/Component/Custom Components.html" title="Custom Components V11" class="wiki">Custom Components V11</a><br />
<a href="Using the Custom Component JavaScript Class.html" title="Using the Custom Component JavaScript Class V11" class="wiki">Using the Custom Component JavaScript Class V11</a><br />
<a href="../../View/Component/Creating a Custom Component.html" title="Creating a Custom Component V11" class="wiki">Creating a Custom Component V11</a><br />
<a href="../../View/Component/Custom Component Sections and Events.html" title="Custom Component Sections and Events V11" class="wiki">Custom Component Sections and Events V11</a><br />
<a href="../../View/Grid/Sharing and Using a Custom Component.html" title="Sharing and Using a Custom Component V11" class="wiki">Sharing and Using a Custom Component V11</a><br />
<br />



	<hr class="hrwikibottom" />


	</article>




	<!-- WIKIPATH:Using+the+Custom+Component+JavaScript+Class+V11">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>



	</div>
</div>

			</div>
		</div>




<!-- Put JS at the end -->

<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA:{"tags":"web","status":"pending","keywords":"server,guide,javascript,ajax"}--->
</body></html>