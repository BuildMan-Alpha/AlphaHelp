	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			<h1 class="showhide_heading" id="Action_Javascript_Improvements">Action Javascript Improvements</h1>
	<p class="showhide_heading">&nbsp;</p>
<h3>Table of contents</h3>
<div class="helpserver_toc"> 
<ul><li><a href="#Button_to_Open_Other_Component_Types_in_Windows" class='link'>Button to Open Other Component Types in Windows</a>
</li><li><a href="#Additional_options_for_the_target_when_opening_an_A5W_page" class='link'>Additional options for the target when opening an A5W page</a>
</li><li><a href="#New_Action_-_Geocode_an_Address" class='link'>New Action - Geocode an Address</a>
</li><li><a href="#Import_action_new_server-side_event" class='link'>Import action new server-side event</a>
</li><li><a href="#Action_Javascript_-_Send_Email" class='link'>Action Javascript - Send Email</a>
</li><li><a href="#Global_Update_Operation_to_Update_a_Field_in_Multiple_Rows_in_a_Grid" class='link'>Global Update Operation to Update a Field in Multiple Rows in a Grid</a>
</li><li><a href="#Global_Search_and_Replace_Operation_in_a_Grid" class='link'>Global Search and Replace Operation in a Grid</a>
</li><li><a href="#Using_Action_Javascript_to_toggle_the_show_hide_state_of_any_arbitrary_DIV_or_container_using_animation" class='link'>Using Action Javascript to toggle the show/hide state of any arbitrary DIV or 'container' using animation</a>
</li><li><a href="#Open_a_Grid_Component_-_Invoking_Server-side_Events_Handlers" class='link'>Open a Grid Component - Invoking Server-side Events Handlers</a>
</li><li><a href="#Action_Javascript_-_Ajax_Windows_-_User-Defined_Buttons" class='link'>Action Javascript - Ajax Windows - User-Defined Buttons</a>
</li><li><a href="#Grid_and_Dialog_Component_-_Open_in_Window_-_Dropdown_Window_Style" class='link'>Grid and Dialog Component - Open in Window - Dropdown Window Style</a>
</li><li><a href="#Dialog_Component:_Populate_controls_from_data" class='link'>Dialog Component: Populate controls from data</a>
</li><li><a href="#Grid_Component:_Open_a_Dialog_Component_to_Edit_Current_Record_in_Grid_or_add_a_new_Record" class='link'>Grid Component: Open a Dialog Component to Edit Current Record in Grid or add a new Record</a>
</li><li><a href="#Binding_Arguments_to_JavaScript" class='link'>Binding Arguments to JavaScript</a>
</li><li><a href="#Lock_Unlock_Screen_or_Element" class='link'>Lock/Unlock Screen or Element</a>
</li><li><a href="#Open_Dialog_as_an_Alternate_Record_View" class='link'>Open Dialog as an Alternate Record View</a>
</li><li><a href="#Open_a_Dialog_-_New_Property_-_Use_cached_Dialog" class='link'>Open a Dialog - New Property - Use cached Dialog</a>
</li><li><a href="#Geolocation:_Get_and_track_the_user_s_location" class='link'>Geolocation: Get and track the user's location</a>
</li><li><a href="#Pop-up_Windows_-_Removing_the_Close_Icon" class='link'>Pop-up Windows - Removing the Close Icon</a>
</li><li><a href="#Open_a_Component_in_a_pop-up_window:_Optional_window_parts" class='link'>Open a Component in a pop-up window: Optional window parts</a>
</li><li><a href="#Grid_and_Dialog_Component_-_Message_Box_Action_-_Advanced_Message_Box" class='link'>Grid and Dialog Component - Message Box Action - Advanced Message Box</a>
</li><li><a href="#Grid_and_Dialog_Component_mdash_Fade-Out_Message" class='link'>Grid and Dialog Component &mdash; Fade-Out Message</a>
</li><li><a href="#Also_see" class='link'>Also see</a>
</li></ul>
</div>

<br />
<h2 class="showhide_heading" id="Button_to_Open_Other_Component_Types_in_Windows">Button to Open Other Component Types in Windows</h2>
When you use Action Javascript to create a button to open a window, or display content in a DIV or TabbedUI Pane, previously the types of objects that you could open were limited to:<br />
<ul><li>Grid Components
</li><li>Reports
</li><li>A5W Pages
</li></ul>Now, you can open Dialog, PageLayout, Custom Components, Maps, Calendars, any User Defined Component, and additional 
	Alpha Anywhere components as they are introduced.<br />
<h2 class="showhide_heading" id="Additional_options_for_the_target_when_opening_an_A5W_page">Additional options for the target when opening an A5W page</h2>
This action now has additional options for the target. Previously, the target could be a pop-up Ajax window, a DIV or a Tabbed UI Page. Now you can also specify 'Browser window' to open the target page in a new browser window.<br />
<br />
When you select the 'Browser window' option, you can specify several different options to control different aspects of the browser window.<br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/OpenA5WPageInNewBrowserWindow.swf" rel="external nofollow">Watch video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="New_Action_-_Geocode_an_Address">New Action - Geocode an Address</h2>
This new action allows you to do an ajax callback, passing back the address in the current Grid row or the current Dialog. A call to a web service is then made to get the latitude and longitude of the address. This information is then returned to the browser where it will fill in the latitude and longitude field in the current record you are editing. Geocoding addresses is useful if you want to display markers on a map. The built-in Google Map feature allows you to easily display markers on a map for the addresses in your Grid. The process of placing markers on the map is much more efficient if you have latitude/longitude values for each address.<br />
<h2 class="showhide_heading" id="Import_action_new_server-side_event">Import action new server-side event</h2>
A new server-side event has been added. The 'Pre-process uploaded file' server-side event is called if the user uploads an ascii file. The event is called after the data has been uploaded, but before the file is processed in any away. The event was added because in some cases a user might be uploading a file that does not have column headings in the first row. This event will allow you to pre-process the ascii file that was uploaded and add in column headings in at the top of the file.<br />
<h2 class="showhide_heading" id="Action_Javascript_-_Send_Email">Action Javascript - Send Email</h2>
A new action has been added to Action Javascript. You can now create an action that sends an e-mail. The e-mail message can be defined in the action, or you can specify the name of a message that is stored in the Repository. The message can contain placecholders for fields in the current record (e.g. {firstname}). The placeholders can include Xbasic functions (e.g. Hello {upper(firstname)}. You can specify if the e-mail should be sent immediately, or queued (by adding a new task to the new Work Queue table). Since connecting to a SMTP server can be quite slow, in a high traffic application, it is generally a good idea to queue sending e-mail messages.<br />
<div class="clearfix rbox note"><img src="images/close.png" alt="Close" width="16" height="16" class="rbox-close" onclick="$(this).parent().fadeOut();" title="Close" /><div class="rbox-title"><img src="images/information.png" alt="note" width="16" height="16" title="note" class="icon" /><span>Note</span></div><div class="rbox-data">You are responsible for processing the Work Queue. Simply adding a task to the Work Queue will not cause it to be processed unless some job reads the Work Queue and acts on the tasks in the Queue.</div></div><br />
<h2 class="showhide_heading" id="Global_Update_Operation_to_Update_a_Field_in_Multiple_Rows_in_a_Grid">Global Update Operation to Update a Field in Multiple Rows in a Grid</h2>
When doing data entry into a Grid there may be times when the user wants to copy a value from one row to multiple rows in the Grid. Using Action Javascript is is easy to make a button that does a 'global update' operation on all visible rows in the Grid.<br />
<br />
It is important to recognize that the action shown in this video is a 'client-side' action. No data is actually written to the database until the user clicks the 'Submit' button.<br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/GlobalUpdateOperation.swf" rel="external nofollow">Watch Video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Global_Search_and_Replace_Operation_in_a_Grid">Global Search and Replace Operation in a Grid</h2>
When doing data entry into a Grid there may be times when the user wants to perform a search and replace operation on the data the currently visible rows in the Grid. Using Action Javascript, it is easy to make a button does a 'global search and replace' on all visible rows in the Grid.<br />
<br />
It is important to recognize that the action shown in this video is a 'client-side' action. No data is actually written to the database until the user clicks the 'Submit' button.<br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/GlobalSearchAndReplace.swf" rel="external nofollow">Watch Video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Using_Action_Javascript_to_toggle_the_show_hide_state_of_any_arbitrary_DIV_or_container_using_animation">Using Action Javascript to toggle the show/hide state of any arbitrary DIV or 'container' using animation</h2>
Animation is built into many of the objects, but there may be times when you want to animate some arbitrary DIV or container. This is now very easy using Action Javascript. You can define complex animations without having to write any code.<br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/ToggleVisibilityUsingActionJavascript.swf" rel="external nofollow">Watch Video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Open_a_Grid_Component_-_Invoking_Server-side_Events_Handlers">Open a Grid Component - Invoking Server-side Events Handlers</h2>
When you have a client-side event handler (such as a button's onClick event), that opens a Grid (in a pop-up Ajax window, a div, a tabbed UI pane, etc), you might want to execute some Xbasic on the server before the Grid is executed on the server. This topic discusses how you can do this.<br />
<br />
First some background. The first time a Grid is opened in a pop-up window, the <strong>{grid.object}.openChildGrid()</strong> method is called. If the pop-up window is then closed, and the event is executed a second time, the <strong>{grid.object}.synchronizeGrid()</strong> method is called. These two events now set variables (__openChildGrid and __synchronizeGrid) that you can test for in the <strong>onGridExecute </strong>server-side event. If the variables are found, then you know that the user has just invoked an event that will open a Grid.<br />
<br />
Here is some sample code that you can add to the <strong>onGridExecute </strong>server-side event:<br />
<br />
<div class="plugincode" parse="vbnet"><pre class="codelisting" data-syntax="vbnet" dir="ltr" style="overflow:auto;" id="codebox" >dim flagExecuteSpecialEvent as l = .f.
if eval_valid(&#34;request.variables.__openChildGrid&#34;) then
    if request.variables.__openChildGrid = &#34;true&#34; then
        flagExecuteSpecialEvent = .t.
    end if
end if
&nbsp;
if eval_valid(&#34;request.variables.__synchronizeGrid&#34;) then
    if request.variables.__synchronizeGrid= &#34;true&#34; then
        flagExecuteSpecialEvent = .t.
    end if
end if
&nbsp;
if flagExecuteSpecialEvent = .t. then
    mySpecialEvent(e)
end if</pre></div><br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/AddingAServerSideEventHandlerToActionJavascript_openGrid.swf" rel="external nofollow">Watch Video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Action_Javascript_-_Ajax_Windows_-_User-Defined_Buttons">Action Javascript - Ajax Windows - User-Defined Buttons</h2>
The builder now allows you to define buttons to place in the window 'toolbar' which appears at the bottom of the window.<br />
<br />
<a href="javascript:void(0)" class="internal" onmouseover="return convertOverlib(this,'&nbsp;',['WIDTH=674','HEIGHT=971','BACKGROUND=img/wiki_up/action_javascript_open_window.png']);">
	<img src="images/action_javascript_open_window.png" height="975" width="675" alt="Image" /></a><br />
<br />
For example, in the window below, the 'Login' and 'Cancel' button have been placed in the window toolbar.<br />
<br />

	<img src="images/windowbarbuttons.gif" alt="Image" /><br />
<h2 class="showhide_heading" id="Grid_and_Dialog_Component_-_Open_in_Window_-_Dropdown_Window_Style">Grid and Dialog Component - Open in Window - Dropdown Window Style</h2>
If a Grid or Dialog component is opened in a pop-up window and if the window is configured to use the 'Dropdown' style, then a new property is shown in the Action Javascript builder.<br />
<br />
The property is 'Allow auto-close of dirty Grid/Dialog'. When a window uses the 'Dropdown' style, clicking anywhere off the window will cause the window to close. If the window contains a Grid or Dialog component, before the window is closed, a check is made to see if the Grid or Dialog in the window is dirty. If it is, then by default, the window will not close. However, there may be applications in which you want the window to close, regardless of whether the Grid or Dialog in the window is dirty or not. Checking this new property will give you that behavior.<br />
<h2 class="showhide_heading" id="Dialog_Component:_Populate_controls_from_data">Dialog Component: Populate controls from data</h2>
This action can be bound to a dialog button or link to populate the controls from the data in a SQL table.<br />
<br />

	<img src="images/populate_dialog_controls_from_data.png" alt="Image" /><br />
<br />

	<img src="images/populate_dialog_controls_2.png" alt="Image" /><br />
<br />
See video <a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/DialogComponent_ActionJavascriptButtonToPopulateDialog.swf" rel="external nofollow">D21</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /> for more details. <a class="wiki external" target="_blank" href="http://news.alphasoftware.com/v11preview/videos_v11.htm" rel="external nofollow">Click here to see all Videos.</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Grid_Component:_Open_a_Dialog_Component_to_Edit_Current_Record_in_Grid_or_add_a_new_Record">Grid Component: Open a Dialog Component to Edit Current Record in Grid or add a new Record</h2>
Only for Dialogs bound to SQL tables at present. See video <a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/DialogComponent-EditGridRowAndEnterNewRecord.swf" rel="external nofollow">D24</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /> for more details. <a class="wiki external" target="_blank" href="http://news.alphasoftware.com/v11preview/videos_v11.htm" rel="external nofollow">Click here to see all Videos.</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Binding_Arguments_to_JavaScript">Binding Arguments to JavaScript</h2>
When you use Action Javascript to open a Grid, Report, Dialog, Custom Component, etc. you often need to bind the value of an argument to a value from the parent Component. For example, you might bind the value of 'arg1' to the value of the Lastname field in the current Grid row.<br />
Now, instead of binding an argument to the value of a field in the Grid or Dialog, you can specify an arbitrary Javascript function to execute. The argument is bound to the value that this Javascript function returns.<br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/ActionJavascript_BindingArgumentValuesToResultofJavascriptFunction.swf" rel="external nofollow">Watch Video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /> (M36)<br />
<h2 class="showhide_heading" id="Lock_Unlock_Screen_or_Element">Lock/Unlock Screen or Element</h2>
A new action has been to lock, or unlock the screen, or an element. This is commonly done during an Ajax callback. See <a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/LockingControlsOnAComponent.swf" rel="external nofollow">Video D27</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Open_Dialog_as_an_Alternate_Record_View">Open Dialog as an Alternate Record View</h2>
New Action for opening a Dialog as an alternate view of the record currently being edited in a Grid - See Video D28.<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/Dialog_AltEditingView_1.swf" rel="external nofollow">Part 1</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/Dialog_AltEditingView_2.swf" rel="external nofollow">Part 2</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Open_a_Dialog_-_New_Property_-_Use_cached_Dialog">Open a Dialog - New Property - Use cached Dialog</h2>
The Action Javascript action <strong>Open a Dialog</strong> now has a new property <strong>Use cached Dialog</strong> that will, in certain circumstances, allow for a significant improvement in performance the <em>second and subsequent </em>times the action is invoked and the Dialog is opened. The performance improvement will only be noticeable on large Dialogs with many bindings, but in that case it can be dramatic.<br />
<br />
To see the change, you will need to edit and resave your action.<br />
<h2 class="showhide_heading" id="Geolocation:_Get_and_track_the_user_s_location">Geolocation: Get and track the user's location</h2>
You can use Action Javascript to get the location of the user and store that information in the Grid or Dialog object. You can also fire events when the user's location changes. This is particularly useful in the case of a mobile device.<br />
<br />
<div id="wp-flash-e85e61a2d8f2e83359264927e18d8c6c">Flash player not available.</div><br />
<h2 class="showhide_heading" id="Pop-up_Windows_-_Removing_the_Close_Icon">Pop-up Windows - Removing the Close Icon</h2>
Some users have requested information on how to completely remove the Close icon from the title bar of a pop-up ajax. This is easily done by placing this Javascript in the onShow event of the window:<br />
<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox1" >//To remove the x button, but leave the title bar
this.clearTools();
&nbsp;
//To remove the title bar completely:
this.setDisplay(&#39;title&#39;,true);</pre></div><br />
<h2 class="showhide_heading" id="Open_a_Component_in_a_pop-up_window:_Optional_window_parts">Open a Component in a pop-up window: Optional window parts</h2>
<strong>Subscription feature</strong><br />
When you use Action Javascript to open a Component in a pop-up window, you can now defined optional parts for the pop-up window. These optional parts include a header, footer and toolbar.<br />
<br />
<a href="javascript:void(0)" class="internal" onmouseover="return convertOverlib(this,'&nbsp;',['WIDTH=465','HEIGHT=501','BACKGROUND=img/wiki_up/optional_window_parts.png']);">
	<img src="images/optional_window_parts.png" height="506" width="467" alt="Image" /></a><br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/AdvancedOptions_PopupAjaxWindows.swf" rel="external nofollow">Watch Video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" />.<br />
<h2 class="showhide_heading" id="Grid_and_Dialog_Component_-_Message_Box_Action_-_Advanced_Message_Box">Grid and Dialog Component - Message Box Action - Advanced Message Box</h2>
<strong>Subscription feature</strong><br />
When you create an action to display a message box, instead of using the built-in Javascript 
	alert() and confirm() functions, which are very primitive, and do not allow 
	custom styling, you can now choose an advanced option which allows you to 
	create a styled message box that uses the A5.messageBox() function in the 
	Alpha Anywhere Javascript library. Also, when you use the advanced option you can define custom buttons to appear on the dialog. You are not limited to OK, Cancel, Yes and No.<br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/AdvancedMessageBox.swf" rel="external nofollow">Watch video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<br />
Message box builder with the Advanced option selected:<br />
<br />
Note that the builder allows you to control the button labels, the Javascript that gets executed when any of the buttons gets clicked, and the justification of the buttons.<br />
<br />

	<img src="images/advancedmessagebuilder.jpg" alt="Image" /><br />
<br />
The image below shows a message box created with the built-in Javascript alert() function.<br />
<br />

	<img src="images/alertmessagebox.jpg" alt="Image" /><br />
<br />
Here is a message box using the advanced options.<br />
<br />

	<img src="images/advancedMessage.jpg" alt="Image" /><br />
<h2 class="showhide_heading" id="Grid_and_Dialog_Component_mdash_Fade-Out_Message">Grid and Dialog Component &mdash; Fade-Out Message</h2>
Subscribers can define an action to display a message that automatically fades out of view over a certain interval. Fade-out messages are ideal for providing feedback to a user to indicate, for example, that some action has been completed.<br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/FadeOutMessageAction.swf" rel="external nofollow">Watch video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Also_see">Also see</h2>
<a href="../../New Web Components V11/Google Map Component V11.html#Google Map Component Action JavaScript actions" title="Google Map Component V11" class="wiki">Google Map Component Action JavaScript actions</a>,

	
	
	<p>
	<a href="../../New Web Components V11/Google Map Component V11.html#Using a Map as an Alternate Grid View" title="Google Map Component V11" class="wiki">Using a Map as an Alternate Grid View</a>, 
	</p>
	<p>
	<a href="../../View/Control Panel/Web Projects Control Panel Enhancements.html" title="Web Projects Control Panel Enhancements V11" class="wiki">Web Projects Control Panel Enhancements </a><br />
<br />

	
	
	</p>

	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Action+Javascript+Improvements+V11">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA:{"tags":"web","status":"pending","keywords":"server,guide,actionjs"}--->
</body></html>