	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			<h2>User Defined Watch Events</h2>
<p>The client-side Calculated fields, Show/hide fields, Enable expressions and  Conditional styles are all implemented using 'watch' events. For example, if you  examine the source in the Browser for a page the defines a calculated field for  'extendedtotal' using the expression 'round(price * quantity,2)', you will see  the following Watch event has been defined automatically:</p>
<pre id="line1303" class="xbasic">
GRID1_GridObj._gridRowWatches<a class="wiki"  href="'CALC_G_EXTENSION'" rel="">'CALC_G_EXTENSION'</a> = {
watch: <a class="wiki"  href="'PRICE','QUANTITY'" rel="">'PRICE','QUANTITY'</a>,
on<x>change: function(data) {
var PRICE = $u.s.toNum($gvs('GRID1.V.R' + data.rowNumber + '.PRICE'));
var QUANTITY = $u.s.toNum($gvs('GRID1.V.R' + data.rowNumber + '.QUANTITY'));
GRID1_GridObj._setValue('G','EXTENSION',data.rowNumber,'' + $u.n.roundPRICE*QUANTITY),2<a href="tiki-editpage.php?page=PRICE%2AQUANTITY%29%2C2" title="Create page: PRICE*QUANTITY),2" class="wiki wikinew">?</a>;
}
}
</pre>
<p>The above Javascript adds a new watch event (called 'CALC_G_EXTENSION'). It  watches the PRICE and QUANTITY fields. The on<x>change event gets passed an object  called 'data' that has the rowNumber of the row in which the change takes place.  It then gets to local variables, PRICE and QUANTITY which are the values in the  corresponding controls in the Grid part. Finally, it uses the ._setValue()  method to set the value of the EXTENSION field to the result of the  expression.</p>
<p>You can define your own custom Watch events if the automatically generated  watch events (defined when you create a client-side calculated field, etc.) do  not do exactly what you want. In most cases you should not need to use custom  Watch events, but for power users, its nice to have this capability. You can  define Custom Watch events for the Search part, Grid part and Detail View part.  Go to the 'Javascript- Other' section in the appropriate properties page and  click the builder for 'Watch events'.</p>
<p>You can create as many watch events as you want. For each watch event, you  specify a unique (arbitrary) name to identify the event, the names of the fields  you want to watch and the javascript to execute when the value in any of the  watched fields is changed.</p>
<p>When you define the watch event, you can (optionally) use special 'helper'  functions to simplify your javascript. For example the helper function  *$('quantity') expands to:</p>
<p>$gvs('GRID1.V.R' + data.rowNumber + '.QUANTITY').</p>
<p>The above example Watch event could be written using 'helper' functions as  follows:</p>
<p class="xbasic">GRID1_GridObj._gridRowWatches<a class="wiki"  href="'CALC_G_EXTENSION'" rel="">'CALC_G_EXTENSION'</a> = {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  watch: <a class="wiki"  href="'PRICE','QUANTITY'" rel="">'PRICE','QUANTITY'</a>,</p>
<p class="xbasic">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on<x>change: function(data) {</p>
<p class="xbasic">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var PRICE = *gvn('PRICE');<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var QUANTITY =  *gvn('QUANTITY');<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  *svs('Extension',$u.n.roundPRICE*QUANTITY),2<a href="tiki-editpage.php?page=PRICE%2AQUANTITY%29%2C2" title="Create page: PRICE*QUANTITY),2" class="wiki wikinew">?</a>;</p>
<p class="xbasic">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p class="xbasic">}</p>
<p>(Note: 'Helper' functions can only be used when you create custom watch  events. The 'helper' functions all start with * and are documented in the Watch  Event builder.)</p>
<!-- startAnchor --><a name="Example - How to Dynamically Set a Field Label"></a><!-- endAnchor -->
<h3>Example - How to Dynamically Set a Field Label</h3>
<p>The generic Javascript Watch events make it very easy to dynamically set a  control's label at run-time.</p>
<p>For example, say that your Grid has a field called 'COUNTRY'. If the value in  COUNTRY is 'USA', you want to set the label on the ZIP field to 'Zip code',  otherwise you want to set it to 'Postal Code'.</p>
<p>NOTE: This example assumes that the Grid is set to display data in Form  mode.</p>
<p>Here is how you would do it:</p>
<ol>
    <li>Create a new Javascript Watch event (Properties pane, Javascript section,  Watch event) and give it a name (any name will do).</li>
    <li>Set the type to 'Other'.</li>
    <li>Specify that the field you want to watch is COMPANY (this means that  whenever the value in the COMPANY field changes, the Javascript that sets the  label value will execute).</li>
    <li>Enter this code for the Watch event:</li>
</ol>
<p class="xbasic">var COMPANY = *gv('COMPANY');<br />
var labelValue = 'Zip  code';<br />
if( COMPANY != 'USA') labelValue = 'Postal Code';  <br />
$('{grid.componentname}.LBL.R' + data.rowNumber + '.'+'ZIP'+'').innerHTML =  labelValue;</p>
<p>&nbsp;</p>
	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Grid+User+Defined+Watch+Events+V10">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA: {"tags":"web","group":"/Guides","status":"pending","keywords":"server,grid"} --->
</body></html>