	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			<h2>Xdialog ListBoxes - Dynamically Computing the Display Expression</h2>
<p>A common requirement in an Xdialog is to display a listbox showing data from  an array. The array is often a property array, and so the Xdialog displays data  from one of the properties in the array.</p>
<p>For example, the property array shown below has 'fname' and 'lname'  properties, and the Xdialog shows the value in the 'lname' property:</p>
<p class="xbasic">dim arr[0] as p<br />
arr[].fname = "Sam"<br />
arr[..].lname =  "Raven"<br />
arr[].fname = "Charles"<br />
arr[..].lname = "Chambliss"<br />
arr[].fname  = "Dion"<br />
arr[..].lname = "Smits"</p>
<p class="xbasic">&nbsp;</p>
<p class="xbasic">&nbsp;</p>
<p class="xbasic">ui_dlg_box("Show Lname",<<%dlg%</p>
<p class="xbasic">[.50,20index^#arr[[[\].lname];</p>
<p class="xbasic">%dlg%)<br />
<br />
&nbsp;</p>
<p>The resulting Xdialog looks like this:</p>
<p>	<img src="images/XdialogShowingSingleProperty.jpg" height="136" width="298" alt="Image" /></p>
<p>&nbsp;</p>
<p>But, what if you wanted the listbox to show both the 'fname' and 'lname'  property? You could pre-process the array and add a new property called (say)  'Display' value to the array and then display that property in the array. But a  better approach is to use the new option to dynamically calculate the display  property of the listbox. This is done by using a special owner draw format.</p>
<p>The owner draw format is =<i>expression</i>, where expression is some  <i>expression</i> that you want to evaluate. The expression can reference a  special variable called value that passes in a reference to the current row in  the array.</p>
<p>Here of some examples of owner draw formats:</p>
<p>&nbsp;</p>
<table style="BORDER-COLLAPSE: collapse" id="table1" border="1" cellspacing="1" cellpadding="3">
    <tbody>
        <tr>
            <td width="274">%O==eval(value+ "." + propertyName)%&nbsp;&nbsp;</td>
            <td>In this example, <i>propertyName</i> is a variable that contains the name of  the property (e.g. 'fname' or 'lname') that you want to display</td>
        </tr>
        <tr>
            <td width="274">%O==eval(value+".fname+' '+" + value + ".lname" )</td>
            <td>In this example, the expression returns the 'fname' and 'lname' properties  of the array.</td>
        </tr>
        <tr>
            <td width="274">%O==testFNvalue<a href="tiki-editpage.php?page=value" title="Create page: value" class="wiki wikinew eval">?</a>%</td>
            <td>In this example, another UDF (testFN()) is called to compute the display  value in the listbox.</td>
        </tr>
    </tbody>
</table>
<p>&nbsp;</p>
<p>Here is an example that demonstrates the use of these format  strings:</p>
</div>
<p class="xbasic">dim arr[0] as p<br />
arr[].fname = "Sam"<br />
arr[..].lname =  "Raven"<br />
arr[].fname = "Charles"<br />
arr[..].lname = "Chambliss"<br />
arr[].fname  = "Dion"<br />
arr[..].lname = "Smits"<br />
<br />
index = 1<br />
dim fmt as c =  ".fname"<br />
ui_dlg_box("Owner Draw Listbox - Computed  Display",<<%dlg%<br />
{wrap=40}<br />
{repaint_begin=fmt}<br />
Select the  property to  display:;<br />
[.10fmt^={.fname,.lname}];<br />
[%O==eval(value+fmt)%.50,5index^#arr];<br />
Listbox  can show an expression showing a calculation involving properties in the  array:;<br />
[%O==eval(value+".fname+' '+" + value + ".lname"  )%.50,5index^#arr];<br />
A more complex expression:;<br />
[%O==eval("upper(" +  value+".fname)+' '+" + value + ".lname" )%.50,5index^#arr];<br />
You can call a  UDF to compute the data to display:;<br />
\(This is the most flexible  option.);<br />
[%O==testFNvalue<a href="tiki-editpage.php?page=value" title="Create page: value" class="wiki wikinew eval">?</a>%.50,5index^#arr];<br />
{repaint_end}<br />
<br />
%dlg%)<br />
<br />
'value  is a placeholder for 'arr'. eval(value) passes in the the current row in the  array to the function.<br />
<br />
<br />
function testFN as c (ar as p)<br />
testFN =  upper(ar.lname) + ", " + f_upperar.fname<a href="tiki-editpage.php?page=ar.fname" title="Create page: ar.fname" class="wiki wikinew lower">?</a><br />
if ar.lname = "chambliss"  then <br />
testFN = "{I:'$$generic.orb.green.small'} " + testFN<br />
else<br />
testFN  = "{I:'$$generic.orb.blue.small'} " + testFN<br />
end if <br />
<br />
end function</p>
<p class="xbasic">&nbsp;</p>
<p class="xbasic">&nbsp;</p>
<p class="xbasic">	<img src="images/XdialogShowingMultipleOwnerDrawFromatStrings.jpg" height="476" width="284" alt="Image" /></p>
	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Xdialog+ListBoxes+Dynamically+Computing+the+Display+Expression+V10">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA: {"tags":"desktop","status":"pending","keywords":"desktop,guide,xdialog","group":"/Guide/Desktop/Design/View/Xdialog/"} --->
</body></html>