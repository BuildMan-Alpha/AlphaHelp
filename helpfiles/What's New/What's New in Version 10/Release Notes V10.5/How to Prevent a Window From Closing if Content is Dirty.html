	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			<h1 class="showhide_heading" id="How_to_Prevent_a_Window_From_Closing_if_Content_is_Dirty">How to Prevent a Window From Closing if Content is Dirty</h1>
A user asked this question: A Grid has a button that opens a popup Ajax window in which an .a5w page is shown. This .a5w page contains an editable Grid (called say 'childGrid') . The user wants to prevent the window in which the .a5w page is being show from being closed if 'childGrid' is dirty. Here is how this can be done:<br />
<br />
In the Action Javascript for the button that opens the .a5w page in a window, put this code in the onBeforeHide event:<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox" ><span style="color: #000066; font-weight: bold;">if</span><span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">typeof</span> window.<span style="color: #660066;">top</span>.<span style="color: #660066;">myGridIsDirty</span> <span style="color: #339933;">==</span> <span style="color: #3366CC;">'undefined'</span><span style="color: #009900;">&#41;</span> <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">;</span>
<span style="color: #000066; font-weight: bold;">if</span><span style="color: #009900;">&#40;</span>window.<span style="color: #660066;">top</span>.<span style="color: #660066;">myGridIsDirty</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    A5.<span style="color: #660066;">msgBox</span>.<span style="color: #660066;">show</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'Warning'</span><span style="color: #339933;">,</span><span style="color: #3366CC;">'Grid is dirty'</span><span style="color: #339933;">,</span><span style="color: #3366CC;">'O'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #003366; font-weight: bold;">false</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span> <span style="color: #000066; font-weight: bold;">else</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre></div><br />
<br />
As you can see, 'myGridIsDirty' is an arbitrary global Javascript variable.<br />
<br />
Then, in the Grid builder for the child Grid, add this code to the onDetailViewStateChange client side system event:<br />
<br />
<div class="plugincode" parse="javascript"><pre class="codelisting" data-syntax="javascript" dir="ltr" style="overflow:auto;" id="codebox1" >window.<span style="color: #660066;">top</span>.<span style="color: #660066;">myGridIsDirty</span> <span style="color: #339933;">=</span> e.<span style="color: #660066;">isDirty</span></pre></div><br />
<br />
Note that since the Grid is running in an IFrame (because it is on an .a5w page), we need to use the 'window.top' prefix to ensure that the global variable is being set in the correct location (not at the level of the IFrame window).<br />
<br />
If the child grid does not have a Detail View, but has editable rows, then instead of putting this code in the onDetailViewState change event, you would use the onGridStateChange event. (onGridStateChange is a new event that was added in this release.)<br />

	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:How+to+Prevent+a+Window+From+Closing+if+Content+is+Dirty">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA: "{}" --->
</body></html>