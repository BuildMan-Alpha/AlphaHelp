	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			<h2 class="showhide_heading" id="Building_Multi-Tenant_Applications_-_Dynamic_Connection_Strings">Building Multi-Tenant Applications - Dynamic Connection Strings</h2>
A multi-tenant application is an application that is shared by many different customers. Salesforce.com is a good example of a multi-tenant application.<br />
<br />
There are typically two different approaches to building a multi-tenant application. These are:<br />
<ul><li>All tenants share the same database, but each table in the database has a 'tenantId' field which identifies the tenant. Every query that is executed includes the tenantId in the WHERE clause. The tentantId is set when the customer logs into the application.
</li><li>Each tenant has its own database.
</li></ul>The second approach is much easier to code because you don't have worry about adding the 'tenantId' field into every query and insert statement. However, it is less scalable because you need to provision a new database for every tenant.<br />
<br />
To support the second approach it is necessary to have 'dynamic' named connections.<br />
<br />
This update introduces the concept of dynamic named connections in the Grid component. Here is how they work:<br />
<br />
You <em>must </em>name your connection string <strong>'DynamicConnection_&lt;<em>some name of your choice</em>&gt;'</strong>. For example:<br />
<span style="color:blue; background:">DynamicConnection_MyAppConnection</span><br />
<br />
Then, after the user has logged in, you must have an A5W page that sets a protected session variable called '__protected__&lt;<em>some name of your choice</em>&gt;'. For example:<br />
<span style="color:blue; background:">session.__protected__MyAppConnection = "Your connection string"</span><br />
<br />
<strong>NOTE</strong>: Dynamic connections only apply to SQL Grid and Dialog (V11 style Dialog) components. They do NOT apply to old style (V10 and prior) Dialog components, or to any Xbasic code that you add to .A5W pages yourself. However, in any Xbasic code you write, if instead of opening the connection yourself (using the connection object's <strong>.open()</strong>) method you use the <strong>a5SQLConnectionOpen()</strong> function, your dynamic connection strings will be resolved correctly.<br />
<br />
When the user runs a Grid or Dialog component, if the named connection string starts with <strong>'DynamicConnection_'</strong>, then Alpha Five will look for the appropriate protected session variable. If the variable exists, the named connection will be resolved to the value of the protected session variable. If the variable does not exist, then the named connection string will be resolved in the standard way, by looking up its value from data defined in the a5_application.a5i file.<br />
<h2 class="showhide_heading" id="See_also">See also</h2>
<a href="../../../How to__ELLIPSES__/How to dynamically connect to a database using an encrypted password.html" title="How to dynamically connect to a database using an encrypted password" class="wiki">How to dynamically connect to a database using an encrypted password</a><br />
<br />

	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Building+Multi-Tenant+Applications+Dynamic+Connection+Strings+V10.5">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA: {"tags":"web","group":"/Guide/Server/Design/Data/SQL/","status":"pending","keywords":"server,sql"} --->
</body></html>