	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			<h1 class="showhide_heading" id="Server-side_Action_Scripting">Server-side Action Scripting</h1>
As we saw in <a href="Genies for New Dialog Component V11.html" title="Genies for New Dialog Component V11" class="wiki">Genies for New Dialog Component V11</a>, server-side Action Scripting can generate code for several major scenarios appropriate for the dialog <strong>afterDialogValidate</strong> and <strong>onDialogInitialize</strong> event handlers:<br />
<br />
<a href="javascript:void(0)" class="internal" onmouseover="return convertOverlib(this,'&nbsp;',['WIDTH=528','HEIGHT=539','BACKGROUND=img/wiki_up/server-side_actions_select_an_action.png']);">	<img src="images/server-side_actions_select_an_action.png" height="269" width="264" alt="Image" /></a><br />
<br />
In addition to the action to save the data in a database (note that subscribers can display a fade out confirmation message to the user if the data was successfully saved when the user clicks the Submit button)<br />
<br />
<a href="javascript:void(0)" class="internal" onmouseover="return convertOverlib(this,'&nbsp;',['WIDTH=614','HEIGHT=518','BACKGROUND=img/wiki_up/save_submitted_data_to_tables.png']);">	<img src="images/save_submitted_data_to_tables.png" height="259" width="307" alt="Image" /></a><br />
<br />
it can also create an action to send an email<br />
<br />
<a href="javascript:void(0)" class="internal" onmouseover="return convertOverlib(this,'&nbsp;',['WIDTH=764','HEIGHT=648','BACKGROUND=img/wiki_up/send_email_message_ssa.png']);">	<img src="images/send_email_message_ssa.png" height="324" width="382" alt="Image" /></a><br />
<br />
and an action to populate the Dialog from one or more tables.<br />
<br />
<a href="javascript:void(0)" class="internal" onmouseover="return convertOverlib(this,'&nbsp;',['WIDTH=764','HEIGHT=650','BACKGROUND=img/wiki_up/populate_dialog_with_data.png']);">	<img src="images/populate_dialog_with_data.png" height="325" width="382" alt="Image" /></a><br />
<br />
See video D20 for more details. <a class="wiki external" target="_blank" href="http://news.alphasoftware.com/v11preview/videos_v11.htm" rel="external nofollow">Click here to see all Videos.</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Save_Submitted_Data_To_Tables_-_SQL_-_Geocoding_Addresses">Save Submitted Data To Tables - SQL - Geocoding Addresses</h2>
<strong>Subscription feature</strong><br />
<br />
When you save a record, you can  automatically geocode addresses in the data at the same time the record is saved. This option only applies to SQL tables. For example, assume that the Dialog prompts for an address, city, state, postal code and country field and that the table to which the Dialog is bound has a latitude and longitude field.<br />
<br />
When the record is saved after edits, or a new record is added you can automatically geocode the address in the address fields and get the latitude and longitude for the address and store those values in the table's latitude and longitude fields.<br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/Dialog_Geocode1.swf" rel="external nofollow">Watch Video - Part 1</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/Dialog_Geocode2.swf" rel="external nofollow">Watch Video - Part 2</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<br />
When you edit the Server Side action to save data to tables, you will see the additional properties for Geography Fields. This is where you can define that you want to geocode addresses when the record is saved.<br />
<br />
	<img src="images/saveRecordDialog_geographyfields.jpg" alt="Image" /><br />
<h2 class="showhide_heading" id="Save_Submitted_Data_To_Tables_-_SQL_-_Compute_Geography_Field_from_Latitude_Longitude_Values">Save Submitted Data To Tables - SQL - Compute Geography Field from Latitude/Longitude Values</h2>
<strong>Subscription feature</strong><br />
<br />
If a table has a Geography/Geometry field, when you edit the table and change either the latitude or longitude value on which the Geography/Geometry field is based, you can automatically compute a new value for the Geography/Geometry field. Encoding the Geography/Geometry field value is important if you want to do Geography searches on your data.<br />
<br />
<a class="wiki external" target="_blank" href="http://www.ajaxvideotutorials.com/V11Videos/Dialog_ServerSideEvents_SaveRecord.swf" rel="external nofollow">Watch video</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /><br />
<h2 class="showhide_heading" id="Security_Actions">Security Actions</h2>
The dialog includes Action Scripting options in the Server-side events to manage user information in the web security system. These action scripts include field mapping to allow the use of any field name in the dialog for the security fields.<br />
<br />
Only security fields that are active in the current security configuration are shown in the genie. There are three actions available.<br />
<br />
<strong>Load Web Security Values</strong> Allows you to load data for a particular user from the Security Framework into controls in a Dialog component.<br />
<br />
	<img src="images/SecurityActionScriptGenie.png" alt="Image" /><br />
<br />
This will populate the controls with data from the web security system based on some user value passed to the action. It is added to the <strong>onDialogInitialize </strong>Server-side event. The value to identify the user can be passed to the action as a session variable, request variable, component rtc variable, or as an argument.<br />
<br />
	<img src="images/SelectSecurityFindVar.png" alt="Image" /><br />
<br />
The value can be the userid, user identifier (guid), or ulink value associated with the record.  It is recommended in Alpha Five V11 to use the security userid as the linking value to any external user table.  The security userid value can be added to the external table to find a user record in that table.<br />
<br />
The action returns a number of values, including the security value in each control as <strong>e.control.&lt;fieldname&gt;</strong>.<br />
<br />
<strong>Validate Web Security Values</strong> Allows you to validate data before saving it back to the Security Framework tables.<br />
<br />
This will validate the values that will be saved in the web security system. It is added to the <strong>dialogValidate </strong>Server-side event.  The validation is based on the security settings and will return a number of values, including <strong>dialogValidate.hasError</strong>.  If other events have security action scripting defined, the option <strong>Load Saved Values</strong> on the genie will load the field mapping from the other event.<br />
<br />
<strong>Save Web Security Values</strong> Allows you to save submitted data to the Security Framework tables.<br />
<br />
This will save the values to the web security system. It is added to the afterDialogValidate Server-side event.  The action returns a number of values, including the security value saved for each control as <strong>rtc.data.&lt;fieldname&gt;</strong>. If other events have security action scripting defined, the option <strong>Load Saved Values</strong> on the genie will load the field mapping from the other event.<br />
<h2 class="showhide_heading" id="Post-creation_work_with_Server-side_Action_Scripts">Post-creation work with Server-side Action Scripts</h2>
Once you have created a server-side action you can edit it and convert it to Xbasic. You can also look at the variables exposed by the action.<br />
<br />
	<img src="images/ss_action_scripting_after_the_fact.png" alt="Image" /><br />
<br />
The Server-side Action Scripting mechanism would be easy for us to extend to other actions; we're open to suggestions.<br />
<h2 class="showhide_heading" id="Videos">Videos</h2>
<a href="Videos for New Dialog Component V11.html" title="Videos for New Dialog Component V11" class="wiki">Videos for New Dialog Component V11</a><br />
<a href="Videos for Dialog Component - Managing Data in the Security Framework V11.html" title="Videos for Dialog Component - Managing Data in the Security Framework V11" class="wiki">Videos for Dialog Component - Managing Data in the Security Framework V11</a><br />
<h2 class="showhide_heading" id="See_Also">See Also</h2>
<a href="../../Web Grid Enhancements V11/Web Grid Miscellaneous Enhancements V11/Action Javascript Improvements V11.html#Dialog_Component:_Populate_controls_from_data" title="Action Javascript Improvements V11" class="wiki">Action Javascript Improvements V11</a><br />

	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Server-side+Action+Scripting+V11">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA: {"tags":"web,review","group":"/Guide/Server/Design/Platform/Xbasic Action Scripting/","status":"pending","notes":"v11 in text a lot of places","keywords":"server,security,guide,actionxb","pagename":"Server-side Action Scripting"} --->
</body></html>