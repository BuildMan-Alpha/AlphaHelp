	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			<p class=A3Topic>Smart Fields in Xdialogs</p>
<p>The following script creates a dialog with several smart fields:</p>

 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>Tbl = table.current()</p>
<p class=Code>Original_Filename = tbl.filename_get()</p>
<p class=Code>Tbl = table.reset("clients")</p>
<p class=Code>spin = 1</p>
<p class=Code>date1 = date()</p>
<p class=Code>number = 345.23</p>
<p class=Code>result=ui_dlg_box("Smart Fields",<<%dlg%</p>
<p class=Code>{ysize=2}</p>
<p class=Code>{region}</p>
<p class=Code>This script demonstrates several kinds of "smart fields".;</p>
<p class=Code>{endregion};</p>
<p class=Code>{region}</p>
<p class=Code>Filename:| [%fText files(*.txt)|Doc files(*.doc)%.52filename];</p>
<p class=Code>Spin:| [%s1,10%.32spin];</p>
<p class=Code>Field:| [%d%.32field];</p>
<p class=Code>{endregion};</td> </tr> </table><p>The next three smart fields are "user defined" smart fields:</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>{region}</p>
<p class=Code>The next three smart fields are "user defined" smart fields.;</p>
<p class=Code>{endregion};</p>
<p class=Code>{region}</p>
<p class=Code>Path:| [%p=ui_get_path("Enter Path","c: ","c:\windows\ ");I=$a5_folder%.30path];</p>
<p class=Code>Date:| [%P=popup.calendar( dtoc(date1) );I=popup.calendar%.30date1];</p>
<p class=Code>Number: | [%P=popup.calculator(number);I=popup.calculator%.30number];</p>
<p class=Code>{endregion};</p>
<p class=Code><*15&OK>;</p>
<p class=Code>%dlg% )</p>
<p class=Code>table.reset(original_filename)</td> </tr> </table><p>This script creates this dialog: </p>
<p class=Pix> <img src="images/Smart_Fields.gif" x-maintain-ratio=TRUE style="border: none; width: 340px; height: 344px; float: none; border-style: none; border-style: none;" width=340 height=344 border=0></p>
<p class=PixCaption>Lesson 5: Smart Fields</p>
<p class=A5><a name=File_Select_Smart_Field>File Select Smart Field</a></p>
<p>When the user clicks the 'Open File' icon on the 'Filename' field, the following dialog is displayed: </p>
<p class=Pix> <img src="images/XD_File_Smartfield.gif" x-maintain-ratio=TRUE style="border: none; width: 563px; height: 416px; float: none; border-style: none; border-style: none;" width=563 height=416 border=0></p>
<p>This is the standard File Open dialog for your operating system. In the case of the above dialog, this is the dialog displayed by Windows 2000. The dialog will look different for Windows 98 or XP.</p>
<p>The formatting code used in the above script for the File Select smart field is:</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>[%fText files(*.txt)|Doc files(*.doc)%.52filename]</td> </tr> </table><p>Immediately following the 'f' formatting option, the text <span class=Code1>Text files(*.txt)</span> designates the text that appears in the 'Files of type:' field on the dialog. The dialog will display files that match the mask <span class=Code1>*.txt</span> with the description 'Text files' next to it. The 'Files of type:' field on the dialog is a drop-down combo box. If you open this dialog, you will see other file filters. These filters are specified in the format string using the '|' separator. In the above case, a second file filter has been supplied. This is <span class=Code1>Doc files(*.doc)</span>. If you select this entry in the 'Files of type:' combo box, then the dialog will display all of the .doc files in the folder.</p>
<p>You can set the default path for the dialog when it opens by initializing the text box variable.</p>
<p>In the above case, if you wanted to display the 'c:\windows' folder when the dialog was opened, you would initialize the 'filename' variable before the dialog was displayed. For example:</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>Filename = "c:\windows"+chr(92)</td> </tr> </table><p class=Note> <span class=Note> <img src="images/icon_warning.gif" x-maintain-ratio=TRUE style="border: none; width: 37px; height: 33px; float: none; border-style: none; border-style: none;" width=37 height=33 border=0>Note</span> : chr(92) is the '\' character. You cannot set filename to "c:\windows\" because '\"' has special meaning. The '\' character is used to escape the quote when you want to include a quoted string within another quoted string.</p>
<p>When the user closes the file select dialog, the filename that was selected is stored in the 'filename' variable (in the case of the above example), and is displayed in the text box.</p>
<p class=A5><a name=Spin_Control_Smart_Field>Spin Control Smart Field</a></p>
<p>When you click on the up or down arrows of the spin control smart field the value in the control is increased or decreased by 1, until you reach the upper or lower limit specified in the spin control's definition. The formatting code to specify the spin control smart field is:</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>Spin:| [%s1,10%.32spin]</td> </tr> </table><p>The text '1,10' immediately following the 's' formatting code specifies the lower and upper limit of the spin control.</p>
<p class=A5><a name=Table_Field_Smart_Field>Table Field Smart Field</a></p>
<p>When the user clicks the 'Fields' icon on the Table Fields smart field, the following dialog is displayed: </p>
<p class=Pix> <img src="images/XD_Smart_Field_Table.gif" x-maintain-ratio=TRUE style="border: none; width: 357px; height: 238px; float: none; border-style: none; border-style: none;" width=357 height=238 border=0></p>
<p>Alpha Five displays the fields from the primary table or set in the session.</p>
<p>In the above example, we used the command:</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>Tbl = table.reset("clients")</td> </tr> </table><p>to change the primary table of the session to 'clients'.</p>
<p>When the user closes the dialog, the field selected is stored in the 'field' variable (in the case of the above example), and is displayed in the text box. Alpha Five returns the field name in the form <span class=Code1>table_name->field_name</span>.</p>
<p class=A5><a name=Filter_Expression_Smart_Field>Filter Expression Smart Field</a></p>
<p>The syntax for specifying a filter expression smart field requires the names of one or more tables.</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>ui_dlg_box("Define Filter Expression",<<%dlg%</p>
<p class=Code>Filter Expression [%P=a5_get_filter(".t.","customer.dbf", .t.)%.50filter];</p>
<p class=Code>%dlg%)</td> </tr> </table><p class=A5><a name=Order_Expression_Smart_Field>Order Expression Smart Field</a></p>
<p>The syntax for specifying an order expression smart field requires the names of one or more tables.</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>ui_dlg_box("Define Order Expression",<<%dlg%</p>
<p class=Code>Order Expression [%P=a5_get_order("","customer.dbf", .t.)%.50order];</p>
<p class=Code>%dlg%)</td> </tr> </table><p class=A5><a name=User_Defined_Smart_Fields>User Defined Smart Fields</a></p>
<p>Alpha Five allows you to define your own smart fields. You can specify what function to call when the user clicks the smart field icon, and you can specify the bitmap to use for the smart field icon.</p>
<p>The syntax for specifying a user defined smart field is:</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>[%p=function%.SizeVarname] (uses the default icon)</p>
<p class=Code>[%p=function;I=bitmap%.SizeVarname] (uses custom icon)</td> </tr> </table><p>where function is the name of the function to call, size is the size of the text box control, <span class=Code1>varname</span> is the name of the variable that the smart field will set, and bitmap is the name of the bitmap to display.</p>
<p class=Note> <span class=Note> <img src="images/icon_warning.gif" x-maintain-ratio=TRUE style="border: none; width: 37px; height: 33px; float: none; border-style: none; border-style: none;" width=37 height=33 border=0>Note</span> : Advanced users should note that you can also specify the name of an event, rather than a function name for the user defined smart field. Event handling is covered later in this tutorial.</p>
<p class=A5>Date Smart Field</p>
<p>When the user clicks the icon on the 'Date' smart field, this dialog is displayed: </p>
<p class=Pix> <img src="images/XD_Smart_Field_Date.gif" x-maintain-ratio=TRUE style="border: none; width: 254px; height: 162px; float: none; border-style: none; border-style: none;" width=254 height=162 border=0></p>
<p>The 'Date' smart field is defined&nbsp;as&nbsp;follows:</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>[%P=popup.calendar( dtoc(date1) );I=popup.calendar%.30date1]</td> </tr> </table><p>POPUP.CALENDAR()is a built-in Alpha Five function that displays a pop-up calendar. It takes an optional character parameter which is the default date to display when the calendar is opened. The command <span class=Code1>dtoc(date1)</span> converts the value in date1 (a date value) to a character value.</p>
<p class=A5>Path Smart Field</p>
<p>When the user clicks the icon on the 'Path' field, this dialog is displayed: </p>
<p class=Pix> <img src="images/XD_Smart_Field_Path.gif" x-maintain-ratio=TRUE style="border: none; width: 470px; height: 284px; float: none; border-style: none; border-style: none;" width=470 height=284 border=0></p>
<p>The 'Path' user defined smart field is defined&nbsp;as&nbsp;follows:</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code>[%p=ui_get_path("Enter Path","c: ", "c:\windows\ ");I=$a5_folder%.30path]</td> </tr> </table>

<p> <a href="../../../References/Functions/UI_GET_PATH Function.html" title="UI_GET_PATH Function" class="wiki">UI_GET_PATH(</a>)is a built-in Alpha Five function. $a5_folder is a built-in Alpha Five bitmap.</p>
<p class=Note> <span class=Note> <img src="images/icon_warning.gif" x-maintain-ratio=TRUE style="border: none; width: 37px; height: 33px; float: none; border-style: none; border-style: none;" width=37 height=33 border=0>Note</span> : To see a list of all built-in Alpha Five bitmaps, use the <a href="../../../References/Methods/A5.BITMAP_ENUM Method.html" title="A5.BITMAP_ENUM Method" class="wiki">A5.BITMAP_ENUM(flag</a>) method. Flag = "" returns the bitmaps defined in the current database, flag = 512 returns the bitmaps used by Alpha Five's toolbars and menus, flag = 1024 returns the system bitmaps. Another way to see all of the built-in images is to use the Code, Insert Image Name command while editing a script in the <span class=Screen>Code Editor</span>.</p>
<p class=A5>Number Smart Field</p>
<p>When the user clicks the icon on the 'Number' field, this dialog is displayed: </p>
<p class=Pix> <img src="images/XD_Smart_Field_Calculator.gif" x-maintain-ratio=TRUE style="border: none; width: 200px; height: 178px; float: none; border-style: none; border-style: none;" width=200 height=178 border=0></p>
<p>The 'Number' user defined smart field is defined&nbsp;as&nbsp;follows:</p>
 <table class="codeTable" style="x-cell-content-align: top; border-left-style: None; border-right-style: None; border-top-style: None; border-bottom-style: None; width: 100%; border-spacing: 0px; border-spacing: 0px;" cellspacing="0" width="100%"> <col style="width: 100%;"> <tr style="x-cell-content-align: top;" valign="top"> <td style="x-cell-content-align: top; width: 100%; padding-right: 10px; padding-left: 10px;" valign="top" width="100%"><p class=Code><a class="wiki"  href="%P=popup.calculator(number);I=calculator%.30number" rel="">%P=popup.calculator(number);I=calculator%.30number</a></td> </tr> </table><p> <span class=Code1>Popup.calculator(default_number)</span> is a built-in Alpha Five function. It displays a calculator with <span class=Code1>default_number</span>&nbsp;as&nbsp;the default entry in the calculator. The command <span class=Code1>popup.calculator(number)</span> opens the calculator and shows the existing value in the text box in the calculator.</p>
<p class=Note> <span class=Note> <img src="images/icon_warning.gif" x-maintain-ratio=TRUE style="border: none; width: 37px; height: 33px; float: none; border-style: none; border-style: none;" width=37 height=33 border=0>Note</span> : The Alpha Five popup calculator is not your average calculator! You can type any expression that you want into the text box on the calculator, using any of Alpha Five's hundreds of functions. You can also use parentheses for complex calculations, such&nbsp;as&nbsp; <span class=Code1>(sqrt(234)+123+45)/(15*6)</span>.</p>
<p class=A5>Next</p>
<p> <a href="The Code Editor Control.html" title="The Code Editor Control" class="wiki">The Code Editor Control</a></p>
<p class=A5>Supported By</p>
<p>Alpha Five Version 5 and Above</p>
<p class=A5>Limitations</p>
<p>Desktop applications only</p>
	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Smart+Fields+in+Xdialogs">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 -->
<!---HELPMETADATA: {"tags":"desktop"} --->
</body></html>