	<!DOCTYPE html>
	<html>
	<head>
	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" />
	<link rel="stylesheet" type="text/css" href="theme.css" />
	</head>
	<body>
	<div id="tiki-clean">
			<div id="tiki-mid">
	
 



 

	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 




<article id="top" class="wikitext clearfix nopagetitle">
			
		
		
		
		
			 

	
			<p class=A3Topic>Adding Users with a Web Component</p>

<p>
<b>Note:</b> This topic is obsolete for V11 and above. In V11 when you create a new Dialog component, you can choose from list of pre-defined Dialogs. Select the 'SecurityFramework-CreateNewUserAccount' entry in the list. See video D_SF_1 for more details.
</p>



<p>This example shows how to create a dialog component that will accept 
 all the information required to add a new user to the web user table. </p>



<p class=Pix>
<img src="images/WPT_New_User_Dialog.gif" width="450" height="214"></p>



<p>The controls on the dialog must have names that match fields currently being used by the web security settings. The actual fields being used will be different depending on the security options selected. </p>


<p class=A5>Getting the Current Field Names </p>


<ol>
  <li class=kadov-p-CListNumber>
    <p class=ListNumber>In the Database <span class=Screen> Control Panel</span> click <span class=Button>Interactive Window</span> to open the <span class="Screen">Interactive Window</span>.</p>


  </li>
  <li class=kadov-p-CListNumber>In the <span class="Screen">Interactive Window</span>, enter  the 
      following code and click <span class=Button>Enter</span>.</li>
  <table class="codeTable" style="x-cell-content-align: top;
          border-left-style: None;
          border-right-style: None;
          border-top-style: None;
          border-bottom-style: None;
          width: 100%;
          border-spacing: 0px;
          border-spacing: 0px;" cellspacing="0" width="100%">
    <col style="width: 100%;">
    <tr style="x-cell-content-align: top;" valign="top">
      <td style="x-cell-content-align: top;
        width: 100%;
        padding-right: 10px;
        padding-left: 10px;" valign="top" width="100%"><p class=Code>?a5ws_user_file_field_list()<br>
        = Guid<br>
        Password<br>
        RedirPage<br>
        Ulink<br>
        Userid</td>
    </tr>
  </table>
  <li class=kadov-p-CListNumber>This shows the field names currently available in the web users table. </li>
  <li class=kadov-p-CListNumber>There are two additional fields that can be used

    <ol>
      <li class="ListAlpha">"groups" - This field can be used to select security groups for the user.</li>
      <li class="ListAlpha">"confirm_password" - This field can be added to require entering a password a second time to validate the value.</li>
    </ol>
    
</li>
</ol>
<p class="A5">Creating the Dialog</p>


<ol>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>In the <span class=Screen>Web 
 Projects Control Panel</span> click <span class=Button>New > Web Component 
 > Next > Dialog > OK</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Select <span class=Button>Save</span>, 
 name the dialog component "NewUser", and click <span class=Button>Save</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Display the <span 
 class=Screen>Form > Controls</span> menu.</p>

</li>
  
  <li class=kadov-p-CListNumber>
    <p class=ListNumber>Add six controls. <span class="Note">NOTE:</span> If you are using password encryption, the max length for the password field must be at least 60 to allow space for the encypted value. </p>


  </li>
  
  
  <div align=center>
  <table style="x-cell-content-align: top;
          float: aligncenter;
          border-spacing: 0px;
          border-spacing: 0px;" cellspacing="0">
  <col>
  <col>
  <col>
  <col>
  <col>
  
  <tr style="x-cell-content-align: top;" valign="top">
  <td class="tableHeader" style="x-cell-content-align: top;" valign="top">
  <p class=TableHead>Control Type</td>
  <td colspan="1" class="tableHeader" rowspan="1" style="x-cell-content-align: top;" valign="top">
  <p class=TableHead>Name</td>
  <td colspan="1" rowspan="1" class="tableHeader" style="x-cell-content-align: top;" valign="top">
  <p class=TableHead>Label</td>
  <td colspan="1" rowspan="1" class="tableHeader" style="x-cell-content-align: top;" valign="top">
  <p class=TableHead>Data Type</td>
  <td class="tableHeader" style="x-cell-content-align: top;" valign="top">
  <p class=TableHead>MaxLength</td>
  <td class="tableHeader" style="x-cell-content-align: top;" valign="top">
    <p class=TableHead>Other Properties</td>
  </tr>
  
  <tr style="x-cell-content-align: top;" valign="top">
  <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>Textbox</td>
  <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>userid</td>
  <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>User ID</td>
  <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>Character</td>
  <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>20</td>
  <td rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">&nbsp;</td>
  </tr>
  
  <tr style="x-cell-content-align: top;" valign="top">
  <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>Textbox</td>
  <td colspan="1" class="TableCell" rowspan="1" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>password</td>
  <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>Password</td>
  <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>Character</td>
  <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
  <p class=TableLeft>60</td>
  <td rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Is a password field </td>
  </tr>
  
  <tr style="x-cell-content-align: top;" valign="top">
      <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Textbox</td>
    <td colspan="1" class="TableCell" rowspan="1" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>confirm_password</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Confirm Password</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Character</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>20</td>
    <td rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Is a password field </td>
    </tr>
  <tr style="x-cell-content-align: top;" valign="top">
      <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Dropdownbox</td>
    <td colspan="1" class="TableCell" rowspan="1" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>RedirPage</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Redirect Page</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    <td rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    </tr>
  <tr style="x-cell-content-align: top;" valign="top">
      <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Checkbox</td>
    <td colspan="1" class="TableCell" rowspan="1" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>groups</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Permissions</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    <td rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    </tr>
  <tr style="x-cell-content-align: top;" valign="top">
      <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>Hidden</td>
    <td colspan="1" class="TableCell" rowspan="1" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>guid</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    <td colspan="1" rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    <td rowspan="1" class="TableCell" style="x-cell-content-align: top;" valign="top">
    <p class=TableLeft>&nbsp;</p>

</td>
    </tr>
  </table>
  </div>
  <li class=kadov-p-CListNumber><p class=ListNumber>Select "<span class="Code">RedirPage</span>" 
 in the <span class=Control>Selected Controls</span> list.</p>

</li>
  
  <ol>
    
    <li><p>Click 
    <img src="images/Web_Properties_button.gif"
  x-maintain-ratio=TRUE
  style="border: none;
      width: 17px;
      height: 18px;
      float: none;
      border-style: none;
      border-style: none;"
  width=17
  height=18
  border=0> in <span class=Button>DropDownBox Properties > Choices</span> 
 to display the <span class=Screen>Define Choices</span> dialog.</p>

</li>
    
    <li><p>Set <span class=Button>Define 
 Choices > List Type</span> to "Dynamic".</p>

</li>
    
    <li><p>Set <span class=Button>Data 
 Source > Data source type</span> to "Variable".</p>

</li>
    
    <li><p>Set <span class=Button>Data 
 Source > Variable name</span> to "PageList".</p>


    </li>
    
    <li>Click <span class=Button>OK</span> 
 to continue.</li>
    </ol>
  
    <li class=kadov-p-CListNumber>Select "Groups" 
    in the <span class=Control>Selected Controls</span> list.</li>
    <ol>
      
      <li>
        <p>Click 
    <img src="images/Web_Properties_button.gif"
  x-maintain-ratio=TRUE
  style="border: none;
      width: 17px;
      height: 18px;
      float: none;
      border-style: none;
      border-style: none;"
  width=17
  height=18
  border=0> in <span class=Button>Checkbox Properties > Choices</span> 
          to display the <span class=Screen>Define Choices</span> dialog.</p>


      </li>
      <li>
        <p>Set <span class=Button>Define 
          Choices > List Type</span> to "Dynamic".</p>


      </li>
      <li>
        <p>Set <span class=Button>Data 
          Source > Data source type</span> to "Variable".</p>


      </li>
      <li>
        <p>Set <span class=Button>Data 
          Source > Variable name</span> to "GroupList".</p>


      </li>
      <li>
        <p>Click <span class=Button>OK</span> 
          to continue.</p>


      </li>
    </ol>
    <li class=kadov-p-CListNumber><p class=ListNumber>Display the <span 
 class=Screen>Form > Properties</span> menu.</p>


  </li>
  <li class=kadov-p-CListNumber><p class=ListNumber>Click 
  <img src="images/Web_Properties_button.gif"
  x-maintain-ratio=TRUE
  style="border: none;
      width: 17px;
      height: 18px;
      float: none;
      border-style: none;
      border-style: none;"
  width=17
  height=18
  border=0> in <span class=Button>Server Events > Initialize</span> 
    to display the <span class=Screen>Form Events</span> dialog. Enter the 
    following code and click <span class=Button>OK</span>.</p>


  </li>
  
  <table class="codeTable" style="x-cell-content-align: top;
          border-left-style: None;
          border-right-style: None;
          border-top-style: None;
          border-bottom-style: None;
          width: 100%;
          border-spacing: 0px;
          border-spacing: 0px;" cellspacing="0" width="100%">
  <col style="width: 100%;">
  
  <tr style="x-cell-content-align: top;" valign="top">
  <td style="x-cell-content-align: top;
        width: 100%;
        padding-right: 10px;
        padding-left: 10px;" valign="top" width="100%">
  <p class=Code>a5ws_get_webuser_values(CurrentForm)</td></tr>
  </table>
  <li class=kadov-p-CListNumber><p class=ListNumber>Click 
  <img src="images/Web_Properties_button.gif"
  x-maintain-ratio=TRUE
  style="border: none;
      width: 17px;
      height: 18px;
      float: none;
      border-style: none;
      border-style: none;"
  width=17
  height=18
  border=0> in <span class=Button>Server Events > Validate</span> 
    to display the <span class=Screen>Form Events</span> dialog. Enter the 
    following code and click <span class=Button>OK</span>.</p>


  </li>
  
  <table class="codeTable" style="x-cell-content-align: top;
          border-left-style: None;
          border-right-style: None;
          border-top-style: None;
          border-bottom-style: None;
          width: 100%;
          border-spacing: 0px;
          border-spacing: 0px;" cellspacing="0" width="100%">
  <col style="width: 100%;">
  
  <tr style="x-cell-content-align: top;" valign="top">
  <td style="x-cell-content-align: top;
        width: 100%;
        padding-right: 10px;
        padding-left: 10px;" valign="top" width="100%">
  <p class=Code>a5ws_save_webuser_values(CurrentForm)</td></tr>
  </table>
  <li class=kadov-p-CListNumber>
    <p class=ListNumber>Click 
    <img src="images/Web_Properties_button.gif"
  x-maintain-ratio=TRUE
  style="border: none;
      width: 17px;
      height: 18px;
      float: none;
      border-style: none;
      border-style: none;"
  width=17
  height=18
  border=0> in <span class=Button>Server Events > After Validate</span> 
    to display the <span class=Screen>Form Events</span> dialog. Enter the 
    following code and click <span class=Button>OK</span>.
    <strong>Note:</strong> If a new record was created in the Validate event, the new security record <span class="Code1">guid</span> value will be returned in the variable <span class="Code1">CurrentForm.Controls.Guid.Value</span>.  This <strong>MUST</strong> be passed back to the function <a href="../../References/Functions/A5WS_Get_WebUser_Values Function.html" title="Populates control values in a dialog component from fields in the User table" class="wiki">a5ws_get_webuser_values(</a>) to find the new record to reload the saved values.   </p>


  </li>
  
  <table class="codeTable" style="x-cell-content-align: top;
          border-left-style: None;
          border-right-style: None;
          border-top-style: None;
          border-bottom-style: None;
          width: 100%;
          border-spacing: 0px;
          border-spacing: 0px;" cellspacing="0" width="100%">
  <col style="width: 100%;">
  
  <tr style="x-cell-content-align: top;" valign="top">
  <td style="x-cell-content-align: top;
        width: 100%;
        padding-right: 10px;
        padding-left: 10px;" valign="top" width="100%">
  <p class=Code>Dim UserValue as p
  <p class=Code>UserValue.guid = alltrim(CurrentForm.Controls.Guid.Value)
  <p class=Code>a5ws_get_webuser_values(CurrentForm,UserValue)  </td></tr>
  </table>
  <li class=kadov-p-CListNumber><p class=ListNumber>Click 
  <img src="images/Web_Properties_button.gif"
  x-maintain-ratio=TRUE
  style="border: none;
      width: 17px;
      height: 18px;
      float: none;
      border-style: none;
      border-style: none;"
  width=17
  height=18
  border=0> in <span class=Button>Server Events > Activate</span> 
    to display the <span class=Screen>Form Events</span> dialog. Enter the 
    following code and click <span class=Button>OK</span>.</p>


  </li>
  
  <table class="codeTable" style="x-cell-content-align: top;
          border-left-style: None;
          border-right-style: None;
          border-top-style: None;
          border-bottom-style: None;
          width: 100%;
          border-spacing: 0px;
          border-spacing: 0px;" cellspacing="0" width="100%">
  <col style="width: 100%;">
  
  <tr style="x-cell-content-align: top;" valign="top">
  <td style="x-cell-content-align: top;
        width: 100%;
        padding-right: 10px;
        padding-left: 10px;" valign="top" width="100%">
  <p class=Code>pagelist = a5ws_get_page_list(request)</p>


  <p class=Code>grouplist = a5ws_get_groups(request,.T.)</p>

  </td></tr>
  </table>
  <li class=kadov-p-CListNumber>Note: If you want to allow the user to leave the redirect page blank, you can modify the <span class="Button">Activate</span> code as follows: </li>
    <table class="codeTable" style="x-cell-content-align: top;
          border-left-style: None;
          border-right-style: None;
          border-top-style: None;
          border-bottom-style: None;
          width: 100%;
          border-spacing: 0px;
          border-spacing: 0px;" cellspacing="0" width="100%">
      <col style="width: 100%;">
      <tr style="x-cell-content-align: top;" valign="top">
        <td style="x-cell-content-align: top;
        width: 100%;
        padding-right: 10px;
        padding-left: 10px;" valign="top" width="100%"><p class=Code>pagelist = ""+crlf()+a5ws_get_page_list(request)</p>

</td>
      </tr>
    </table>
    <li class=kadov-p-CListNumber><span class="ListNumber">Click <span class=Button>Save</span> and <span class=Button>Close</span>.</span></li>
</ol>

<p class=A5>Creating the Page</p>



<ol>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>In the <span class=Screen>Web 
 Projects Control Panel</span> click <span class=Button>New > A5W Page 
 > OK</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Select <span class=Button>Save</span>, 
 name the page "NewUser", and click <span class=Button>Save</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Click <span class=Button>Insert 
 Component > Select</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Select the "NewUser" 
 component and click <span class=Button>OK > OK</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Close the <span class=Screen>HTML 
 Editor</span> and return to the <span class=Screen>Web Projects Control 
 Panel</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Click <span class=Button>Web 
 Security > Page Security > OK</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Move NewUser.A5W 
 to the <span class=Control>Always Allowed</span> column and click <span 
 class=Button>OK</span>.</p>

</li>
</ol>

<p class=A5>Adding a New User</p>



<ol>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>In the <span class=Screen>Web 
 Projects Control Panel</span> click <span class=Button>Publish</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Select <span class=Button>All 
 files in project</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Clear <span class=Button>Publish 
 new or modified files only</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Click <span class=Button>Clear 
 Publishing History</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Select <span class=Button>Launch 
 browser after files are published</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>In the <span class=Control>Page 
 to show</span> list select "NewUser.a5w".</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Click <span class=Button>Publish</span>.</p>

</li>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>When the NewUser 
 page appears in your browser:</p>

</li>
  
  <ol>
    
    <li><p>Enter "ellen" 
 into <span class=Control>User ID</span>.</p>

</li>
    
    <li><p>Enter "ellen" 
 into <span class=Control>Password</span>.</p>

</li>
    
<li><p>Enter "ellen" 
 into <span class=Control>Confirm Password</span>.</p>

</li>    <li>
    <p>Select "Menu.a5w" 
 in <span class="Control">Redirect Page</span>.</p>


    </li>
    
    <li><p>Select "Accounting" 
 in <span class=Control>Permissions</span>.</p>

</li>
  </ol>
  
  <li class=kadov-p-CListNumber><p class=ListNumber>Click <span class=Button>Submit</span>. 
 </p>

</li>
</ol>

<p class=Pix>
<img src="images/WPT_Add_New_User_via_Web.gif"
          x-maintain-ratio=TRUE
          style="border: none;
              float: none;
              border-style: none;
              width: 476px;
              height: 350px;
              border-style: none;"
          width=476
          height=350
          border=0></p>



<p class=A5>Supported By</p>



<p>Alpha Five Version 8 Professional Edition and Above</p>



<p class=A5>Limitations</p>



<p>Web publishing applications only.</p>



<p class=A5>See Also</p>



<p><a href="../../Orphans/Contents - Web Publishing Tutorial.html" title="Contents - Web Publishing Tutorial" class="wiki">Contents</a>, <a href="../../Unclassified/White Papers.html" title="White Papers" class="wiki">White Papers</a>, <a class="wiki external" target="_blank" href="http://www.gregoryfca.com/blogs/alpha/documents/Alpha_RegisterWebUsersAFV10_WP_FINAL.pdf" rel="external nofollow">Registering Web Users in Alpha Five Version 10</a><img src="images/external_link.gif" alt="(external link)" width="15" height="14" title="(external link)" class="icon" /></p>

	
	
	<hr class="hrwikibottom" /> 

	
	</article> 




	<!-- WIKIPATH:Adding+Users+with+a+Web+Component">-->


	<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
				<div class="wikiinfo" style="float: left">



<span id="description"></span>

		</div>

	 
 
	</div> 
</div> 

			</div>
		</div>


	
	
<!-- Put JS at the end -->
	
<!-- jsfile external -->


<!-- jsfile dynamic -->
<!-- jsfile 0 --></body></html>