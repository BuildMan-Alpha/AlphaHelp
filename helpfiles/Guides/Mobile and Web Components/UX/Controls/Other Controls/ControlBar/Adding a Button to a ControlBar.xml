<page build="3922">
    <shortlink>Adding a Button to a ControlBar</shortlink>
    <topic>Adding a Button to a ControlBar</topic>
    <description>You can add a button to a ControlBar and then associate an action (i.e. some Javascript code) to run when the button is tapped.</description>
    <sections>
        <section>
            <description>To see how to add a button to a ControlBar watch the video or read the guide below.</description>
            <videos>
                <title>Adding a Button to a ControlBar</title>
                <description>In this video we show how you can add a button to a ControlBar and then associate an action (i.e. some Javascript code) to run when the button is tapped.</description>
                <date>2016-09-14</date>
                <video>
                    <name>Watch Video</name>
                    <link>https://www.viddler.com/v/957cf916</link>
                </video>
                <resources>
                    <resource>
                        <link>https://www.ajaxvideotutorials.com/V12Videos/uxControlBar_button.zip</link>
                    </resource>
                </resources>
            </videos>
        </section>
        <section>
            <description>This guide demonstrates how to create a button that can navigate through a list control using a javascript action.</description>
        </section>
        <section>
            <title>Add a Button with an SVG Icon to a ControlBar</title>
            <steps>
                <step>
                    <description>
                        In the UX Builder open the Properties page. Click on the [...] button next to the Style name
                        property in the UX Properties section.
                    </description>
                    <figure>
                        <link>images/addb.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        In the 'Select Style' dialog under 'Location' select 'System', then choose the 'Alpha'
                        style from the top of the list. Click OK
                    </description>
                    <figure>
                        <link>images/addb2.png</link>
                    </figure>
                    <note>Choosing the Alpha style will give you access to a large selection of pre-defined mobile SVG icons.</note>
                </step>
                <step>
                    <description>
                        Open the 'Controls' page. From the toolbar menu on the Controls page check the 'Mobile'
                        checkbox.
                    </description>
                    <figure>
                        <link>images/addb3.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Open the 'Panels' menu and click the [Panel Navigator]
                        option to add a Panel Navigator to the control.
                    </description>
                    <figure>
                        <link>images/addb4.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Highlight the Panel Navigator in the tree. Open the 'Containers menu' on the left and
                        click on the [Container] option.
                    </description>
                    <figure>
                        <link>images/addb5.png</link>
                    </figure>
                </step>

                <step>
                    <description>Select 'PanelHeader' from the Container Type list on the Insert Container dialog. Click 'Insert After.</description>
                    <figure>
                        <link>images/addb6.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Highlight the PanelHeader. Open the 'Other Controls' menu. Scroll down the list and select
                        [ControlBar] to add a control bar to the Panel Header.
                    </description>
                    <figure>
                        <link>images/addb7.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Highlight the ControlBar control. In the control properties list on the right click the
                        [...] button next to the ControlBar properties property to open the ControlBar Builder.
                    </description>
                    <figure>
                        <link>images/addb8.png</link>
                    </figure>
                </step>
                <step>
                    <description>In the ControlBar Builder open the 'Items' pane and click the 'Add ControlBar Item' button.</description>
                    <figure>
                        <link>images/addb9.png</link>
                    </figure>
                </step>
                <step>
                    <description>Select the 'button' option in the 'Item Type' list and click OK.</description>
                    <figure>
                        <link>images/addb10.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Still on the 'Items' pane, scroll down the button's properties list to the 'Button Settings'
                        section. Click the dropdown next to the 'Button layout' property and select 'Image only'.
                    </description>
                    <figure>
                        <link>images/addb11.png</link>
                    </figure>
                </step>
                <step>
                    <description>Click the [...] button next to the Icon property.</description>
                    <figure>
                        <link>images/addb12.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        In the Specify Image dialog check the 'SVG Icon' radio button and
                        then click the 'Select' button.
                    </description>
                    <figure>
                        <link>images/addb13.png</link>
                    </figure>
                </step>
                <step>
                    <description>From the style SVG icons select the down arrow icon. Click OK and OK again.</description>
                    <figure>
                        <link>images/addb14.png</link>
                    </figure>
                    <note>The 'Size' slider at the top of the SVG Icon dialog lets you set the size of the icon class.</note>
                </step>
                <step>
                    <description>Open the ControlBar Layout pane and click the 'Add Layout' button.</description>
                    <figure>
                        <link>images/addb15.png</link>
                    </figure>
                </step>
                <step>
                    <description>Give the layout a name, like 'Layout1', and click OK.</description>
                    <figure>
                        <link>images/addb16.png</link>
                    </figure>
                </step>
                <step>
                    <description>Highlight the named layout. Click the 'Add Line' button in the Layout Definition section of the pane.</description>
                    <figure>
                        <link>images/addb17.png</link>
                    </figure>
                </step>
                <step>
                    <description>Click the 'Add' button in the 'After' section of the Edit Layout Line dialog.</description>
                    <figure>
                        <link>images/addb18.png</link>
                    </figure>
                    <note>
                        'before', 'middle', and 'after' are used instead of left or right because layouts can also
                        be vertical.
                    </note>
                </step>
                <step>
                    <description>Select 'Button1' and click OK. Click OK again to close the ControlBar Builder.</description>
                    <figure>
                        <link>images/addb19.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Run the component in Working Preview. You should see the icon button appear in a control bar.
                        When you hover over the icon it should appear blue. The button doesn't have any functionality yet, this will
                        be added in the next section.
                    </description>
                    <figure>
                        <link>images/addb20.png</link>
                    </figure>
                </step>
            </steps>
        </section>
        <section>
            <title>ControlBar Buttons and Javascript</title>
            <description>This is a continuation of the section above.</description>
            <steps>
                <step>
                    <description>
                        On the UX Controls page highlight [PanelHeader End:PANELHEADER_1]. Open the 'Panels' menu and select the
                        [Panel Card] option. Click on 'Insert After' to add a Panel Card underneath the Panel Header.
                    </description>
                    <figure>
                        <link>images/bjs.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Highlight the Panel Card. Open the 'Data Controls' menu and click on [List] in order to add a
                        list control inside the Panel Card.
                    </description>
                    <figure>
                        <link>images/bjs2.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Highlight the List control. In the properties menu on the right click on the [...] box next to the
                        'List properties' property in the 'List Properties' section. The List Builder will open.
                    </description>
                    <figure>
                        <link>images/bjs3.png</link>
                    </figure>
                </step>
                <step>
                    <description>Open the Data Source pane of the List Builder. Set the Data Source Type to be 'SQL'.</description>
                    <figure>
                        <link>images/bjs4.png</link>
                    </figure>
                </step>
                <step>
                    <description>In the SQL Data Source properties section set the Connection string to be the Northwind database.</description>
                    <figure>
                        <link>images/bjs5.png</link>
                    </figure>
                </step>
                <step>
                    <description>Set the 'Table name' property to be the 'Customers' table.</description>
                    <figure>
                        <link>images/bjs6.png</link>
                    </figure>
                </step>
                <step>
                    <description>Click on the [...] button next to the 'Field list' property, select the 'ContactName' and 'City' fields and click OK.</description>
                    <figure>
                        <link>images/bjs7.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Use the blue > arrow button to move the 'ContactName' and 'City' fields from the 'Available Fields' list to the 'Columns in List' area.
                        Click OK to close the List Builder.
                    </description>
                    <figure>
                        <link>images/bjs8.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Highlight the ControlBar control. In the properties section on the right click on the
                        'ControlBar properties' property to open the ControlBar Builder.
                    </description>
                    <figure>
                        <link>images/bjs9.png</link>
                    </figure>
                </step>
                <step>
                    <description>Open the 'Actions' pane and click the 'Add Action' button.</description>
                    <figure>
                        <link>images/bjs10.png</link>
                    </figure>
                </step>
                <step>
                    <description>Give the action the name 'next'.</description>
                    <figure>
                        <link>images/bjs11.png</link>
                    </figure>
                </step>
                <step>
                    <description>Add the following javascript code to define the new action.</description>
                    <example>
                        <![CDATA[var lObj = {dialog.object}.getControl('list1');
lObj.navigate('next');]]>
                    </example>
                    <figure>
                        <link>images/bjs12.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Open the 'Items' pane and highlight 'Button1'. In the 'Item Actions' section click the [...] button next to the
                        Click property.
                    </description>
                    <figure>
                        <link>images/bjs13.png</link>
                    </figure>
                </step>
                <step>
                    <description>Select the 'next' action that you just defined.</description>
                    <figure>
                        <link>images/bjs14.png</link>
                    </figure>
                </step>
                <step>
                    <description>
                        Click OK to close the List Builder. Run the component in Working Preview.
                        Now when you click on the 'down' icon you should see the cursor move through the list.
                    </description>
                    <figure>
                        <link>images/bjs15.png</link>
                    </figure>
                </step>
            </steps>
        </section>
        <section>
            <title>Adding Additional Navigation Actions</title>
            <description>
                You can add additional navigation to the example shown in the section above. The following javascript should work if you wanted to add an action to a button in the ControlBar
                that moves a cursor to the previous field in a list control.
            </description>
            <example>
                <![CDATA[var lObj = {dialog.object}.getControl('list1');
lObj.navigate('previous');]]>
            </example>
        </section>
        <section>
            <description>To create an item that skips to the first row of the list control, define an action with this javascript:</description>
            <example>
                <![CDATA[var lObj = {dialog.object}.getControl('list1');
lObj.navigate('home');]]>
            </example>

        </section>
        <section>
            <description>To cause the cursor in the list control to move to the end of the list define an action with this javascript:</description>
            <example>
                <![CDATA[var lObj = {dialog.object}.getControl('list1');
lObj.navigate('end');]]>
            </example>
        </section>
    </sections>
</page>
