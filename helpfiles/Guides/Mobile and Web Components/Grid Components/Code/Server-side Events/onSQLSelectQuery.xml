<page>
    <shortlink>grid onSQLSelectQuery event</shortlink>
    <topic>onSQLSelectQuery Event</topic>
    <description>
        <p>Fires when the Grid needs select records to display in the Grid. If you want to base the Grid on a stored procedure you can use this event to return a resultset to the Grid.</p>
    </description>
    <discussion>
        <p>This event fires when the Grid performs a query to get a resultset of records to show in the Grid.</p>
    </discussion>
    <sections>
        <section>
            <description>The following variables are available to you in the event:</description>
            <list>
                <item>
                    <name-title>Variable</name-title>
                    <description-title>Description</description-title>
                </item>
                <item>
                    <name>e.tmpl</name>
                    <description>The grid component definition</description>
                </item>
                <item>
                    <name>e.rtc</name>
                    <description>Run-time calculations (allows you to pass data to other event handlers)</description>
                </item>
                <item>
                    <name>e.__si</name>
                    <description>State information</description>
                </item>
                <item>
                    <name>e.cn</name>
                    <description>The [SQL::Connection] object for the Grid. You can call this object's *[xb:.execute()]* method to execute your own SQL.</description>
                </item>
                <item>
                    <name>e.sql</name>
                    <description>The SQL Statement that Alpha Anywhere has computed to get the data to refresh the row.</description>
                </item>
                <item>
                    <name>e.arguments</name>
                    <description>The [SQL::Arguments] object with values for all of the arguments in *[xb:e.sql]*. To read a value from arguments: *[xb:e.arguments.find("argumentName").data]*</description>
                </item>
                <item>
                    <name>e.recordCount</name>
                    <description>The number of records in the Grid query</description>
                </item>
                <item>
                    <name>e.targetPage</name>
                    <description>The page number of records to be shown</description>
                </item>
                <item>
                    <name>e.targetLogicalRecord</name>
                    <description>The logical record number of the first record to be shown (e.g. if targetPage is 3 and records per page is 10, then targetLogicalRecord is 21)</description>
                </item>
                <item>
                    <name>e.rowCount</name>
                    <description>The number of records per page to show in the Grid</description>
                </item>
                <item>
                    <name>e.pageCount</name>
                    <description>The number of pages that the Grid contains. (e.g. if the grid contains 25 records and there are 10 records per page, pageCount is 3)</description>
                </item>
            </list>
        </section>
        <section>
            <description>Your event must set the following properties:</description>
            <list>
                <item>
                    <name-title>Property</name-title>
                    <description-title>Description</description-title>
                </item>
                <item>
                    <name>e.handled</name>
                    <description>set to *[xb:.t.]* if your event has computed the record count. set to *[xb:.f.]* if you want Alpha Anywhere to execute its own count query</description>
                </item>
                <item>
                    <name>e.rs</name>
                    <description>A [SQL::ResultSet] of records to show in the Grid (need only be set if *[xb:e.handled]* is set to *[xb:.t.]*)</description>
                </item>
                <item>
                    <name>e.paginationHandled</name>
                    <description>The default value for this property is *[xb:.f.]*, which means that Alpha Anywhere will assume that the first record in the result set that is returned by the event (*[xb:e.rs]*) is positioned on the first logical record, and Alpha Anywhere will be responsible for navigating to the correct logical record in the result set. (This property is only meaningful if *[xb:e.handled]* is set to *[xb:.t.]*)</description>
                </item>
            </list>
        </section>
        <section>
            <description>Your event can optionally set these properties of the *[xb:e]* object:</description>
            <list>
                <item>
                    <name-title>Property</name-title>
                    <description-title>Description</description-title>
                </item>
                <item>
                    <name>e.fatalError</name>
                    <description>Set to *[xb:.t.]* if a fatal error has occurred</description>
                </item>
                <item>
                    <name>e.errorText</name>
                    <description>The error text to show if a fatal error occurred</description>
                </item>
            </list>
        </section>
        <section>
            <title>Setting State Variables</title>
            <description>
                <p>You can also set state variables in this event. The value of any state variables will be available in all subsequent ajax callbacks (in the e.__si2 object).</p>
                <p>To set a state variable:</p>
            </description>
            <example><![CDATA[e._state.myvar1 = "value1"
e._state.myvar2 = "value2"]]></example>
        </section>
    </sections>
    <links>
        <link link="sql::connection object">SQL::Connection</link>
        <link link="sql::arguments class">SQL::Arguments</link>
        <link link="sql::resultset object">SQL::ResultSet</link>
    </links>
</page>