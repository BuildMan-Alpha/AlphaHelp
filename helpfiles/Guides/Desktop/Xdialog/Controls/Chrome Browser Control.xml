<page>
    <shortlink>server xd Xdialog Chrome Browser Control</shortlink>
    <topic>Xdialog Chrome Browser Control</topic>
    
    <description>Xdialog allows you to embed the Chrome browser control.</description> 
    
    <discussion>
        <p>Xdialog allows you to embed the Chrome browser control. This, in turn, allows you to build some amazing desktop applications using the full power of HTML, CSS3 and Javascript. This is a really fantastic new feature and all developers of desktop applications are strongly encouraged to check it out!</p>
        <p>Previously, Alpha Anywhere allowed you to use the Internet Explorer ActiveX control in an Xdialog. While this is still possible, using the Chrome control is now so much easier and more powerful, that it is hard to imagine a scenario under which using the Internet Explorer ActiveX control would be preferable to using the Chrome control.</p>
    </discussion>
    <groups>
        <group>
            <sections>
                <section>
                    <note>With Internet Explorer, some of Xdialogs that used the Internet Explorer ActiveX control have stopped working because of changes Microsoft has made to IE in IE Version 11. Using the Chrome control instead of the IE ActiveX control circumvents this issue.</note>
                </section>
                <section>
                    <description>With the Chrome control hosted in an Xdialog you can:</description>
                    <list bullet="true">
                    <item>
                        <name>Use Xbasic to generate Javascript code and then send the code to the Chrome control to execute</name>
                    </item>
                    <item>
                        <name>Use Xbasic to read values from the DOM in the Chrome control (for example, read the value of an input control in the HTML being shown in the Chrome control).</name>
                    </item>
                    <item>
                        <name>Use Javascript in the Chrome control to invoke Xbasic</name>
                    </item>
                    <item>
                        <name>Open the Chrome debugger to debug your Javascript code</name>
                    </item>
                    <item>
                        <name>Set the zoom level of the HTML page</name>
                    </item>
                    </list>
                </section>
                <section>
                    <description>Since the HTML loaded in the Chrome control can use open source Javascript libraries, such as jQuery, you can build really powerful Xdialogs for your desktop applications using a myriad of techniques made possible by third party libraries. (See below for information on the a5_html_page_prepare() function.)</description>
                    <note>The code for all of the examples used here is available in the sample Learning Xdialog workspace that ships with Alpha Anywhere. To get an updated version of 'Learning Xdialog' you must do a full install, not a patch install.</note>
                </section>
            </sections>
        </group>
        <group>
            <title>A simple Xdialog that uses the Chrome Control</title>
            <sections>
                <section>
                    <videos>
                        <video>
                            <name>Watch video</name>
                        <link>https://www.viddler.com/v/a669d7ed</link>
                        </video>
                    </videos>
                </section>
                <section>
                    <description>Create a new script with this code:</description>
                    <example><![CDATA[dim cp as helper::Chrome
cp.html = <<%html%
<h1>Hello</h1>
<p>This is html inside an Xdialog.</p>
%html%

dim dlg_title as c
dim dlg_body as c
dlg_body = <<%dlg%
{chrome=100,20cp};
%dlg%
dim dlg_event as c
dlg_title = "Chrome in an Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
                </section>
                <section>
                    <description>And here is the resulting Xdialog when you run the code.</description>
                    <figure>
                        <link>images/xdialog_chrome1.jpg</link>
                    </figure>
                </section>
                <section>
                    <description>In the above code, notice that a new object is declared with the </description>
                    <example><![CDATA[dim cp as helper::Chrome]]></example>
                </section>
                <section>
                    <description>
                        <p>command. Also notice that the HTML to display in the Chrome control was set by setting the .html property.</p>
                        <p>You can either set the object's .html property if you want to specify explicit HTML to display, or you can set the .url property (if you want to show a URL - see next example).</p>
                        <p>Once the Chrome object has been declared, it can be placed in the Xdialog using this Xdialog command:</p>
                    </description>
                    <example><![CDATA[{chrome=100,20cp};]]></example>
                </section>
                <section>
                    <description>
                        <p>In this above example, the width of the Chrome control is set to 100 'characters' and the height to 20 'lines'.</p>
                        <p>Notice that the 'cp' in the above command is the name of the helper::Chrome object that was defined.</p>
                        <p>You can put as many Chrome objects on an Xdialog as you want. For example:</p>
                    </description>
                    <example><![CDATA[ dim cp1 as helper::chrome
dim cp2 as helper::chrome
....
dim cpn as helper::chrome]]></example>
                </section>
                <section>
                    <description>And then in your Xdialog body:</description>
                    <example><![CDATA[ {chrome=100,20cp1};
{chrome=100,20cp2};
{chrome=100,20cpn};]]></example>
                </section>
            </sections>
        </group>
        <group>
            <title>Specifying a URL to load</title>
            <sections>
                <section>
                    <videos>
                            <video>
                            <name>Watch video</name>
                            <link>https://www.viddler.com/v/1baa458b</link>
                            </video>
                    </videos>
                </section>
                <section>
                    <example><![CDATA[dim cp as helper::Chrome
cp.url = "http://www.google.com"

dim dlg_title as c
dim dlg_body as c
dlg_body = <<%dlg%
{stretch=height,width}
{chrome=100,30cp};
%dlg%
dim dlg_event as c
dlg_title = "Chrome in an Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
                    <figure>
                        <link>images/xdialog_chrome2.jpg</link>
                    </figure>
                </section>
            </sections>
        </group>
        <group>
            <title>Specifying a Dynamic URL</title>
            <sections>
                <section>
                    <description>In this next example we show how the URL property can be dynamically changed after the Xdialog has been rendered.</description>
                    <example><![CDATA[dim cp as helper::Chrome
cp.url = "http://www.google.com"

dim urls as c
urls = <<%txt%
http://www.google.com
http://www.bing.com
http://www.yahoo.com
%txt%

dim url as c
url = word(urls,1,crlf())

dim dlg_title as c
dim dlg_body as c
dlg_body = <<%dlg%
{startup=urlchanged}
{stretch=width}
[.160url^+urls] <Go!urlchanged>;
{stretch=height,width}
{chrome=173,60cp};
%dlg%
dim dlg_event as c
dlg_event = <<%code%
if a_dlg_button = "urlchanged" then
    a_dlg_button = ""
    cp.url = url
end if
%code%
dlg_title = "Chrome in an Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
                </section>
                <section>
                    <description>
                        <p>The resulting Xdialog looks like this:</p>
                        <p>You can type any address into the address bar and then hit the Go button to go to the page.</p>
                    </description>
                    <figure>
                        <link>images/xdialog_chrome3.jpg</link>
                    </figure>
                </section>
            </sections>
        </group>
        <group>
            <title>Using Xbasic to Execute Javascript in the Chrome Control</title>
            <sections>
                <section>
                    <description>The Chrome object exposes two methods that allows you to execute Javascript from Xbasic. These are:</description>
                    <list>
                        <item>
                            <name-title>Method</name-title>
                            <description-title>Description</description-title>
                        </item>
                        <item>
                            <name>.executeJavascript(codetorun)</name>
                            <description>executes the Javascript asynchronously</description>
                        </item>
                        <item>
                            <name>.executeJavascriptResult(codeToRun)</name>
                            <description>executes the Javascript synchronously and returns the result to Xbasic</description>
                        </item>
                    </list>
                </section>
                <section>
                    <description>Consider the following example of an Xdialog that is hosting the Chrome control, showing some HTML with an input control. We have to Xdialog buttons, one to set the value in the HTML input, and the other to read the value from the HTML input.</description>
                    <example><![CDATA[dim cp as helper::Chrome
cp.html = <<%html%
Name: <input id="name" />
%html%
dim dlg_title as c
dim dlg_body as c
dlg_body = <<%dlg%
{chrome=40,10cp};
<Set Name!setName> <Read Name!readName>;
%dlg%
dim dlg_event as c
dlg_event = <<%code%
if a_dlg_button = "setName" then
    a_dlg_button = ""
    dim jstorun as c
    dim name as c
    name = ui_get_text("Name","Enter name")
    jstorun = "document.getElementById('name').value = '" + js_escape(name) + "';"
    cp.ExecuteJavascript(jstorun)
else if a_dlg_button = "readName" then
    a_dlg_button = ""
    dim jstorun as c = "document.getElementById('name').value"
    dim result as c
    result = cp.ExecuteJavascriptResult(jstorun)
    ui_msg_box("Notice:","Value read from the HTML is: " + result)
end if
%code%
dlg_title = "Chrome in an Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
                </section>
                <section>
                    <description>The important thing to notice in this example is that the Javascript that gets executed here is computed by Xbasic and Xbasic is invoking the Javascript.</description>
                </section>
            </sections>
        </group>
        <group>
            <title>Using Javascript to Invoke Xbasic</title>
            <sections>
                <section>
                    <description>
                        <p>In this example, rather than using Xbasic to invoke Javascript on the Chrome control, we turn it around and invoke Xbasic from Javascript.</p>
                        <p>This Xdialog has an event called 'event1' (see code in red below) and the HTML has a button. When the user clicks on the HTML button, the Xdialog event ('event1') is fired.</p>
                        <p>In order to make this work, a special Javascript function (called xDialogEvent) must be added to the HTML page. The onclick event for the button is then set to:</p>
                    </description>
                    <example><![CDATA[xDialogEvent('event1')]]></example>
                    <tip>
                        <p>Because it is cumbersome to have to have to add the xDialogEvent() helper function to the HTML yourself, a special helper function can be called to 'prepare' the HTML you pass into the chrome object. For example:</p>
                        <p>*[xb:<![CDATA[dim cp as helper::Chrome]]>]*</p>
                        <p>*[xb:<![CDATA[cp.html = a5_html_page_prepare(<<%html%]]>]*</p>
                        <p>*[xb:<![CDATA[<button onclick="xdialogEvent('event1');">Invoke Event on My Parent Xdialog</button>]]>]*</p>
                        <p>*[xb:<![CDATA[%html%)]]>]*</p>
                    </tip>
                </section>
                <section>
                    <example><![CDATA[dim cp as helper::Chrome
cp.html = <<%html%
<html>
    <head>
        <script>
        function xDialogEvent(eventName) {
            var client = new XMLHttpRequest();
            client.open('GET', 'a5xdialog:' + eventName,false);
            client.setRequestHeader('My-Custom-Header', 'Some Value');
            client.send();
        }
        </script>
    </head>
    <body>
        <button onclick="xDialogEvent('event1');">Invoke Event on My Parent Xdialog</button>
    </body>
 </html>
%html%

dim dlg_title as c
dim dlg_body as c
dlg_body = <<%dlg%
{chrome=40,10cp};
%dlg%
dim dlg_event as c
dlg_event = <<%code%
if a_dlg_button = "event1" then
    a_dlg_button = ""
    ui_msg_box("Notice","This is Xbasic here. Event1 has just been fired.")
end if
%code%
dlg_title = "Chrome in an Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
   
   </section>
   <section>
     <title>Writing a mini web server in Xdialog for hosted Chrome Control</title>
     <description>
        <p>A useful pattern for hosting HTML in an XDialog is to use the ParseRules() method
        of the chrome object to remap HTTP requests to calls into an xbasic function.</p>
        <p>This is effectively like having a Mini web server implemented by a single xbasic function.</p>
        <p>In the below example, notice that the function returns data type 'A' (any) this allows either a string or a blob to be returned.</p>
        <p>The top level page is called index.html, the javascript that the button on the page calls into is a separate JS file, and the image
        is returned from one of the built-in images serialized to binary data.</p>
     </description>
   </section>
   <section>
     <example><![CDATA[
dim cr as helper::Chrome

cr.url = "http://localhost/index.html"

dim rules as c
rules = <<%xstr%
replace:
http://localhost/*:=a5xbasic:handledRequest({quoted_wildcard})
paths:
%xstr%
cr.ParseRules(rules)


ui_dlg_box("Mini Server",<<%dlg%
{chrome=150,30cr};
%dlg%)


function handledRequest as a(fullpath as c)
    if fullpath = "index.html" then
	     handledRequest = <<%html%
<script src="myfun.js">
</script>
<body>
<img src="word.png"/><br>
Hello<br>
<button onclick="sayHello()">Say Hello</button>
</body>
%html%
	else if fullpath = "myfun.js" then
	    handledRequest = <<%js%
function sayHello() {    
    alert("Hello World!");
}
%js%
	else if fullpath = "word.png" then
	    handledRequest = bitmap_to_png(ui_bitmap_save("$$application.ms.word"))
	else
	   ' Other callbacks
	end if
end function
]]></example></section>
   <section>
      <title>Posting Data asynchronously back to XBasic</title>
      <description>
          <p>When invoking XBasic from javascript, often it is useful to send a payload, for example all the values harvested from controls on the HTML page, for this we will use a POST instead of a GET, and will use the 'a5xbasicasync' protocol as well as mapping rules (in place of using the custom protocols directly).</p>
          <p>The replacement rule for a 'POST' supports a placeholder '__value__' for the posted data, and {quoted_wildcard} placeholder for the path (that matches the '*' in the pattern).</p>
          <p>In this example, If the URL contains "/post/" in the path (can be any pattern you pick - like "/submit/") will call an xbasic function called handlePost with the remainder of the path and the POST data payload</p>
          <p>The Page is populated by the second fallback rule that handles http GET, by mapping that to a call to htmlContent().</p>
      </description>
   </section>
   <section>   
      <example><![CDATA[
dim cr as helper::Chrome

cr.url = "http://localhost/index.html"

dim rules as c
rules = <<%xstr%
replace:
http://localhost/post/*:=a5xbasicasync:handlePost({quoted_wildcard},__value__)
http://localhost/*:=a5xbasic:htmlContent({quoted_wildcard})
paths:
%xstr%
cr.ParseRules(rules)


ui_dlg_box("Posted Data Example",<<%dlg%
{chrome=150,30cr};
<refresh>
%dlg%,<<%code%
if a_dlg_button = "refresh" then
a_dlg_button = ""
cr.Reload(.t.)
end if
%code%)


function htmlContent as a(fullpath as c)
    if left(fullpath,10) = "index.html" then
	     htmlContent = <<%html%
<script>
<!--
function postFormData() {
	 var client = new XMLHttpRequest();
     client.open('POST', '/post/myform', true);
     var data = { 
      firstname: document.getElementById('firstname').value,
      lastname: document.getElementById('lastname').value
     };
     client.send(JSON.stringify(data));
}
-->
</script>
<body>
Firstname <input id="firstname" value="Joe" ></input> <br/>
Lastname <input id="lastname" value="Smith"></input> <br/>
<button onclick="postFormData()">Submit</button>
</body>
%html%
	else
	   ' Other callbacks
	end if
end function

function handlePost as v(fullpath as c,data as c)
	showvar(data,"path = "+fullpath)
end function
]]></example>
   </section>
   <section>
      <description>
          <p>When the button is clicked, the javascript packs the input control contents into a JSON payload, and calls the Xbasic handlePost function with the path and the payload.</p>
          <p>In this example we just show that Xbasic got the payload, and display the path in the title.  In a client application, this would probably be where you commit the data back to a SQL database.</p>
      </description>
      <figure>
        <link>images/postdata_chrome_control.png</link>
      </figure>
   </section>
   </sections></group>
   <group> <title>Using Built In Images</title><sections>
   
    <section>
     
     <description>
      <p>Alpha Anywhere comes with a large library of built in images and icons that you might want to use in the HTML that is shown in the Chrome control.</p>
      <p>You can easily use built in images using this syntax:</p>
</description>
     <example><![CDATA[<img src="a5res:images/$$application.chrome.png" />]]></example>
     <figure><link></link></figure>
    
   </section>
   
   <section>
     
     <description>The portion shown in red is the built in image name.</description>
     
     
     
   </section>
      
   <section>
     
     <description>For example:</description>
     <example><![CDATA[dim cp as helper::Chrome
cp.html = <<%html%
<img src="a5res:images/$$code.aScript.png" />
<img src="a5res:images/$$file.open.png" />
<img src="a5res:images/a5_email_people.png" />
%html%

dim dlg_title as c
dim dlg_body as c
dlg_body = <<%dlg%
{chrome=100,20cp};
%dlg%
dim dlg_event as c
dlg_title = "Chrome in an Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
     
     
   </section>
   
   <section>
     <description>And the resulting Xdialog:</description>
     <figure><link>images/xdialog_localImages.jpg</link></figure>
     
     
   </section>
   </sections></group>
   <group><title>Referencing Static Resources</title>
     <sections>
   
   
   
      <section>
        
     <description>To display image files you can either use the special a5file prefix on the filename, or you can use the standard file:// protocol. However, in order to the use file:// protocol, you have to turn Chrome security off using the command shown in red.</description>
  <example><![CDATA[dim cp as helper::Chrome
'in order to use the standard file:// protocol you have to turn
'Chrome's web security off.
'otherwise you can use use the special a5file: command.

cp.flag_web_security_disabled = .t.
cp.html = <<%html%
<img src="a5file:C:\Program Files (x86)\a5V12\a5v12logo.jpg" />
<br>
<img src="file://C:\Program Files (x86)\a5V12\a5v12logo.jpg" />
%html%
dim dlg_title as c
dim dlg_body as c
dlg_body = <<%dlg%
{chrome=100,20cp};
%dlg%
dim dlg_event as c
dlg_title = "Chrome in an Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
     
   </section>
   
      <section>
     
     <description>And the resulting Xdialog:</description>
     <figure><link>images/xdialog_chromeImages.jpg</link></figure>
     
     
   </section>
   </sections></group>
   <group><title>Using the Chrome Debugger</title><sections>
   
   
 <section>
   
  <description>
    <p>You can use the Chrome debugger to debug Javascript that is running inside the Chrome control. For example, consider the following Xdialog.</p>
    <p>The HTML has a Javascript function that executes a loop. The function uses the 'debugger;' Javascript command to turn on the debugger.</p>
    <p>The Xdialog has a button that executes this code:</p>
</description> 
   <example><![CDATA[cp.OpenDevtools()]]></example>
 </section>  
   
  <section>
 
  <description>
    <p>'cp' is the Chrome object (created by the dim cp as helper::Chrome command), and we are calling the object's .OpenDevTools() method to enable the Chrome Developer tools.</p>
    <p>Once the Developer Tools have been opened, we can click the button on the HTML page to run the Javascript and debug into the code.</p>
</description> 
   <videos>
     <video>
       <name>Watch Video</name>
       <link>https://www.viddler.com/v/b4eddab5</link>
     </video>
     
   </videos>
 </section>  
    
     
  <section>
 
 
   <example><![CDATA[dim cp as helper::Chrome
cp.html = <<%html%
<script>
function loopTest() {
    debugger;
    for(var i = 1; i < 10; i++) {
        document.getElementById('div1').innerHTML = 'Count: ' + i ;
    }
}
</script>
<button onclick="loopTest();">Start Loop</button>
<div id="div1"></div>
%html%

dim dlg_title as c
dim dlg_body as c
dlg_body = <<%dlg%
{chrome=100,20cp};
<Open debugger!openDebugger>;
%dlg%
dim dlg_event as c
dlg_event = <<%code%
if a_dlg_button = "openDebugger" then
    'open the Chrome debugger
    a_dlg_button = ""
    cp.OpenDevtools()
end if
%code%
dlg_title = "Chrome in an Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
 </section>   
 
 </sections></group>
 
 
 <group><title>Setting the Zoom Level of the HTML Document</title><sections>
   <section>
     
    <description>You can set/get the zoom level of the HTML shown in the Chrome control by using these methods:</description> 
    <list bullet="true">
      <item>
        <name>.GetZoomLevel()</name>
      </item>
        <item>
        <name>.SetZoomLevel(level)</name>
      </item>
    </list>
   </section>
   <section>
     <description>The level is a numeric value
</description>
   </section>
   </sections></group>
   <group><title>Binding Events Programmatically</title><sections>
     <section>
       
     <description>
      <p>When you write the HTML that is displayed in the Chrome control you can either add events directly into the HTML markup, or you can bind the events programmatically using Xbasic.</p>
      <p>For example, if your HTML included this markup:</p>
</description>
<example><![CDATA[<button onclick="myclickevent();">Button1</button>]]></example>
   </section>
   
   <section>
     <description>
      <p>then, when you ran the Xdialog and clicked on the button, the Javascript function myclickevent() would be invoked.</p>
      <p>However if your HTML included this markup:</p>
</description>
     <example><![CDATA[<button>Button1</button>]]></example>
   </section>
   <section>
     <description>
      <p>then, clicking on the button would do nothing because no event had been bound to the button.</p>
      <p>Using methods of the Chrome control, you can bind event handlers to any element.</p>
      <p>The syntax is:</p>
</description>
     <example><![CDATA[<chromeObject>.AddEventListeners(definition)]]></example>
   </section>
   <section>
     <description>Where definition is a string in this format:</description>
     <example><![CDATA[elementId|eventName|xdialogEventToFire]]></example>
   </section>
   <section>
     <description>For example:</description>
     <example><![CDATA[dim definition as c 
definition = "btn1|click|XbasicEvent1"
cp.AddEventListeners(definition)]]></example>
   </section>
   <section>
     <description>
           <p>The definition string that you pass into the .AddEventListeners() function can be a cr-lf delimited string. This allows you to bind events to multiple elements with a single call to the .AddEventListeners() function.</p>
      <p>The above code will bind an onClick event to an element with an id of 'btn1'. When the user clicks the button, the Xdialog event called 'XbasicEvent1' will be fired. </p>
</description>
    <note>We are using the .AddEventListeners() to invoke Xbasic (by calling an event in the parent Xdialog). We are NOT using the method to bind a Javascript event handler, since there are existing Javascript methods to bind Javascript events to elements.</note>
   </section>
<section>
  <description>Watch video to see an example of using the .AddEventListners() method.</description>
  <videos>
    <video>
      <name>Watch video</name>
      <link>https://www.viddler.com/v/84468ba3</link>
    </video>
    <resources>
      <resource>
        <link>https://www.ajaxvideotutorials.com/V12Videos/xbasic_xdialog_with_chrome_control_event_binding.zip</link>
      </resource>
    </resources>
    
  </videos>
  
</section>   
<section>
  <description>The .AddEventListners() function can be called before the Xdialog is even instantiated. There is no need to wait for Xdialog and the Chrome control inside the Xdialog to be ready. For example, consider the following script:</description>
   <example><![CDATA[dim cp as helper::Chrome
html = <<%html%
<div id="div1">This is div1</div>
<button id="b1">Button1</button>
<button id="b2">Button2</button>
%html%
cp.html = html

'notice that the event binding is defined before the xdialog has even been rendered!
dim mapping as c 
mapping = <<%txt%
b1|click|event1
b2|click|event2
%txt%
cp.AddEventListeners(mapping)

dim dlg_title as c = "Binding Multiple Events Handlers at Once"
dim dlg_body as c 
dlg_body = <<%dlg%
{chrome=80,10cp};
%dlg%
dim dlg_event as c 
dlg_event = <<%code%
if a_dlg_button = "event1" then 
    a_dlg_button = ""
    ui_msg_box("Notice","Event 1 has fired")
else if a_dlg_button = "event2" then 
    a_dlg_button = ""
    ui_msg_box("Notice","Event 2 has fired")
end if 
%code%
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
  
</section>   </sections></group>
<group> <title>Setting/Getting Attributes and Values Programmatically</title><sections>



<section>
 
  <description>
  <p>When you host a Chrome control in an Xdialog you will often want to manipulate attributes of the HTML that is displayed using Xbasic.</p>
  <p>You can obviously do this by using Xbasic to send Javascript to the Chrome control (using the .executeJavascript() method), but a more direct method is available using methods of the Chrome object that let you directly manipulate the DOM.</p>
  <p>For example, say you want to set the Inner HTML of a div with the id of 'div1'.</p>
  <p>You Xdalog could execute this code</p>
</description>
  
  <example><![CDATA[dim js as c
js = "document.getElementById('div1').innerHTML = '" + js_escape("some text") + "';
cp.ExecuteJavascript(js)]]></example>
</section>   
<section>
  <description>However, the .SetInnerHTML() method provides a more direct way of accomplishing this. For example</description>
  <example><![CDATA[cp.SetInnerHTML("div1","some text");]]></example>
  <note>The js_escape() function is a helper function that ensures that all text in the string is properly escaped so as not to cause Javascript errors.</note>
</section>
   <section>
     <description>Similarly you can use the following methods:</description>
     <list>
       <item>
         <name>HasElement(elementId)</name>
         <description>indicates whether the specified elementId is present</description>
       </item>
        <item>
         <name>HasAttribute(elementId,attributeName)</name>
         <description>indicates if the specified element has the specified attribute</description>
       </item>
        <item>
         <name>GetAttribute(elementId,attributeName)</name>
         <description>gets the value of the specified attribute from the specified element</description>
       </item>
        <item>
         <name>SetAttribute(elementId,attributeName,attributeValue)</name>
         <description>sets the value of an attribute</description>
       </item>
        <item>
         <name>GetInnerText(elementId)</name>
         <description>gets the inner text property of an element</description>
       </item>
        <item>
         <name>GetValue(elementId)</name>
         <description>gets the value of element (for example, an INPUT control)</description>
       </item>
        <item>
         <name>SetValue(elementId,value)</name>
         <description>sets the value of an element</description>
       </item>
        <item>
         <name>GetOuterHtml(elementId)</name>
         <description>gets the outer html for an element</description>
       </item>
        <item>
         <name>GetInnerHtml(elementId)</name>
         <description>gets the inner html for an element</description>
       </item>
        <item>
         <name>SetInnerHtml(elementId,value)</name>
         <description>sets the inner html of an element</description>
       </item>
    
     </list>
     
   </section>
   
   <section>
     <description>Example code</description>
 <example><![CDATA[dim cp as helper::Chrome
html = "<div id=\"div1\">This is div1</div>"
cp.html = html
dim dlg_title as c
dim dlg_body as c
dlg_body = <<%dlg%
{chrome=80,10cp};
<Set Inner HTML of div1!setdiv>;
<Set Attributes on div1!setattr>
%dlg%
dim dlg_event as c
dlg_event = <<%code%
if a_dlg_button = "setdiv" then
    a_dlg_button = ""
    cp.SetInnerHtml("div1","Test Alpha Anywhere's ability to set the Inner HTML of an element.")
else if a_dlg_button = "setattr" then
    a_dlg_button = ""
    cp.SetAttribute("div1","style","border: solid 1px blue; border-radius: 10px; background: yellow;")
end if
%code%

dlg_title = "Using Google Charts in a Chrome Control in an Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
   </section></sections></group>
   <group><title>Using Google Charts in an Xdialog</title><sections>
   <section>
     
    <description>
        <p>You can use the Google Charts API to add charting to your Xdialogs. For example, the image below shows an Xdialog with a Google chart.</p>
        <p>For example, the image below shows an Xdialog with a Google chart.</p>
</description> 
    <videos>
      <video>
        <name>Watch video</name>
        <link>https://www.viddler.com/v/44f7108b</link>
      </video>
      <resources>
        <resource>
          <link>https://www.ajaxvideotutorials.com/V12Videos/xdialog_google_charts.zip</link>
        </resource>
      </resources>
      
    </videos> 
   </section>
   
    <section>

    <tip>
        <p>In addition to watching the above videos, you might also find this video helpful. It shows how Google Charts can be used in a UX Web component, providing additional background information on using the Google API documentation to get working code samples:</p>
        <p>*[link:Watch Video@https://www.viddler.com/v/2adc8a6f]*</p>
    </tip> 
   </section>
   <section>
     <figure><link>images/xdialog_googleCharts.jpg</link></figure>
   </section>
   
   </sections></group>
   <group> <title>Using the Alpha Anywhere Javascript Library, Styles and 3rd Party Javascript Libraries</title>
     <sections>
   
   
  <section>
   
    <description>A huge advantage of being able to use the Chrome control in your Xdialogs is the ability to use Alpha Anywhere Javascript libraries and styles and 3rd party libraries and styles in your Xdialog.
</description>
 

    
  </section> 
   
     <section>

    <description>A special helper function called a5_html_page_prepare() makes it very easy to create the HTML page that you will load into the Chrome control with all of the libraries and styles that you want.
The function takes some input HTML and then adds the necessary code to your input HTML to load the Javascript and styles that you specify.

The function syntax is:
</description>
    <example><![CDATA[c html = a5_html_page_prepare(C html [,C javascriptLibrariesPublic [,L flagIncludeA5JSlibraries [,C A5StyleName [,C jQueryTheme [,L flagIncludeGoogleJSAPI ]]]]])]]></example>
  
    
  </section> 
  
    <section>

    <description>where:</description>

    <list>
        <item>
            <name-title>Parameter</name-title>
            <description-title>Description</description-title>
        </item>
      <item>
           <name>html</name>
           <description>the input HTML that you want to transform</description>
      </item>
        <item>
           <name>javascriptLibrariesPublic</name>
           <description>a comma delimited list of public Javascript libraries that can be loaded from the Google CDN</description>
      </item>
        <item>
           <name>flagIncludeA5JSLibraries</name>
           <description>.t./.f. - indicates if you want to include the Alpha Anywhere Javascript libraries</description>
      </item>
        <item>
           <name>A5StyleName</name>
           <description>the name of an Alpha Anywhere style sheet to load. If you us this option your HTML can use the {style} placeholder to refer to the style name.</description>
      </item>
        <item>
           <name>jQueryTheme</name>
           <description>Name of a jQuery UI theme. Typically only used if you are also loading the jQuery UI library (see javascriptLibrariesPublic)</description>
      </item>
        <item>
           <name>flagIncludeGoogleJSAPI</name>
           <description>.t./.f. - indicates if you want to load the Google JSAPI library. If you set this flag to true, the following Google Chart packages will also be loaded: 'table', 'corechart', 'gauge', 'geochart', 'treemap', 'orgchart', 'timeline'</description>
      </item>
      
    </list>
    
  </section> 
  
    <section>
    <title>The javascriptLibrariesPublic Parameter</title>
    <description>The following libraries can be loaded.</description>

    <list bullet="true">
      <item>
           <name>AngularJS</name>
      </item>
        <item>
           <name>Chrome Frame</name>
      </item>
        <item>
           <name>Dojo</name>
      </item>
        <item>
           <name>Ext Core</name>
      </item>
        <item>
           <name>jQuery</name>
      </item>
        <item>
           <name>jQuery UI</name>
      </item>
        <item>
           <name>MooTools</name>
      </item>
        <item>
           <name>Prototype</name>
      </item>
        <item>
           <name>script.aculo.us</name>
      </item>
        <item>
           <name>SWFObject</name>
      </item>
        <item>
           <name>Web Font Loader</name>
      </item>
      
    </list>
    
  </section> 
  
    <section>
 
    <description>For each library that you load, you can specify an optional build number. The syntax is:</description>
    <example><![CDATA[libraryName|buildNumber]]></example>
  
  </section> 
   
     <section>
  
    <description>
      <p>If you leave out the buildNumber then the most recent build on the Google CDN as of December 1, 2013 is loaded.</p>
      <p>If you set the buildNumber to 'internal' then the code is loaded from the Google CDN and then cached locally so that future loads are faster.</p>

</description>
 
  </section> 
     <section>
   
    <description>Example</description>
    <example><![CDATA[dim html as c
html = ""
html = a5_html_page_prepare(html,"jquery|internal,jquery ui|internal,angularjs|internal",.t., "iOS","Sunny")]]></example>
   
  </section> 
     <section>

    <description>In the above example:</description>

    <list bullet="true">
      <item>
         <name>jQuery is being loaded from a local version</name>
      </item>
       <item>
         <name>jQuery ui is being loaded from a local version</name>
      </item>
       <item>
         <name>angularjs is being loaded from a local version</name>
      </item>
       <item>
         <name>the Alpha Anywhere Javascript Library is being loaded</name>
      </item>
       <item>
         <name>the iOS Alpha Anywhere style is being loaded</name>
      </item>
       <item>
         <name>The 'Sunny' jQuery UI theme is being loaded.</name>
      </item>
    </list>
    </section>
    <section>
    <important>When you specify that Alpha Anywhere Javascript library and jQuery should be loaded the jQuery object is automatically changed from its default '$' to 'jQuery'.</important>
  </section> 
     <section>

    <description>For example, in the code below, the jQuery date picker is used for the input control.</description>
   <videos>
     <video>
       <name>Watch video</name>
       <link>https://www.viddler.com/v/d74f8468</link>
     </video>
   </videos>

  </section> 
   <section>
    <example><![CDATA[ dim html as c
html = <<%html%
<body class="{style}Page">
    <p>This input control uses the jQuery Date Picker</p>
    <input id="dt1" name="dt1" value="1/1/2013"/>
    <script>
    jQuery('#dt1').datepicker(
        {
            onSelect: function(dateText, inst) {
                $e.execute(this,'change')
            }
        }
   );
   </script>
</body>
%html%

html = a5_html_page_prepare(html,"jquery|internal,jquery ui|internal",.t., "MobBlue","Sunny")

dim cp as helper::Chrome
cp.html = html
ui_dlg_box("Xdalog with Chrome Control - Using jQuery",<<%dlg%
{stretch=width,height}
{chrome=150,50cp};
%dlg%,<<%code%
%code%)]]></example>
  
  </section> 
<section>
  <description>And the resulting Xdialog</description>
  <figure><link>images/xdialog_jquery_date.jpg</link></figure>
  
</section>   
</sections></group>
<group><title>Using the .OnReady() Event</title><sections>


<section>
  
 <description>The Chrome control has an .OnReady() event that fires, and executes Xbasic, once the control has been initialized. For example:</description> 
  <example><![CDATA[dim cp as helper::Chrome
html = <<%html%
<div id="div1">This is div1</div>
%html%
cp.html = html

'the onReady event fires when the chrome control has been initialized
cp.OnReady = "ui_msg_box(\"Notice\",\"The Chrome control has been initialized.\")"

dim dlg_title as c 
dim dlg_body as c 
dlg_body = <<%dlg%
{chrome=80,10cp};
%dlg%
dim dlg_event as c 
%code%
dlg_title = "Xdialog"
ui_dlg_box(dlg_title,dlg_body,dlg_event)]]></example>
    </section>
    <section>
  <description>The .onReady() event executes Xbasic code, not Javascript. If you want to fire Javascript when the Chrome control is ready, simply put an onload event in the tag of the HTML you display in the control.</description>
  <example><![CDATA[ <body onload="myfunction()">
</body>]]></example>
</section>
</sections></group>
<group> <title>Summary of Properties and Methods of the Chrome Object</title><sections>


<section>
 
  <description>When you dim a Chrome object, the resulting object instance has many properties and methods that are exposed to Xbasic. For example</description>
 <example><![CDATA[dim cp as helper::chrome]]></example> 
</section>

<section>
  <description>When the above Xbasic is executed, the resulting Xbasic variable 'cp' has various method and properties, which are summaries here:</description>
  
</section>
<section>
  <title>Properties</title>
 <list bullet="true">
   <item>
     <name>flag_web_security_disabled</name>
   </item>
    <item>
     <name>flag_allow_file_access_from_url</name>
   </item>
    <item>
     <name>flag_allow_universal_file_access_from_url</name>
   </item>
    <item>
     <name>flag_page_cache_disabled</name>
   </item>
    <item>
     <name>flag_caret_browsing_enabled</name>
   </item>
    <item>
     <name>flag_databases_disabled</name>
   </item>
    <item>
     <name>flag_plugins_disabled</name>
   </item>
    <item>
     <name>flag_java_disabled</name>
   </item>
    <item>
     <name>flag_javascript_disabled</name>
   </item>
    <item>
     <name>flag_dom_paste_disabled</name>
   </item>
    <item>
     <name>flag_encoding_detector_enabled</name>
   </item>
    <item>
     <name>flag_drag_drop_disabled</name>
   </item>
    <item>
     <name>flag_load_drops_disabled</name>
   </item>
    <item>
     <name>flag_history_disabled</name>
   </item>
    <item>
     <name>flag_remote_fonts_disabled</name>
   </item>
    <item>
     <name>flag_image_load_disabled</name>
   </item>
    
 </list>
  
</section>
</sections></group>

<group> <title>Methods</title><sections>
<section>
 <list>
   <item>
     <name>ExecuteJavascript(code)</name>
     <description>executes some Javascript</description>
   </item>
    <item>
     <name>ExecuteJavascriptResult(code)</name>
     <description>executes some Javascript and returns a result to Xbasic</description>
   </item>
    <item>
     <name>Print() </name>
     <description>invokes the Chrome control's print dialog</description>
   </item>
    <item>
     <name>GoBack()</name>
     <description></description>
   </item>
    <item>
     <name>GoForward()</name>
     <description></description>
   </item>
    <item>
     <name>Reload() </name>
     <description>reload the current page</description>
   </item>
    <item>
     <name>Stop()</name>
     <description>stops the page loading</description>
   </item>
    <item>
     <name>GetZoomLevel()</name>
     <description>gets the numeric zoom level</description>
   </item>
    <item>
     <name>SetZoomLevel(level)</name>
     <description>sets the zoom level</description>
   </item>
    <item>
     <name>OpenDevtools()</name>
     <description>opens the Chrome developer tools</description>
   </item>
    <item>
     <name>CloseDevtools() </name>
     <description>closes the Chrome developer tools</description>
   </item>
    <item>
     <name>OnReady(XbasicCode)</name>
     <description>executes Xbasic code when the Chrome control has been initialized. </description>
   </item>
</list>
</section>
<section>
<description>The tasks performed by the following methods could just as well be done by using the .ExecuteJavascript() or .ExecuteJavascriptResult() methods. However, since these methods that go directly against the DOM without having to execute Javascript, they are more convenient to use.</description>
<list>
    <item>
     <name>HasElement(elementId)</name>
     <description>indicates whether the specified elementId is present</description>
   </item>
    <item>
     <name>HasAttribute(elementId,attributeName) </name>
     <description>indicates if the specified element has the specified attribute</description>
   </item>
    <item>
     <name>GetAttribute(elementId,attributeName)</name>
     <description>gets the value of the specified attribute from the specified element</description>
   </item>
    <item>
     <name>SetAttribute(elementId,attributeName,attributeValue) </name>
     <description>sets the value of an attribute</description>
   </item>
    <item>
     <name>GetInnerText(elementId)</name>
     <description>gets the inner text property of an element</description>
   </item>
    <item>
     <name>GetValue(elementId)</name>
     <description>gets the value of element (for example, an INPUT control)</description>
   </item>
    <item>
     <name>SetValue(elementId,value)</name>
     <description>sets the value of an element</description>
   </item>
    <item>
     <name>GetOuterHtml(elementId)</name>
     <description>gets the outer html for an element</description>
   </item>
    <item>
     <name>GetInnerHtml(elementId)</name>
     <description>gets the inner html for an element</description>
   </item>
    <item>
     <name>SetInnerHtml(elementId,value)</name>
     <description>sets the inner html of an element</description>
   </item>
    <item>
     <name>AddEventListeners(definition)</name>
     <description>binds an event handler to an element. See section above 'Binding events programmatically'</description>
   </item>
    <item>
     <name>DropEventListeners(elementId)</name>
     <description>DropEventListeners(elementId)</description>
   </item>
 </list>
</section>
 </sections>
 </group>
 <group>
   <title>Videos - Using the Chrome Embeddable Browser in Xdialog</title>
   <sections>
     <section>
        <description>
          <p>Xdialog allows users who are building desktop applications to create very powerful 'screens' to prompt for and display information to users. You can now embed Google's Chrome browser directly into your Xdialogs. This means that you can use the full power of HTML, CSS3 and Javascript to create amazing looking Xdialog screen. When you embed the Chrome control in an Xdialog you can easily respond to events in the HTML with either Javascript of Xbasic code. You can also easily send events from Xbasic to the HTML that is displayed in the embedded Chrome control.</p>
          <p>If you have used Xdialog in your desktop applications in the past, this new feature will open up many exiting possibilities.</p>
        </description>
     </section>
     <section>
       <videos>
         <title>Using the Chrome Embeddable Browser in Xdialog - Introduction</title>
         <video>
           <name>Watch video - Part 1</name>
           <link>https://www.viddler.com/v/a669d7ed</link>
         </video>
           <video>
           <name>Watch video - Part 2</name>
           <link>https://www.viddler.com/v/1baa458b</link>
         </video>
       </videos>
     </section>
      <section>
       <videos>
          <title>Using the Chrome Embeddable Browser in Xdialog - Debugger</title>
         <video>
           <name>Watch Video</name>
           <link>https://www.viddler.com/v/b4eddab5</link>
         </video>
       </videos>
     </section>
      <section>
       <videos>
          <title>Using the Chrome Embeddable Browser in Xdialog - Binding events</title>
          <video>
           <name>Watch video</name>
           <link>https://www.viddler.com/v/84468ba3</link>
         </video>
       </videos>
     </section>
      <section>
       <title>Google Charts</title>
       <videos>
         <video>
           <name>Watch video</name>
           <link>https://www.viddler.com/v/44f7108b</link>
         </video>
       </videos>
     </section>
      <section>
       <title>Using jQuery</title>
       <videos>
          <video>
           <name>Watch video</name>
           <link>https://www.viddler.com/v/d74f8468</link>
         </video>
       </videos>
     </section>
   </sections>
 </group>
 </groups>
</page>