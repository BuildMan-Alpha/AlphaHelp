<page>
    <topic>Has events</topic>
    <description>Specify if the chart has events. For example, you can call a Javascript function
        when clicking on a slice of a pie chart, or hovering over a data point on a series.
    </description>
 <sections>
     <section>
     <steps>
         <step>
             <description>Add a chart control to the component and name it c1.</description></step>
         
      
         
         <step>
           <description>On the UX Code page open the Xbasic functions page and add the following.</description>
               <example><![CDATA[function piedata as c (e as p)

dim explodedSliceNumber as n = -1
if eval_valid("e.__javascriptFunctionResults") then
   dim data as p = json_parse(e.__javascriptFunctionResults)
   explodedSliceNumber = convert_type(data.javascriptFunctionResult, "N")
end if

if explodedSliceNumber >= 0 then
explodedSliceNumber = explodedSliceNumber + 1
end if

dim arr[0] as p
arr[].sales = 10
arr[..].region = "East"
arr[..].exploded = 0
           
arr[].sales = 20
arr[..].region = "West"
arr[..].exploded = 0

arr[].sales = 15
arr[..].region = "South"
arr[..].exploded = 0

arr[].sales = 8
arr[..].region = "North"
arr[..].exploded = 0

if explodedSliceNumber > 0 then
arr[explodedSliceNumber].exploded = 1
end if

dim txt as c
txt = arr.dump_properties("sales|region|exploded")

piedata = txt

end function]]></example>
         </step>
         
         <step>
             <description>e._javascriptFunctionResults is a value of some javascript 
             that got computed on the client-side befire the callback took place.</description>
         
         </step>
         <step>
             <description>Go to the UX Properties page and in the Data Series section 
    click on the Data series property.</description>
         </step>
         <step>
             <description>In the Data Series Builder select "Custom" as the Data Source Type.</description>
         </step>
         <step>
             <description>At the bottom of the Data Series Builder find the Custom properties section and set
                 the Xbasic function name property to be "pieData"
             </description>
         </step>
         <step>
             <description>Set the Subseries names property to "sales.region.exploded"</description>
         </step>
          <step>
             <description>Set the Javascript function property to be "pieDataJs".</description>
         </step>
         <step>
             <description>Go to the UX Code page and click on Javascript functions. 
                 Define the following function.</description>
             <example><![CDATA[function pieDataJS() {
if(typeof {dialog.object}._exploded != 'undefined') {
return {dialog.object}._exploded;
} else return -1;
}
             ]]></example>
             <note>This function is called when the data series is refreshed. The value returned by this function will be submitted to the server
                 as part of the Ajax callback.
             </note>
         </step>
         <step>
             <description>Go to the UX Controls page and in the control properties list,
                  under the Chart properties section, check the Has events property.
             </description>
             
         </step>
         <step>
             <description>Go to the Chart Events section of the Properties list and click the [...]
                 button next to the onDblClick property.
             </description>
             
         </step>
         <step>
             <description>Add this Javascript to the onDblCLick property:</description>
             <example><![CDATA[{dialog.object}._exploded = chart.pointNumber;
{dialog.Object}.refreshDataSeries('Series1');
var obj = {dialog.object}.getControl('c1');
obj.refresh();]]></example>
             <note>c1 is the name of the chart to refresh</note>
         </step>
            <step>
             <description>On the UX Controls page, scroll down the properties list until you reach
                 the chart properties. Click on the Chart definition property. </description>
             
         </step>
            <step>
             <description>In the Chart Data section of the Graph Data dialog, click the [...] button and set the Data property to Series1.sales.</description>
             
         </step>
          <step>
             <description>Click the [...] button and set the Data Label property to chart.category</description>
             
         </step>
          <step>
             <description>Click the [...] button and set the Explode slice property to Series1.exploded = "1"</description>
             
         </step>
         <step>
             <description>In the Chart Category section set the Category to Series1.region and then click OK to close the graph data dialog.</description>
         </step>
     </steps>
  
         
     </section>
     
     
 </sections>  

</page>