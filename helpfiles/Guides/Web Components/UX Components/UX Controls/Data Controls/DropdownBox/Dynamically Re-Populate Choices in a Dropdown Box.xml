<page>
    <shortlink>ux data controls dropdown box dynamically re-populate choices in a dropdown box</shortlink>
    <topic>Dynamically Re-Populate Choices in a Dropdown Box</topic>
    <description>You can create a dropdown box that allows users to enter new options to the dropdown list. These 
        entries can be made using a pop-up window and then stored in a SQL database.  
    </description>
  
<sections>
    <section>
 <description>For a visual explanation watch this three part video: [Part 1], [Part 2], [Part 3], or follow 
     the step by step guide below.
 </description>
    </section>
    
    
    
    <section>
        <title>Create a Dynamically Populated DropDown Box</title>
        <steps>
            <step>
                <description>In the UX Builder on the UX Controls page open the 'Data Controls' menu. 
                    Click on the [DropdownBox] option to add a dropdown box to the component. Give 
                    the dropdown box the name and label 'product'.
                </description>
                <figure><link>images/dr2.png</link></figure>
            </step>
             <step>
                <description>In the properties list on the right scroll down to the 'DropDownBox' properties. 
                    Click the [...] button next to the 'Choices' property.
                </description>
                <figure><link>images/dr3.png</link></figure>
            </step>
             <step>
                <description>In the 'Define Choices' dialog select the 'Dynamic' radio button option in the 
                    'Choices are' menu.
                </description>
                <figure><link>images/dr4.png</link></figure>
            </step>
             <step>
                <description>In the property settings that appear set the 'Data source type' to be 'AlphaDAO'.</description>
                <figure><link>images/dr5.png</link></figure>
            </step>
             <step>
                <description>Click the [...] button next to the 'AlphaDAO Connection string name' property. 
                    Create a connection to the Northwind database. Click OK to return to the Define Choices dialog.
                </description>
                <figure><link>images/dr6.png</link></figure>
            </step>
             
             <step>
                <description>Click the [...] button next to the 'AlphaDAO SQL SELECT statement' property.</description>
                <figure><link>images/dr7.png</link></figure>
            </step>
             <step>
                <description>In the 'SQL Select' dialog's 'Genie' tab click the 'Select' button next to the 'Table' textbox 
                    and select the 'Products' table. 
                </description>
                <figure><link>images/dr8.png</link></figure>
            </step>
             <step>
                <description>Expand the 'Field to display' dropdown in the SQL Select dialog and select the 
                    'ProductName' field. Click OK to close the dialog.</description>
                <figure><link>images/dr9.png</link></figure>
            </step>
             <step>
                <description>Back in the 'Define Choices' dialog click the [...] button next to the 
                    'Additional choices (Pre)' property.
                </description>
                <figure><link>images/dr10.png</link></figure>
            </step>
          <step>
                <description>Add the following to the 'Specify Choices' definition and click OK and OK again to close the Define Choices dialog.</description>
                <example><![CDATA[Add new choice|__NewChoice__]]></example>
                <figure><link>images/dr11.png</link></figure>
            </step>
          <step>
                <description>Back on the UX Controls page, scroll down the 'product' drop-down box control's properties list to the 
                    'Javascript' section. Click the [...] button next to the 'onChange' property.
                </description>
                <figure><link>images/dr12.png</link></figure>
            </step>
          <step>
                <description>In the 'Edit onChange Event' dialog select the 'Text mode' radio button option. Add the following code 
                    to the 'onChange' event's definition and click Save
                </description>
                <example><![CDATA[if( this.value == '__NewChoice__') {dialog.object}.runAction('showwindow');]]></example>
                <figure><link>images/dr13.png</link></figure>
                
            </step>
          <step>
                <description>Run the Component in Live Preview. When you click on the dropdown box button you should see 
                    a dropdown list containing all of the products listed in the 'ProductName' field.
                </description>
                <figure><link>images/dr14.png</link></figure>
            </step>
            
        </steps>
        
        
        
    </section>
    <section>
        <title>Place the Dropdown Box Control in a Repeating Section.</title>
        <steps>
            <step>
                <description>Open the UX Controls page and highlight the 'product' dropdown box control in the controls tree. 
                    Expand the 'Containers' menu and click on the [Container] option. 
                </description>
                <figure><link>images/dr15.png</link></figure>
            </step>
          <step>
                <description>The 'Container Type' list will open. Select the 'RepeatingSection' option and click the 'Insert Around' button.</description>
                <figure><link>images/dr16.png</link></figure>
            </step>
          <step>
                <description>Run the Component in Live Preview. By default there are five repeating sections. Click on one of 
                    the repeating sections and you should see the same list displayed as in the original 'product' dropdown box.
                </description>
                <figure><link>images/dr17.png</link></figure>
            </step>
          
            
            
            
        </steps>
    </section>

    <section>
        <title>Layout a Window That Will Open from the Dropdown Box</title>
        <steps>
               <step>
                <description>On the UX Controls page highlight the closing repeating section tag, [RepeatingSection End: CONTAINER_2]. 
                    Open the 'Data Controls' menu and click on the [TextBox] option to add a textbox control to the component. Give 
                    the textbox control the name 'newProdName'.
                </description>
                <figure><link>images/dr18.png</link></figure>
            </step>
             <step>
                <description>With the textbox control highlighted, open the 'Other Controls' menu and click on the 
                    [Button] option to add a button to the control. 
                </description>
                <figure><link>images/dr19.png</link></figure>
            </step>
             <step>
                <description>Highlight the button control. In the properties list on the right set the 
                    'Button text' property to read 'Add Product to Table'
                </description>
                <figure><link>images/dr20.png</link></figure>
                <note>For a better layout remove the toggle break after both the textbox and button controls. In 
                    the button control's properties, scroll down to the 'Control Label' and set the 'Position' 
                    property to 'Above'. This should align the two controls.
                </note>
            </step>
             <step>
                <description>Highlight both the textbox control and the button. Open the 'Containers' menu 
                    and click on the [Frame] option to place a frame around the two controls. Give the frame 
                    the name 'Add Product'.
                </description>
                <figure><link>images/dr21.png</link></figure>
            </step>
             <step>
                <description>Highlight the frame control and everything in it. In the 'Containers' menu click 
                    on the [Container] option.
                </description>
                <figure><link>images/dr22.png</link></figure>
            </step>
               <step>
                <description>In the 'Container Type' list select the 'None' option.</description>
                <figure><link>images/dr23.png</link></figure>
            </step>
             <step>
                <description>Highlight the opening container tag. The tag should be [Container:CONTAINER_1]. If the id of the 
                    container is not 'CONTAINER_1' go to the properties list on the right, click the [...] button 
                    next to the 'Container ID' property in the 'Container Begin Properties' section, and change the container ID 
                    to be 'CONTAINER_1'.
                </description>
                <figure><link>images/dr24.png</link></figure>
            </step>
          
        </steps>
    </section>
    <section>
        <title>Define the Javascript that will Open the Pop-Up Window</title>
         <steps>
               <step>
                <description>In the UX menu open the UX Properties page. Scroll down to the 'Javascript' section and 
                    click the [...] button next to the 'Javascript Actions' property.</description>
                <figure><link>images/dr25.png</link></figure>
            </step>
             <step>
                <description>In the 'Define Javascript Actions' dialog click the 'Add New Action' button. 
                    Give the new action the name 'showwindow'.
                </description>
                <figure><link>images/dr26.png</link></figure>
            </step>
             <step>
                <description>Click the 'Edit Action' button.</description>
                <figure><link>images/dr27.png</link></figure>
            </step>
            <step>
                <description>Select the 'Action Javascript' radio button and click the 'Add New Action' button.</description>
                <figure><link>images/dr28.png</link></figure>
            </step>
            
            
             <step>
                <description>Type 'pop' into the 'Filter list'. Select the 'Open a Pop-up Ajax Window/Overlay' action and click OK.
                </description>
                <figure><link>images/dr29.png</link></figure>
            </step>
             <step>
                <description>In the action's properties list click the dropdown next to the 'How is window contents set' 
                    property. Select the 'Contents of a Container' option.
                </description>
                <figure><link>images/dr30.png</link></figure>
            </step>
            <step>
                <description>Click the dropdown next to the 'Container id' property and select 'CONTAINER_1'.</description>
                <figure><link>images/dr31.png</link></figure>
            </step>
            <step>
                <description>Set the 'Window height' property to "1.5in".</description>
                <figure><link>images/dr32.png</link></figure>
            </step>
            <step>
                <description>Set the 'Window width' property to be "5in". Click OK to close the properties list and then 
                    click 'Save' and 'OK'.
                </description>
                <figure><link>images/dr33.png</link></figure>
            </step>
            <step>
                <description>Run the component in Live Preview. Click the dropdown box control again. There should 
                    be an 'Add new choice' option. Click on the 'Add new choice' option and the container, CONTAINER_1, that 
                    you defined should open.
                </description>
                <figure><link>images/dr.png</link></figure>
            </step>
            
        </steps>
    </section>
    
    
    
    
    
    
</sections>  
  <links>
       <link href="http://www.ajaxvideotutorials.com/V11Videos/dialogComponent_addNewChoiceToDropdown_1.swf">Part 1</link>
       <link href="http://www.ajaxvideotutorials.com/V11Videos/dialogComponent_addNewChoiceToDropdown_2.swf">Part 2</link>
      <link href="http://www.ajaxvideotutorials.com/V11Videos/dialogComponent_addNewChoiceToDropdown_3.swf">Part 3</link>
  </links>

</page>