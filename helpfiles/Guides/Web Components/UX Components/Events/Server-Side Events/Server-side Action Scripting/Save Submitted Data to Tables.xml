<page>
    <shortlink>ux Server-side actions Save Submitted Data to Tables</shortlink>
    <topic>Save Submitted Data to Table(s)</topic>
    <description>Save the submitted data to one or more tables.</description>
    <sections>
     
        <section>
   <description>In order to define a 'Save Submitted Data to Table(s)' action it is necessary to 
       first add Data Binding to the component, meaning that the component must be tied to a either 
       a SQL or DBF table defined on the server. The process of adding this action to a server-side event 
       on a data-bound component is described on the "[Bind the controls on your UX to fields in one or more existing 
       tables]" page in the [Data Binding] section of the documentation.
   </description>
        </section>        
        
        
        
        
        
           <section>
                 <title>Save Submitted Data to Table(s) Action Properties</title>
            <description>&#160;</description>
        </section>
        
        <section>
             
            <list>
                 <item>
                    <name-title>Save Data</name-title>
                    <description-title>&#160;</description-title>
                </item>
                <item>
                    <name>After submit action</name>
                    <description>Specify the action to take after the submitted data has been saved.</description>
                </item>
                <item>
                    <name>Target page</name>
                    <description>Specify the target page.</description>
                </item>
                <item>
                    <name>Use transactions</name>
                    <description>Should all of the SQL statements be wrapped inside a transaction? 
                        For example, if your Dialog has a Repeating Section so that some of the data 
                        is inserted into a 'header' table, and the data from the 'Repeating Section' is 
                        inserted into a 'detail' table, the record inserted into the 'header' table will be 
                        automatically deleted if an error occurs while entering data into the 'detail' table. 
                        Transactions are not supported for .dbf tables. Not all SQL databases support 
                        transactions.
                    </description>
                </item>
                <item>
                    <name>Display debugging info</name>
                    <description>Specify if the SQL statements (for SQL tables), or Xbasic code (for .dbf 
                        tables) should be shown. Note: If the 'After submit action' is set to redirect, 
                        then you will not see the debugging information (unless there is an error), 
                        because control will be redirected to the target page. </description>
                </item>
                <item>
                    <name>Debugging information placeholder</name>
                    <description>Specify where debugging information should be shown. If you are working in an application 
                        that uses Panels, you will typically put a placeholder in the Panel to show debugging information 
                        in the appropriate panel. Set to <![CDATA[<Default>]]> for the default placement of debugging information.
                    </description>
                </item>
                
                
                <item>
                    <name>Global errors placeholder</name>
                    <description>Specify where global errors (if a commit error that is not specific 
                        to a particular field) should be displayed. If you are working in 
                        an application that uses Panels, you will typically put a placeholder in the 
                        Panel to show Global errors in the appropriate panel. Set to <![CDATA[<Default>]]> 
                        for the default placement of global errors.
                    </description>
                </item>
                
            </list>
        </section>
        <section>
            <description>&#160;</description>
        </section>
        
        
        <section>
         
            <list>
                <item>
                    <name-title>After Save Confirmation</name-title>
                     <description-title>&#160;</description-title>
                </item>
                    <item>
                    <name>Show a fade out message after record save</name>
                    <description>Specify if a confirmation message should be shown after a record is saved. 
                        Note that the message will not be shown if the action redirects to another page.
                    </description>
                </item>
                <item>
                    <name>Message text</name>
                    <description>Specify the text of the confirmation message.
                         This setting appears once the 'Show a fade out message after record save' property is checked.</description>
                </item>
                 <item>
                    <name>Placeholder id where message is to be shown</name>
                    <description>Specify the name of the placeholder where the confirmation message should be shown. 
                        To add a placeholder to the component select the [Placeholder] control in the 'Other Controls' section 
                        of the toolbox.  
                        This setting appears once the 'Show a fade out message after record save' property is checked.</description>
                </item>
                 <item>
                    <name>Message duration</name>
                    <description>Specify the duration of the message in milliseconds. For example, 2000 is 2 seconds. 
                        This setting appears once the 'Show a fade out message after record save' property is checked.</description>
                </item>
                 <item>
                    <name>Message style</name>
                    <description>Specify the style for the message. 'Default' will style the message based on the current 
                        component style. 'None' will not apply any style. You can add your own styling to the message text itself. 
                        This setting appears once the 'Show a fade out message after record save' property is checked.</description>
                </item>
            </list>
        </section>
           <section>
            <description>&#160;</description>
        </section>
        
        <section>
            <list>
                <item>
                    <name-title>Client-side Events</name-title>
                    <description-title>&#160;</description-title>
                </item>
                <item>
                    <name>After save</name>
                    <description>Specify the name of a Javascript function to call after the server-side 
                        event that saves the data has completed. The function gets passed as an 'e' object 
                        that contains certain properties, including 'recordWasSaved' which is true or false. 
                        Note: Event will not fire if the action redirects to another page.
                    </description>
                </item>
                <item>
                    <name>Data to pass to client side event</name>
                    <description>You can populate the 'e' object that is passed to the client-side 'After save' 
                        event with information that is available on the server.
                    </description>
                </item>
                <item>
                    <name>After save succeeded Javascript</name>
                    <description>Specify the Javascript to execute if the save succeeded. 
                        You can use this property as an alternative to specifying the 'After save' 
                        Javascript function.
                    </description>
                </item>
                <item>
                    <name>After save failed Javascript</name>
                    <description>Specify the Javascript to execute if the save failed. You can 
                        use this property as an alternative to specifying the 'After save' Javascript function.
                    </description>
                </item>
                
            </list>
        </section>
        
           <section>
            <description>&#160;</description>
        </section>
        
        <section>
            <list>
                <item>
                    <name-title>Server-side Events</name-title>
                    <description-title>&#160;</description-title>
                </item>
                   <item>
                    <name>BeforeRecordInsert Function</name>
                    <description></description>
                </item>
                    <item>
                    <name>AfterRecordInsert Function</name>
                    <description></description>
                </item>
                    <item>
                    <name>BeforeRecordUpdate Function</name>
                    <description></description>
                </item>
                    <item>
                    <name>AfterRecordUpdate Function</name>
                    <description></description>
                </item>
                    <item>
                    <name>BeforeRecordDelete Function</name>
                    <description></description>
                </item>
                    <item>
                    <name>AfterRecordDelete Function</name>
                    <description></description>
                </item>
                    <item>
                    <name>AfterSectionRowRefresh Function</name>
                    <description></description>
                </item>
                    <item>
                    <name>onSQLError Function</name>
                    <description>Fires when a SQL error occurs after attempting a CRUD operation. 
                        Allows you to intercept the error message returned by the database and 
                        return a friendlier message.
                    </description>
                </item>
                
            </list>
        </section>
           <section>
            <description>&#160;</description>
        </section>
        
         <section>
            <list>
                <item>
                    <name-title>Geography Fields</name-title>
                    <description-title>&#160;</description-title>
                </item>
                   <item>
                    <name>Geocode record</name>
                    <description>When record is saved should the record be geo-coded? i.e. should a 
                        latitude/longitude value be computed for the address?
                    </description>
                </item>
                 <item>
                    <name>Location fields ('Geography' or 'Geometry type fields)</name>
                    <description>When record is saved should a 'location' field (i.e. a 
                        'Geography' or 'Geometry' field) be updated if a longitude or latitude field was edited. </description>
                </item>
                
            </list>
        </section>
           <section>
            <description>&#160;</description>
        </section>
        
            <section>
            <list>
                <item>
                    <name-title>Refresh List Controls</name-title>
                    <description-title>&#160;</description-title>
                </item>
                   <item>
                    <name>Refresh List Controls</name>
                    <description>After data is edited, specify if there are any List controls on the 
                        component that you want to refresh so that the data in the List controls reflect 
                        the edits that were saved.
                    </description>
                </item>
                  <item>
                    <name>List controls to refresh</name>
                    <description>Specify the ids of the List controls you want to refresh.</description>
                </item>
                
            </list>
        </section>
           <section>
            <description>&#160;</description>
        </section>
        
          <section>
            <list>
                <item>
                    <name-title>Store Current Location Information</name-title>
                    <description-title>&#160;</description-title>
                </item>
                    <item>
                    <name>Store location information when record is saved</name>
                    <description>You can optionally store the location (latitude/longitude) in fields 
                        in the record you are editing. The location information is submitted when the 
                        Ajax callback is made. To submit location information when the 'Submit' button is 
                        pressed, the .Submit() method takes a special flag.
                         For example: submit(",",{getLocationData:true})
                    </description>
                </item>
                  <item>
                    <name>Latitude field</name>
                    <description>Specify the field where the latitude value should be stored.</description>
                </item>
                  <item>
                    <name>Longitude field</name>
                    <description>Specify the field where the longitude value should be stored</description>
                </item>
                  <item>
                    <name>Update location field</name>
                    <description>Specify if the table has a Geography/Geometry field that should be updated.</description>
                </item>
                <item>
                    <name>Location field name</name>
                    <description>Brings up a dialog that lets you select the location field to be updated. If the 
                        field dialog does not show all of the fields in the table, go to the 'Data Binding' 
                        pane and click the 'Refresh Table Information' button.
                    </description>
                </item>
                  <item>
                    <name>Store data for which operation types</name>
                    <description>Specify if the current location information should be stored only when inserting 
                        a new record, or when Inserting and Updating a record.
                    </description>
                </item>
            </list>
        </section>
<section>
    <title>Using the 'Save Submitted Data to Tables' Action in Connection With Security</title>
    <description>This guide builds on the '[Validate Web Security Values]' action guide. This first guide 
        illustrated how to set up basic username and password capabilities in a component. 
        When a user creates a username and password they sometimes type in additional data to submit to the server. 
        For example, this data might be the users phone-number or first name and/or family name. 
        The 'Save Submitted Data to Table(s)' action can be used to save this data to a separate table from the 
        user's security data. The 'UserName' field can also be used to link both tables, so that the non-security 
        related data can be loaded securely at a later point. 
    </description>
    
    
    
</section>

<section>
    <title>Build the Component in the Validate Web Security Values Guide</title>
   <steps>
       <step>
           <description>Go to the [Validate Web Security Values] guide and build the entire component.</description>
      
       </step>
       <step>
         <description>The component should look like this:</description>
         
       </step>
       </steps>
       </section>
       
       
       
       <section>
           <title>Minor Adjustments to Security Controls</title>
           
           <steps>
       <step>
           <description>On the UX Controls page of the component highlight the [password] textbox control. 
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
 <step>
           <description>In the properties list on the right scroll down to the 'Data Binding' 
               section and uncheck the 'Updateable' property checkbox.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
 <step>
           <description>Highlight the [confirm_password] textbox in the controls tree and uncheck the control's 'Updateable' 
               checkbox.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
          <step>
           <description>Uncheck the 'Updateable' property checkboxes for the [UserRoles] and the [UserGuid] hidden controls.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
   </steps>
    
    
</section>
<section>
    <title>Add a Personal Data Section to the Component</title>
    <steps>
        
        <step>
           <description>On the UX Controls page open the 'Data Controls' menu. Click on the [TextBox] 
               option to add a textbox control to the page. Give the control the name and label of 
               'first name'. 
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>Highlight the first_name control and click on the double up arrow in the toolbar to 
               move the control to the top of the controls tree.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>In the properties list on the right, in the 'Field Properties' section, click 
               the [...] button next to the 'Validation Javascript' property.
           </description>
           <figure><link>images/ssd.png</link></figure>
           
       </step>
       <step>
           <description>Add the following code to the client side validation for the first_name control. Click OK.</description>
           <example><![CDATA[if(data==''){
return 'First Name is Required';
} else {
   return false;
};]]></example>
            <figure><link>images/ssd.png</link></figure>
       </step>
       
       <step>
           <description>With the first_name control still highlighted, go back to the 'Data Controls' menu 
               and add a second [TextBox] control to the component. Give this control the name and label 
               'last name'.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>Highlight the 'last_name' field and add a third [TextBox] control to the component. 
               Give this control the name and label of [phone].
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>Highlight the [first_name] field. Open the 'Other Controls' menu and click on the 
               [Static Text] control to add some static text control underneath the [first_name] control.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>Highlight the static text control in the controls tree.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>In the properties list on the right set the 'Static text' property to be 
               an asterix '*'. 
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Click the [...] button next to the 'Style' property.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>In the 'Style Editor' set the 'Color' property to be 'red' and click OK.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Place [Static Text] controls underneath the [last_name] and [phone] controls. Set the 
               'Static text' property of both controls to be '*' and set the 'Style' property's 'Color' setting 
               to be 'red' as well.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Add a forth [Static Text] control, underneath the static text asterix under 
               the [phone] control. Set the 'Static text' property of this control to read '*Required Fields' 
               and set the control's 'Syle' property's 'Color' to be 'red'.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Highlight all of the most recently added controls. Open the 'Containers' menu 
               and click on the [Frame] option to add a frame container around the controls. Give the 
               Frame the name 'Personal Data'.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       
    </steps>
    
    
    
</section>


<section>
    <title>Implement the 'Save Submitted Data to Tables' Action</title>
    <steps>
         <step>
           <description>Expand the 'Events' menu and open the 'Server-side' page.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>You should already have defined three events in the Server-Side Events list. 
               Highlight the 'afterDialogValidate' event.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Place the mouse cursor inside the 'afterDialogValidate' event definition. 
               above the previously defined 'Save Web Security Values' action. Click the 
               'Action Scripting' button in the toolbar.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>In the 'Select an Action' dialog highlight the 
               'Save Submitted Data to Table(s)' action and click OK.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Specify the action's name and click OK.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>In the 'Save Submitted Data to Tables' property settings click the dropdown next to 
               the 'After submit action' property in the 'Save Data' section. Select the 
               'Enter another record' option and click OK.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>In the afterDialogValidate definition add the following code around the 
               'Save Web Security Values' action. 
           </description>
           <example><![CDATA[if rtc.flagRecordWasSaved
end if
           ]]></example>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>The afterDialogValidate definition should look like this:</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        
        
    </steps>
    
    
</section>
<section>
    <title>Data Binding</title>
    <steps>
        <step>
           <description>In the UX Builder's main menu open the 'Data Binding' page and click the 
               'Create new table(s) to match the controls on your UX component' hyperlink.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Open the 'Step 1 - Define Table Aliases and Fields' tab. In the 'Logical Dialog Sections' 
               highlight the <![CDATA[<Top Level>]]> section. Click the 'Add' button in the section's 'Properties' 
               area.</Top>
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>Name the new table alias 'RegisteredUsers'.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>View the 'Fields in Logical Section'. Hold down the 'Shift' button and click first on the 
               'first_name' field and then the 'user_name' field to highlight the 'first-name', 'last_name', 
               'phone', and 'user_name' fields.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>In the field 'Properties' area on the right click the 'Set...' button next to the 
               'Table alias' textbox. Select the 'RegisteredUsers' alias.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Set the  'Size' of all of the controls to be '30' characters.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>Open the 'Step 2. Define Table Properties' tab. In the 'Table Aliases' tree highlight 
               the 'RegisteredUsers' 
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>In the 'Table Properties' on the right set the 'Table name' to read 'Registered Users'.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>In the 'Global Table Properties' click the dropdown button next to the 'Table type' property. 
               Select SQL.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Click the [...] button next to the 'Connection string' property.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>Click the 'Used a named connection string' radio button and click the 'Select...' 
               button. Define a connection to the 'AADemo-Northwind' database. Click OK
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Open the 'Step 3. Create table(s)' tab. Click the Create table(s) button.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>On the 'Data Binding' page click the 'Bind the controls on your UX o fields in one or more existing tables' 
               hyperlink; then click the 'Bind UX Component Controls to Table Fields' button.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>The 'Bind Controls to Fields' dialog will open. 
               Hold down the 'Shift' key and click with the mouse on both the 'password' field and the 
               'UserGuid' field to highlight the 'password', 'confirm_password', 'UserRoles', and 'UserGuid' 
               fields.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>Click the 'Set selected fields to '*unbound' hyperlink at the bottom of the dialog.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
        <step>
           <description>Click OK and OK again.</description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description>Run the component in Live Preview and register some example users, filling in both 
               the Personal Data section and the Security section. Then Click 'Submit'. If there are no validation 
               errors the new user's data should now have been saved to the new 'RegisteredUsers' table.
           </description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       
        
        
        
    </steps>
    
    
    
</section>
<section>
    <title>Viewing the Entered Personal Data</title>
   
    
    <steps>
        <step>
           <description></description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description></description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description></description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       <step>
           <description></description>
           <figure><link>images/ssd.png</link></figure>
       </step>
       
        
        
    </steps>
    
</section>



        
    </sections>
    
    <links>
        <link link="data binding existing tables">Bind the controls on your UX to fields in one or more existing 
       tables</link>
        <link link="ux components data binding">Data Binding</link>
        <link link="ux server-side actions Validate Web Security Values">Validate Web Security Values</link>
    </links>
    
    
</page>