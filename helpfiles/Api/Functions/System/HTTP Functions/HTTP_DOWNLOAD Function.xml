<page>
   <topic>HTTP_DOWNLOAD Function</topic>
   <syntax>Status_Flag as L = http_download([C source_url [,C target_file [,L modal [,P pDialogSettings ]]]])</syntax>
   <arguments>
     <argument>
         <name>Status_Flag</name>
         <description>If Modal is set to TRUE, Status_Flag will be true if the download was successful, FALSE otherwise. If Modal is FALSE, Status_Flag will always be TRUE, because the function call returns before the download is complete.</description>
     </argument>
     <argument>
         <name>source_url</name>
         <description>The location of the file to download.</description>
     </argument>
     <argument>
         <name>target_file</name>
         <description>The name of the file to write locally.</description>
     </argument>
     <argument>
         <name>modal</name>
         <description>Logical. Optional. Default = TRUE.
.T. = Modal dialog box.
.F. = Modeless dialog box.
</description>
     </argument>
     <argument>
         <name>pDialogSettings</name>
         <description>Dialog allows properties of the dialog box to be overridden. Pointer</description>
     </argument>
     <list>
         <item>
             <name-title>Argument</name-title>
             <description-title>Description</description-title>
         </item>
         <item>
             <name>.close_on_complete</name>
             <description>.T. = Closes the dialog when the file is finished downloading or an error is encountered.</description>
         </item>
         <item>
             <name>.launch_on_complete
</name>
             <description>.T. = Opens the file in its associated application after the download is complete.</description>
         </item>
         <item>
             <name>.title_initial</name>
             <description>Sets the initial dialog title. The default is " File Download"</description>
         </item>
         <item>
             <name>.title_progress</name>
             <description>Sets the dialog title that is displayed as the download progresses. The default is " {percent} of {dl_file}".</description>
        <list>
            <item>
                <name-title>Argument</name-title>
                <description-title>Description</description-title>
            </item>
            <item>
                <name>{current_bytes}</name>
                <description>The running total of bytes downloaded so far .</description>
            </item>
            <item>
                <name>{total_bytes}</name>
                <description>The total number of bytes to be downloaded.</description>
            </item>
            <item>
                <name>{percent}</name>
                <description>The completion percent.</description>
            </item>
            <item>
                <name>{dl_file}</name>
                <description>The name of the file being downloaded.</description>
            </item>
            
            
        </list>
         </item>
         <item>
             <name>.cancel</name>
             <description>.F. = Disables the Cancel button</description>  
         </item>
         <item>
             <name>.close</name>
             <description>.F. = Disables the Close button</description>  
         </item>
         <item>
             <name>.launch</name>
             <description>.F. = Disables the Launch button</description>  
         </item>
         <item>
             <name>.from</name>
             <description>.F. = Hides the "download from"</description>  
         </item>
         <item>
             <name>.to</name>
             <description>.F. = Hides the "save to" display</description>  
         </item>
         <item>
             <name>.status</name>
             <description>.F. = Hides the status display (x bytes of xxx bytes)</description>  
         </item>
         <item>
             <name>.progress</name>
             <description>.F. = Hides the progress bar</description>  
         </item>
         <item>
             <name>.error_text_404</name>
             <description>The error text to be displayed if the server
returns a 404 status (file not found). Default is "Server error - file not found"
</description>  
         </item>
         <item>
             <name>.label.from</name>
             <description>Allows you to replace the default "Download From: " label.</description>  
         </item>
         <item>
             <name>.label.to</name>
             <description>Allows you to replace the default "Save From: "</description>  
         </item>
         <item>
             <name>.label.status</name>
             <description>Allows you to replace the default "Status: "</description>  
         </item>
         <item>
             <name>.label.progress</name>
             <description>Allows you to replace the default "Progress: "</description>
         </item>
          <item>
             <name>.label.close</name>
             <description>Allows you to replace the label on the Close button</description>
         </item>
          <item>
             <name>.label.cancel</name>
             <description>Allows you to replace the label on the Cancel button</description>
         </item>
          <item>
             <name>.label.cancelled</name>
             <description>The text to be displayed on the status line if the download is cancelled by the user. Default is "Download cancelled"</description>
         </item>
          <item>
             <name>.label.launch</name>
             <description>Allows you to replace the label on the Launch button</description>
         </item>
          <item>
             <name>.urlprompt.title</name>
             <description>Allows you to replace the default title on the URL prompt window (which only appears if the URL is not specified).</description>
         </item>
          <item>
             <name>.urlprompt.prompt</name>
             <description>Allows you to replace the default prompt on the URL prompt window (which only appears if the URL is not specified).</description>
         </item>
          <item>
             <name>.fileprompt.title</name>
             <description>Allows you to replace the default title on the file prompt window (which only appears if the file is not specified).</description>
         </item>
         
         
     </list>
     
     
     
   </arguments>
   <description>Download a file via the HTTP protocol and display a progress dialog</description>
   <discussion>
The HTTP_DOWNLOAD() function shows a progress dialog while downloading a file from the specified URL and saving it to Target_File. The user will be promoted for URL and Target_File if they are omitted.
Unlike FTP_GET_FILE(), HTTP_DOWNLOAD() does not have a built-in mechanism to retry when transmission errors occur.
Note : When the server responds with a 302 code, HTTP_DOWNLOAD() does not automatically use the new URL. The developer needs to examine result.parsed_headers.status_code, then if appropriate, try the URL provided in   result.parsed_headers.location. Refer to HTTP_GET()for an example.

   </discussion>
  
   <sections>
       <section>
           <title>Example</title>
            <description>Download the AlphaSports Explained PDF from the Learning center, prompting for the location to save the downloaded file.</description>
            <example><![CDATA[
http_download("http://downloads.alphasoftware.com/Books/AlphaSports.pdf")
]]></example>
       </section>
       
        <section>
            <description>Download the Alphasports Explained PDF from the Learning center and save to a predetermined location.</description>
            <example><![CDATA[
http_download("http://downloads.alphasoftware.com/Books/AlphaSports.pdf", "c:\alphasports.pdf")
]]></example>
       </section>
       
        <section>
            <description>Same as above, but make the progress window modal.</description>
            <example><![CDATA[
http_download("http://downloads.alphasoftware.com/Books/AlphaSports.pdf", "c:\alphasports.pdf", .f.)
]]></example>
       </section>
       
        <section>
            <description>Automatically close the progress window on completion.
</description>
            <example><![CDATA[
dim options as P
options.close_on_complete = .t.
http_download("http://downloads.alphasoftware.com/Books/AlphaSports.pdf", "c:\alphasports.pdf", .f., options)

]]></example>
       </section>
       
       <section>
           <description>Automatically close the progress window on completion and launch the downloaded file.</description>
           <example><![CDATA[
dim options as P
options.close_on_complete = .t.
options.launch_on_complete = .t.
http_download("http://downloads.alphasoftware.com/Books/AlphaSports.pdf", "c:\alphasports.pdf", .f., options)       
         ]]>  </example>
           
       </section>
       
       
       
   </sections>
   <see>
      <ref href="/Api/Functions/Web/Internet Functions/Internet Functions and Methods.html">Internet Functions  and Methods</ref>
   </see>
<terms>http,arguments,box,button,buttons,center,defaults,display,error,file,function,https,label,location,number,pdf,pointer,save,set,text,users,window</terms>
</page>